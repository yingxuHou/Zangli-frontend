(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{1912:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var l=a(3365),s=a(5826),r=a(9534),n=a.n(r),i=a(627),o=a(1521);function c(){let e=(0,i.usePathname)(),t=function(){let[e,t]=(0,o.useState)(()=>390);return(0,o.useEffect)(()=>{function e(){t(window.innerWidth)}return t(window.innerWidth),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}()/390,a=18.5*t,r=51*t;return(0,l.jsx)("div",{className:"bg-gray-900/80 glass-effect border-t border-gray-700",style:{height:r},children:(0,l.jsx)("div",{className:"flex justify-around items-center max-w-md mx-auto h-full",children:[{href:"/cal",icon:"/cond/cal.png"},{href:"/earth",icon:"/cond/globe.png"},{href:"/chat",icon:"/cond/chat.png"},{href:"/docs",icon:"/cond/book.png"},{href:"/user",icon:"/cond/user.png"}].map((i,o)=>{let c=e===i.href;return 2===o?(0,l.jsx)(n(),{href:i.href,className:"flex items-center justify-center rounded-full transition-colors shadow-lg \n    bg-[#0051feff]",style:{padding:10*t,transform:"translateY(-".concat(.2*r,"px)")},children:(0,l.jsx)(s.default,{src:i.icon,alt:"",width:1.2*a,height:1.2*a,style:{width:"".concat(1.2*a,"px"),height:"".concat(1.2*a,"px")}})},i.href):(0,l.jsx)(n(),{href:i.href,className:"flex items-center justify-center rounded-lg transition-colors\n                ".concat(c?"bg-gray-700":"hover:bg-gray-700"),style:{padding:6*t},children:(0,l.jsx)(s.default,{src:i.icon,alt:"",width:a,height:a,style:{width:"".concat(a,"px"),height:"".concat(a,"px")}})},i.href)})})})}},2591:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var l=a(3365),s=a(1521),r=a(5826);let n={src:"/_next/static/media/左箭头.e341bb4e.svg",height:16,width:16,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/右箭头.b02df8f8.svg",height:16,width:16,blurWidth:0,blurHeight:0},o=e=>{let{currentMonth:t,onPrevMonth:a,onNextMonth:o,onSelectDay:c,weekdays:d=["SUN","MON","TUE","WED","THU","FRI","SAT"],daysInMonth:u=31,containerClassName:h,startOffset:x=0,initialSelected:m=null}=e,[f,g]=s.useState(m);return(0,l.jsxs)("div",{className:"frosted-card calendar-gradient-neo gradient-border gradient-border--a calendar-sans rounded-[18px] px-6 py-7 sm:px-7 sm:py-8 md:px-8 md:py-9 ".concat(null!=h?h:""),children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 items-center gap-4 mb-4 sm:mb-5",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("button",{className:"hover:opacity-80 transition-opacity",onClick:a,"aria-label":"Previous month",children:(0,l.jsx)(r.default,{src:n,alt:"prev",width:16,height:16})})}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("span",{className:"month-label block text-base sm:text-lg font-medium tracking-wide text-center",children:t})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("button",{className:"hover:opacity-80 transition-opacity",onClick:o,"aria-label":"Next month",children:(0,l.jsx)(r.default,{src:i,alt:"next",width:16,height:16})})})]}),(0,l.jsx)("div",{className:"week-row text-gray-300/80 mb-3",children:d.map((e,t)=>(0,l.jsx)("div",{className:"week-cell text-[11px] sm:text-xs",children:e},t))}),(0,l.jsxs)("div",{className:"day-grid",children:[Array.from({length:x}).map((e,t)=>(0,l.jsx)("div",{className:"day-cell"},"pad-".concat(t))),Array.from({length:u}).map((e,t)=>{let a=t+1,s=f===a;return(0,l.jsxs)("button",{className:"day-cell transition-colors ".concat(s?"":"hover:bg-white/5"),onClick:()=>(e=>{g(e),null==c||c(e)})(a),"aria-pressed":s,children:[s?(0,l.jsx)("span",{className:"selected-badge",children:(0,l.jsx)("span",{className:"day-number",children:a})}):(0,l.jsx)("span",{className:"day-number",children:a}),s&&(0,l.jsx)("span",{className:"sr-only",children:"selected"})]},a)})]})]})},c=e=>{var t,a,s,r,n,i,o,c,d,u,h,x;let{counters:m=[{label:"农",value:"二零二五年 六月廿九",colorClass:"bg-blue-400"},{label:"公",value:"2025年7月23日 周三",colorClass:"bg-purple-500"},{label:"藏",value:"木蛇年 五月廿九",colorClass:"bg-pink-400"}],events:f=[{label:"国庆节 10月1日",colorClass:"bg-gray-500",daysLeftText:"还剩5天"},{label:"立秋 8月7日",colorClass:"bg-gray-500",daysLeftText:"还剩5天"},{label:"雪顿节 8月8日",colorClass:"bg-gray-500",daysLeftText:"还剩5天"}],currentPage:g=0,onPageChange:p,totalPages:v=4}=e;return(0,l.jsxs)("div",{className:"frosted-card calendar-gradient-neo widget-card-border px-6 pt-6 pb-4 light-purple-border transparent-purple-blue-gradient text-center shadow-2xl backdrop-blur-xl card-enter hover-lift dateevents-gradient-bg",children:[p&&(0,l.jsx)("div",{className:"flex justify-center space-x-3 mb-4",children:Array.from({length:v}).map((e,t)=>(0,l.jsx)("button",{onClick:()=>p(t),className:"relative transition-all duration-300 hover:scale-110 ".concat(t===g?"w-8 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg shadow-blue-500/50":"w-2 h-2 bg-gray-500 rounded-full hover:bg-gray-400"),"aria-label":"切换到第 ".concat(t+1," 个卡片"),children:t===g&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full animate-pulse"})},t))}),(0,l.jsxs)("div",{className:"mb-4",children:[" ",(0,l.jsxs)("div",{className:"dateevents-row-lunar",children:[(0,l.jsx)("div",{className:"dateevents-lunar-circle",children:(0,l.jsx)("span",{className:"dateevents-lunar-text",children:(null==(t=m[0])?void 0:t.label)||""})}),(0,l.jsx)("div",{className:"dateevents-lunar-rect",children:(0,l.jsx)("span",{className:"dateevents-lunar-rect-text",children:(null==(a=m[0])?void 0:a.value)||""})})]}),(0,l.jsxs)("div",{className:"dateevents-row-solar",children:[(0,l.jsx)("div",{className:"dateevents-solar-circle",children:(0,l.jsx)("span",{className:"dateevents-solar-text",children:(null==(s=m[1])?void 0:s.label)||""})}),(0,l.jsx)("div",{className:"dateevents-solar-rect",children:(0,l.jsx)("span",{className:"dateevents-solar-rect-text",children:(null==(r=m[1])?void 0:r.value)||""})})]}),(0,l.jsxs)("div",{className:"dateevents-row-tibetan",children:[(0,l.jsx)("div",{className:"dateevents-tibetan-circle",children:(0,l.jsx)("span",{className:"dateevents-tibetan-text",children:(null==(n=m[2])?void 0:n.label)||""})}),(0,l.jsx)("div",{className:"dateevents-tibetan-rect",children:(0,l.jsx)("span",{className:"dateevents-tibetan-rect-text",children:(null==(i=m[2])?void 0:i.value)||""})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"dateevents-row-holiday1",children:(0,l.jsxs)("div",{className:"dateevents-holiday1-bar bg-custom-gray",children:[(0,l.jsxs)("svg",{className:"dateevents-holiday1-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor",strokeWidth:"2"}),(0,l.jsx)("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42",stroke:"currentColor",strokeWidth:"2"})]}),(0,l.jsxs)("span",{className:"dateevents-holiday1-text",children:[(null==(o=f[0])?void 0:o.label)||""," ",(null==(c=f[0])?void 0:c.daysLeftText)||""]})]})}),(0,l.jsx)("div",{className:"dateevents-row-holiday2",children:(0,l.jsxs)("div",{className:"dateevents-holiday2-bar bg-custom-gray",children:[(0,l.jsx)("svg",{className:"dateevents-holiday2-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:(0,l.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"currentColor",strokeWidth:"2"})}),(0,l.jsxs)("span",{className:"dateevents-holiday2-text",children:[(null==(d=f[1])?void 0:d.label)||""," ",(null==(u=f[1])?void 0:u.daysLeftText)||""]})]})}),(0,l.jsx)("div",{className:"dateevents-row-holiday3",children:(0,l.jsxs)("div",{className:"dateevents-holiday3-bar bg-custom-gray",children:[(0,l.jsx)("svg",{className:"dateevents-holiday3-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:(0,l.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",stroke:"currentColor",strokeWidth:"2"})}),(0,l.jsxs)("span",{className:"dateevents-holiday3-text",children:[(null==(h=f[2])?void 0:h.label)||""," ",(null==(x=f[2])?void 0:x.daysLeftText)||""]})]})})]})]})},d=e=>{let{header:t={title:"木蛇年五月廿九",subtitle:"Astrological Data"},rows:a=[{fixedWeekday:1,solarLunar:15,fixedDay:7,conjunction:22,effect:"孺蜜"},{fixedWeekday:2,solarLunar:10,fixedDay:7,conjunction:17,effect:"贵种"},{fixedWeekday:22,solarLunar:45,fixedDay:8,conjunction:54,effect:""},{fixedWeekday:3,solarLunar:5,fixedDay:3,conjunction:2,effect:""},{fixedWeekday:61,solarLunar:8,fixedDay:3,conjunction:11,effect:""},{fixedWeekday:248,solarLunar:459,fixedDay:459,conjunction:"",effect:""}],currentPage:s=0,onPageChange:r,totalPages:n=4}=e;return(0,l.jsxs)("div",{className:"frosted-card calendar-gradient-neo widget-card-border px-6 pt-6 pb-4 light-purple-border transparent-purple-blue-gradient text-center shadow-2xl backdrop-blur-xl card-enter hover-lift dateevents-gradient-bg",children:[r&&(0,l.jsx)("div",{className:"flex justify-center space-x-3 mb-4",children:Array.from({length:n}).map((e,t)=>(0,l.jsx)("button",{onClick:()=>r(t),className:"relative transition-all duration-300 hover:scale-110 ".concat(t===s?"w-8 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg shadow-blue-500/50":"w-2 h-2 bg-gray-500 rounded-full hover:bg-gray-400"),"aria-label":"切换到第 ".concat(t+1," 个卡片"),children:t===s&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full animate-pulse"})},t))}),(0,l.jsx)("div",{className:"flex justify-center mb-6",children:(0,l.jsx)("div",{className:"astro-tibetan-rect-centered",children:(0,l.jsx)("span",{className:"dateevents-tibetan-rect-text",children:t.title})})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-sm astro-table-compact",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-gray-500/50",children:[(0,l.jsx)("th",{className:"text-center py-2 px-1 text-gray-300 font-semibold",children:"定曜"}),(0,l.jsx)("th",{className:"text-center py-2 px-1 text-gray-300 font-semibold whitespace-nowrap",children:"太阳日月宿"}),(0,l.jsx)("th",{className:"text-center py-2 px-1 text-gray-300 font-semibold",children:"定日"}),(0,l.jsx)("th",{className:"text-center py-2 px-1 text-gray-300 font-semibold",children:"会合"}),(0,l.jsx)("th",{className:"text-center py-2 px-1 text-gray-300 font-semibold",children:"作用"})]})}),(0,l.jsx)("tbody",{children:a.map((e,t)=>(0,l.jsxs)("tr",{className:"".concat(t<a.length-1?"border-b border-gray-600/30":""," hover:bg-gray-800/20 transition-colors duration-200"),children:[(0,l.jsx)("td",{className:"py-1.5 px-1 text-gray-200 font-medium text-center",children:e.fixedWeekday}),(0,l.jsx)("td",{className:"py-1.5 px-1 text-gray-200 font-medium text-center",children:e.solarLunar}),(0,l.jsx)("td",{className:"py-1.5 px-1 text-gray-200 font-medium text-center",children:e.fixedDay}),(0,l.jsx)("td",{className:"py-1.5 px-1 text-gray-200 font-medium text-center",children:e.conjunction}),(0,l.jsx)("td",{className:"py-1.5 px-1 text-gray-200 font-medium text-center",children:e.effect})]},"".concat(t,"-").concat(e.fixedWeekday)))})]})})]})},u=e=>{let{header:t={title:"二零二五年六月廿九",subtitle:"Moon Phase"},illumination:a=.996,culminationText:n="中天 23 : 34",moonRise:i="05 : 19",moonSet:o="18 : 41",lunarDay:c,currentPage:d=1,onPageChange:u,totalPages:h=3}=e,x=(0,s.useCallback)(()=>{if(c&&c>=1&&c<=30)return c;if(void 0!==a)if(a<=.5)return Math.max(1,Math.min(15,Math.round(28*a+1)));else return Math.max(16,Math.min(30,Math.round((a-.5)*28+15)));return 15},[c,a])(),m="/moon_pic/moon_image_".concat(String(x).padStart(5,"0"),".png");return(0,l.jsxs)("div",{className:"frosted-card calendar-gradient-neo widget-card-border px-6 pt-6 pb-4 light-purple-border transparent-purple-blue-gradient text-center shadow-2xl backdrop-blur-xl card-enter hover-lift dateevents-gradient-bg relative",children:[u&&(0,l.jsx)("div",{className:"flex justify-center space-x-3 mb-4",children:Array.from({length:h}).map((e,t)=>(0,l.jsx)("button",{onClick:()=>u(t),className:"relative transition-all duration-300 hover:scale-110 ".concat(t===d?"w-2 h-2 bg-white rounded-full shadow-lg":"w-2 h-2 bg-gray-500 rounded-full hover:bg-gray-400"),"aria-label":"切换到第 ".concat(t+1," 个卡片")},t))}),(0,l.jsx)("div",{className:"flex justify-center items-center mb-8",children:(0,l.jsx)("div",{className:"astro-lunar-rect-centered",children:(0,l.jsx)("span",{className:"dateevents-lunar-rect-text",children:t.title})})}),(0,l.jsxs)("div",{className:"relative h-56 -mt-4",children:[(0,l.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,l.jsxs)("div",{className:"relative w-32 h-32",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-purple-400/20 rounded-full blur-lg"}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)(r.default,{src:m,alt:"月相图 - 农历".concat(c||"未知","日"),width:128,height:128,className:"w-full h-full object-contain"})})]})}),(0,l.jsx)("div",{className:"absolute top-8 right-0 text-right",children:(0,l.jsxs)("div",{className:"relative text-white/80 font-medium text-lg px-2",style:{fontSize:"70%"},children:[(0,l.jsx)("span",{className:"text-gray-300/80",children:"照明度"}),(0,l.jsx)("span",{className:"font-semibold ml-1",children:void 0!==a?"".concat((100*a).toFixed(1),"%"):"99.6%"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-white/30 -mx-2"})]})}),(0,l.jsx)("div",{className:"absolute bottom-14 right-4 text-right",children:(0,l.jsxs)("div",{className:"relative text-white/80 font-medium text-lg px-2",style:{fontSize:"70%"},children:[(0,l.jsx)("span",{className:"text-gray-300/80",children:"中天"}),(0,l.jsx)("span",{className:"font-semibold ml-1",children:n?n.includes(" ")?n.split(" ")[1]:n:"--:--"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-white/30 -mx-2"})]})}),(0,l.jsx)("div",{className:"absolute top-1/3 left-0 transform -translate-y-1/2",children:(0,l.jsxs)("div",{className:"relative flex items-center space-x-2 text-white/80 font-medium text-lg px-2",style:{fontSize:"70%"},children:[(0,l.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,l.jsxs)("svg",{className:"w-4 h-4 text-white/80",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,l.jsx)("rect",{x:"3",y:"5",width:"14",height:"2"}),(0,l.jsx)("rect",{x:"8",y:"8",width:"4",height:"5"}),(0,l.jsx)("path",{d:"M10 18L6 13h8L10 18z"})]})}),(0,l.jsx)("span",{children:i||"--:--"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-white/30 -mx-2"})]})}),(0,l.jsx)("div",{className:"absolute bottom-6 left-0",children:(0,l.jsxs)("div",{className:"relative flex items-center space-x-2 text-white/80 font-medium text-lg px-2",style:{fontSize:"70%"},children:[(0,l.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,l.jsxs)("svg",{className:"w-4 h-4 text-white/80",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,l.jsx)("path",{d:"M10 2L6 7h8L10 2z"}),(0,l.jsx)("rect",{x:"8",y:"7",width:"4",height:"5"}),(0,l.jsx)("rect",{x:"3",y:"13",width:"14",height:"2"})]})}),(0,l.jsx)("span",{children:o||"--:--"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-white/30 -mx-2"})]})})]})]})},h=e=>{let{label:t="狮子宫",leftTime:a="05:14",rightTime:s="19:27",currentPage:r=0,onPageChange:n,totalPages:i=4}=e;return(0,l.jsxs)("div",{className:"frosted-card calendar-gradient-neo widget-card-border px-6 pt-6 pb-4 light-purple-border transparent-purple-blue-gradient text-center shadow-2xl backdrop-blur-xl card-enter hover-lift dateevents-gradient-bg",children:[n&&(0,l.jsx)("div",{className:"flex justify-center space-x-3 mb-4",children:Array.from({length:i}).map((e,t)=>(0,l.jsx)("button",{onClick:()=>n(t),className:"relative transition-all duration-300 hover:scale-110 ".concat(t===r?"w-8 h-2 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg shadow-blue-500/50":"w-2 h-2 bg-gray-500 rounded-full hover:bg-gray-400"),"aria-label":"切换到第 ".concat(t+1," 个卡片"),children:t===r&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full animate-pulse"})},t))}),(0,l.jsx)("div",{className:"flex justify-center mb-6",children:(0,l.jsx)("div",{className:"astro-solar-rect-centered",children:(0,l.jsx)("span",{className:"dateevents-solar-rect-text",children:"2025年7月23日 周三"})})}),(0,l.jsxs)("div",{className:"relative w-full aspect-square max-w-xs mx-auto mb-6 group",children:[(0,l.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-full h-full drop-shadow-2xl",children:[(0,l.jsx)("circle",{cx:"100",cy:"100",r:"95",fill:"none",stroke:"#facc15",strokeWidth:"3",opacity:"0.8"}),(0,l.jsx)("g",{transform:"rotate(45 100 100)",children:(0,l.jsx)("circle",{cx:"100",cy:"100",r:"95",fill:"none",stroke:"#facc15",strokeWidth:"2",strokeDasharray:"6 6",opacity:"0.6"})}),(0,l.jsx)("circle",{cx:"100",cy:"100",r:"35",fill:"none",stroke:"#64748b",strokeOpacity:"0.8",strokeWidth:"2"}),(0,l.jsx)("circle",{cx:"100",cy:"100",r:"55",fill:"none",stroke:"#64748b",strokeOpacity:"0.8",strokeWidth:"2"}),(0,l.jsx)("circle",{cx:"100",cy:"100",r:"8",fill:"#f97316",filter:"drop-shadow(0 0 4px #f97316)"}),(0,l.jsx)("line",{x1:"100",y1:"92",x2:"100",y2:"108",stroke:"#f97316",strokeWidth:"3",strokeLinecap:"round",filter:"drop-shadow(0 0 2px #f97316)"}),(0,l.jsx)("circle",{cx:"100",cy:"45",r:"4",fill:"#60a5fa",filter:"drop-shadow(0 0 3px #60a5fa)"}),(0,l.jsx)("circle",{cx:"100",cy:"155",r:"4",fill:"#34d399",filter:"drop-shadow(0 0 3px #34d399)"}),(0,l.jsx)("circle",{cx:"45",cy:"100",r:"4",fill:"#f87171",filter:"drop-shadow(0 0 3px #f87171)"}),(0,l.jsx)("circle",{cx:"155",cy:"100",r:"4",fill:"#facc15",filter:"drop-shadow(0 0 3px #facc15)"}),(0,l.jsx)("line",{x1:"100",y1:"45",x2:"100",y2:"155",stroke:"#64748b",strokeOpacity:"0.4",strokeWidth:"1"}),(0,l.jsx)("line",{x1:"45",y1:"100",x2:"155",y2:"100",stroke:"#64748b",strokeOpacity:"0.4",strokeWidth:"1"})]}),(0,l.jsx)("div",{className:"absolute top-1/2 right-0 transform -translate-y-1/2 text-sm text-yellow-400 font-bold bg-gray-900/80 px-2 py-1 rounded-lg border border-yellow-400/30",children:t}),(0,l.jsx)("div",{className:"absolute -top-2 -left-2 w-2 h-2 bg-yellow-400 rounded-full opacity-60 animate-pulse"}),(0,l.jsx)("div",{className:"absolute -top-1 -right-3 w-1 h-1 bg-orange-400 rounded-full opacity-80 animate-pulse delay-1000"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center px-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 group",children:[(0,l.jsx)("div",{className:"w-4 h-4 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300 relative",children:(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 to-transparent rounded-full"})}),(0,l.jsx)("span",{className:"text-sm text-white font-semibold",children:a})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3 group",children:[(0,l.jsx)("span",{className:"text-sm text-white font-semibold",children:s}),(0,l.jsx)("div",{className:"w-4 h-4 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300 relative",children:(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 to-transparent rounded-full"})})]})]})]})};var x=a(1912),m=a(6812);async function f(e){let t={date:null==e?void 0:e.date,cityName:(null==e?void 0:e.cityName)||"上海市"},a=await fetch("".concat("/api","/calendar/date-comprehensive-data"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("HTTP ".concat(a.status));let l=await a.json();if(!l.success){var s;throw Error((null==(s=l.error)?void 0:s.message)||"请求失败")}return l.data}function g(){var e,t,a,r,n,i,g,p,v,b,y,j,N,w,k,S,M,C,T,D,L,P,E,W,A,z,F,O;let[_,H]=(0,s.useState)(0),[I,Y]=(0,s.useState)("上海市"),[B,R]=(0,s.useState)(!1),[U,J]=(0,s.useState)(1970),[X,q]=(0,s.useState)(0),[G,K]=(0,s.useState)(1),[Q,V]=(0,s.useState)(!1),[Z,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(null),[ea,el]=(0,s.useState)(null),[es,er]=(0,s.useState)([]),[en,ei]=(0,s.useState)({solar:{status:"idle"},lunar:{status:"idle"},tibetan:{status:"idle"}}),eo=(0,s.useRef)(0);(0,s.useEffect)(()=>{er([...Array(160)].map(()=>({left:100*Math.random(),top:100*Math.random(),opacity:.95})))},[]);let ec=(0,s.useMemo)(()=>Q?new Date(U,X,1).toLocaleDateString("zh-CN",{year:"numeric",month:"long"}):"",[Q,U,X]),ed=(0,s.useMemo)(()=>new Date(U,X+1,0).getDate(),[U,X]),eu=(0,s.useMemo)(()=>new Date(U,X,1).getDay(),[U,X]),eh=(0,s.useMemo)(()=>{let e=String(X+1).padStart(2,"0"),t=String(G).padStart(2,"0");return"".concat(U,"-").concat(e,"-").concat(t)},[U,X,G]),ex=e=>{let[t,a,l]=e.split("-").map(e=>Number(e));if(!Number.isFinite(t)||!Number.isFinite(a)||!Number.isFinite(l))return;let s=++eo.current;ei({solar:{status:"loading"},lunar:{status:"loading"},tibetan:{status:"loading"}});let r=new AbortController,n=setTimeout(()=>r.abort(),4500),i=async e=>{let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({year:t,month:a,day:l}),signal:r.signal});if(!s.ok)throw Error("HTTP ".concat(s.status));var n=await s.json();if(!n||"object"!=typeof n||"string"!=typeof n.name||"string"!=typeof n.date)return null;let i=Number(n.daysLeft);if(!Number.isFinite(i))return null;let o="string"==typeof n.isoDate?n.isoDate:void 0;return{name:n.name,date:n.date,isoDate:o,daysLeft:Math.max(0,Math.floor(i))}};Promise.allSettled([i("/api/lunar-festival"),i("/api/lunar-holiday"),i("/api/tibetan-holiday")]).then(e=>{let[t,a,l]=e;if(eo.current!==s)return;let r=e=>"rejected"===e.status?{status:"error",message:e.reason instanceof Error?e.reason.message:void 0}:e.value&&e.value.name.trim()?{status:"success",data:e.value}:{status:"empty"};ei({solar:r(t),lunar:r(a),tibetan:r(l)})}).catch(e=>{eo.current===s&&ei({solar:{status:"error",message:e instanceof Error?e.message:void 0},lunar:{status:"error",message:e instanceof Error?e.message:void 0},tibetan:{status:"error",message:e instanceof Error?e.message:void 0}})}).finally(()=>{clearTimeout(n)})},em=async(e,t)=>{$(!0),et(null);try{let a=await f({date:e,cityName:t});el(a||null)}catch(e){et(e instanceof Error?e.message:"加载失败")}finally{$(!1)}};(0,s.useEffect)(()=>{let e=new Date,t=e.getFullYear(),a=e.getMonth(),l=e.getDate();J(t),q(a),K(l),V(!0);let s=String(a+1).padStart(2,"0"),r=String(l).padStart(2,"0"),n="".concat(t,"-").concat(s,"-").concat(r);em(n,I),ex(n)},[]);let ef=(e,t)=>{let a=en[e];if("loading"===a.status)return{label:"节日预测加载中...",colorClass:"bg-gray-500",daysLeftText:""};if("error"===a.status)return{label:"节日预测暂不可用",colorClass:"bg-gray-500",daysLeftText:""};if("empty"===a.status)return{label:"暂无节日",colorClass:"bg-gray-500",daysLeftText:""};let l="success"===a.status?a.data:t;return(null==l?void 0:l.name)?{label:"".concat(l.name," ").concat(l.date),colorClass:"bg-gray-500",daysLeftText:function(e){if("number"!=typeof e||!Number.isFinite(e))return"";let t=Math.max(0,Math.floor(e));return 0===t?"今天":"还剩".concat(t,"天")}(l.daysLeft)}:{label:"暂无节日",colorClass:"bg-gray-500",daysLeftText:""}},eg=[(0,l.jsx)(c,{currentPage:_,onPageChange:H,totalPages:4,header:{title:(null==ea||null==(t=ea.dateEvents)||null==(e=t.lunarInfo)?void 0:e.fullDate)||"",subtitle:(null==ea||null==(r=ea.dateEvents)||null==(a=r.solarInfo)?void 0:a.fullDate)||""},counters:[{label:"农",value:(null==ea||null==(i=ea.dateEvents)||null==(n=i.lunarInfo)?void 0:n.fullDate)||"",colorClass:"bg-blue-400"},{label:"公",value:(null==ea||null==(p=ea.dateEvents)||null==(g=p.solarInfo)?void 0:g.fullDate)||"",colorClass:"bg-purple-500"},{label:"藏",value:(null==ea||null==(b=ea.dateEvents)||null==(v=b.tibetanInfo)?void 0:v.fullDate)||"",colorClass:"bg-pink-400"}],events:[ef("solar",null==ea||null==(j=ea.dateEvents)||null==(y=j.events)?void 0:y.solarHoliday),ef("lunar",null==ea||null==(w=ea.dateEvents)||null==(N=w.events)?void 0:N.lunarHoliday),ef("tibetan",null==ea||null==(S=ea.dateEvents)||null==(k=S.events)?void 0:k.tibetanHoliday)]},"date"),(0,l.jsx)(d,{currentPage:_,onPageChange:H,totalPages:4,header:{title:(null==ea||null==(M=ea.astrologicalTable)?void 0:M.tibetanDate)||"",subtitle:"Astrological Data"},rows:(null==ea||null==(C=ea.astrologicalTable)?void 0:C.tableData)||[]},"astro"),(0,l.jsx)(u,{currentPage:_,onPageChange:H,totalPages:4,header:{title:(null==ea||null==(T=ea.moonPhase)?void 0:T.lunarDate)||"",subtitle:"Moon Phase"},timeLabel:(null==ea||null==(D=ea.moonPhase)?void 0:D.observationTime)||"",illumination:null==ea||null==(L=ea.moonPhase)?void 0:L.illumination,culminationText:"中天 ".concat((null==ea||null==(P=ea.moonPhase)?void 0:P.culminationTime)||""),moonRise:(null==ea||null==(E=ea.moonPhase)?void 0:E.moonriseTime)||"",moonSet:(null==ea||null==(W=ea.moonPhase)?void 0:W.moonsetTime)||"",lunarDay:null==ea||null==(A=ea.moonPhase)?void 0:A.lunar_day},"moon"),(0,l.jsx)(h,{currentPage:_,onPageChange:H,totalPages:4,label:(null==ea||null==(z=ea.planetaryChart)?void 0:z.constellation)||"",leftTime:(null==ea||null==(F=ea.planetaryChart)?void 0:F.riseTime)||"",rightTime:(null==ea||null==(O=ea.planetaryChart)?void 0:O.setTime)||""},"planet")];return(0,l.jsxs)("div",{className:"text-white min-h-screen flex flex-col starfield-bg",children:[(0,l.jsx)("div",{className:"fixed inset-0 starfield-bg",children:(0,l.jsx)("div",{className:"absolute inset-0 opacity-80",children:es.map((e,t)=>{let a=t%11==0?"star--lg":t%3==0?"star--md":"star--sm";return(0,l.jsx)("div",{className:"absolute rounded-full star ".concat(a," ").concat(t%7==0?"star--warm":t%5==0?"star--cold":"star--neutral"),style:{left:"".concat(e.left,"%"),top:"".concat(e.top,"%"),opacity:e.opacity}},t)})})}),(0,l.jsx)("div",{className:"relative z-10 min-h-screen flex flex-col pb-20",children:(0,l.jsxs)("div",{className:"flex flex-col p-4",children:[(0,l.jsx)("div",{className:"flex justify-center items-center py-2 relative mt-8",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1 bg-gray-800/50 rounded-lg hover:bg-gray-700/70 transition-colors cursor-pointer",onClick:()=>R(e=>!e),children:[(0,l.jsx)("span",{className:"text-lg font-medium",children:I}),(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"text-gray-300","aria-hidden":"true",children:(0,l.jsx)("path",{d:"M4 6l4 4 4-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),B&&(0,l.jsx)("div",{className:"absolute left-0 right-0 mt-2 w-48 bg-gray-900/90 border border-gray-700 rounded-lg shadow-lg z-20 max-h-60 overflow-y-auto",children:["上海市","北京市","广州市","深圳市","杭州市","南京市","成都市","武汉市","西安市","重庆市","天津市","苏州市"].map(e=>(0,l.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-700/70 ".concat(e===I?"text-white bg-gray-700/50":"text-gray-300"),onClick:()=>{Y(e),R(!1),em(eh,e)},children:e},e))})]})}),(0,l.jsx)("div",{className:"flex items-center justify-center mt-2",children:(0,l.jsx)("div",{className:"w-[90%] sm:w-[82%] md:w-[70%] max-w-[520px]",children:Q?(0,l.jsx)(o,{currentMonth:ec,containerClassName:"rounded-20 selected-26",startOffset:eu,daysInMonth:ed,initialSelected:G,onPrevMonth:()=>{let e=new Date(U,X,1);e.setMonth(e.getMonth()-1),J(e.getFullYear()),q(e.getMonth());let t=Math.min(G,new Date(e.getFullYear(),e.getMonth()+1,0).getDate());K(t);let a=String(e.getMonth()+1).padStart(2,"0"),l=String(t).padStart(2,"0"),s="".concat(e.getFullYear(),"-").concat(a,"-").concat(l);em(s,I),ex(s)},onNextMonth:()=>{let e=new Date(U,X,1);e.setMonth(e.getMonth()+1),J(e.getFullYear()),q(e.getMonth());let t=Math.min(G,new Date(e.getFullYear(),e.getMonth()+1,0).getDate());K(t);let a=String(e.getMonth()+1).padStart(2,"0"),l=String(t).padStart(2,"0"),s="".concat(e.getFullYear(),"-").concat(a,"-").concat(l);em(s,I),ex(s)},onSelectDay:e=>{K(e);let t=String(X+1).padStart(2,"0"),a=String(e).padStart(2,"0"),l="".concat(U,"-").concat(t,"-").concat(a);em(l,I),ex(l)}}):(0,l.jsx)("div",{className:"text-center text-gray-300 py-10",children:"加载中..."})})}),(0,l.jsx)("div",{className:"flex items-center justify-center mt-6 mb-6",children:(0,l.jsx)("div",{className:"w-[90%] sm:w-[82%] md:w-[70%] max-w-[520px]",children:Z?(0,l.jsx)("div",{className:"text-center text-gray-300 py-12",children:"加载中..."}):ee?(0,l.jsx)("div",{className:"text-center text-red-400 py-12",children:ee}):(0,l.jsx)(m.A,{items:eg,currentIndex:_,onChange:H})})})]})}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-30",children:(0,l.jsx)(x.A,{})})]})}},6812:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(3365),s=a(1521);let r=e=>{let{items:t,currentIndex:a,onChange:r,swipeThreshold:n=50}=e,i=s.useRef(0),o=s.useRef(0);return(0,l.jsx)("div",{className:"w-full transition-all duration-500 ease-in-out",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"transform transition-all duration-500 ease-out hover:scale-[1.02] hover:shadow-2xl",onTouchStart:e=>{o.current=0,i.current=e.targetTouches[0].clientX},onTouchMove:e=>{o.current=e.targetTouches[0].clientX},onTouchEnd:()=>{let e=i.current,l=o.current;if(!e||!l)return;let s=e-l;s>n&&r((a+1)%t.length),s<-n&&r((a-1+t.length)%t.length)},children:t[a]}),(0,l.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-t from-transparent via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]})})}},7839:(e,t,a)=>{Promise.resolve().then(a.bind(a,2591))}},e=>{e.O(0,[289,347,508,358],()=>e(e.s=7839)),_N_E=e.O()}]);