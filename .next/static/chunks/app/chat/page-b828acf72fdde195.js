(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{1645:(e,t,s)=>{Promise.resolve().then(s.bind(s,2904))},1912:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(3365),i=s(5826),n=s(9534),a=s.n(n),l=s(627),c=s(1521);function o(){let e=(0,l.usePathname)(),t=function(){let[e,t]=(0,c.useState)(()=>window.innerWidth);return(0,c.useEffect)(()=>{function e(){t(window.innerWidth)}return t(window.innerWidth),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}()/390,s=18.5*t,n=51*t;return(0,r.jsx)("div",{className:"bg-gray-900/80 glass-effect border-t border-gray-700",style:{height:n},children:(0,r.jsx)("div",{className:"flex justify-around items-center max-w-md mx-auto h-full",children:[{href:"/cal",icon:"/cond/cal.png"},{href:"/earth",icon:"/cond/globe.png"},{href:"/chat",icon:"/cond/chat.png"},{href:"/docs",icon:"/cond/book.png"},{href:"/user",icon:"/cond/user.png"}].map((l,c)=>{let o=e===l.href;return 2===c?(0,r.jsx)(a(),{href:l.href,className:"flex items-center justify-center rounded-full transition-colors shadow-lg \n    bg-[#0051feff]",style:{padding:10*t,transform:"translateY(-".concat(.2*n,"px)")},children:(0,r.jsx)(i.default,{src:l.icon,alt:"",width:1.2*s,height:1.2*s,style:{width:"".concat(1.2*s,"px"),height:"".concat(1.2*s,"px")}})},l.href):(0,r.jsx)(a(),{href:l.href,className:"flex items-center justify-center rounded-lg transition-colors\n                ".concat(o?"bg-gray-700":"hover:bg-gray-700"),style:{padding:6*t},children:(0,r.jsx)(i.default,{src:l.icon,alt:"",width:s,height:s,style:{width:"".concat(s,"px"),height:"".concat(s,"px")}})},l.href)})})})}},2904:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(3365),i=s(1521),n=s(9534),a=s.n(n),l=s(1912);async function c(e){var t,s;let r=await fetch("".concat("/api","/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(!r.ok)throw Error((null==(t=(await r.json().catch(()=>({}))).error)?void 0:t.message)||"HTTP error! status: ".concat(r.status));let i=await r.json();if(!i.success)throw Error((null==(s=i.error)?void 0:s.message)||"请求失败");return i.data}function o(){let[e,t]=(0,i.useState)([{id:1,text:"你好！我是你的天文助手，有什么可以帮助你的吗？",isUser:!1,time:"14:30"}]),[s,n]=(0,i.useState)(""),o=async()=>{if(s.trim()){let r={id:e.length+1,text:s,isUser:!0,time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},i=[...e,r];t(i),n("");try{let e=await c(s);if(e){let s={id:i.length+1,text:e.reply,isUser:!1,time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})};t(e=>[...e,s])}}catch(s){console.error("Error fetching AI response:",s);let e={id:i.length+1,text:"抱歉，我这里出了点问题，暂时无法回复。",isUser:!1,time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})};t(t=>[...t,e])}}};return(0,r.jsx)("div",{className:"bg-black text-white min-h-screen flex flex-col",children:(0,r.jsxs)("div",{className:"relative z-10 flex flex-col h-screen bg-black",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-white/10 glass-effect",children:[(0,r.jsxs)(a(),{href:"/",className:"flex items-center space-x-2 text-blue-400 hover:text-blue-300 transition-colors",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:"返回"})]}),(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"天文助手"}),(0,r.jsx)("div",{className:"w-12"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-end gap-2 ".concat(e.isUser?"justify-end":"justify-start"),children:[!e.isUser&&(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-600 to-blue-500 flex-shrink-0"}),(0,r.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ".concat(e.isUser?"bg-blue-600/80 text-white rounded-br-lg":"bg-gray-700/70 text-white rounded-bl-lg"," glass-effect"),children:[(0,r.jsx)("p",{className:"text-base",children:e.text}),(0,r.jsx)("p",{className:"text-xs mt-2 text-right ".concat(e.isUser?"text-blue-100/70":"text-gray-400/70"),children:e.time})]}),e.isUser&&(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex-shrink-0"})]},e.id))}),(0,r.jsx)("div",{className:"p-4 border-t border-white/10 glass-effect",children:(0,r.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,r.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&o(),placeholder:"输入你的问题...",className:"flex-1 bg-gray-800/80 text-white px-4 py-3 rounded-xl border border-gray-600/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all"}),(0,r.jsx)("button",{onClick:o,className:"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors glow-effect disabled:opacity-50",disabled:!s.trim(),children:"发送"})]})}),(0,r.jsx)(l.A,{})]})})}}},e=>{e.O(0,[289,347,508,358],()=>e(e.s=1645)),_N_E=e.O()}]);