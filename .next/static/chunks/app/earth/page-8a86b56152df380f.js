(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{1912:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(3365),n=s(5826),r=s(9534),l=s.n(r),i=s(627),c=s(1521);function o(){let e=(0,i.usePathname)(),t=function(){let[e,t]=(0,c.useState)(()=>390);return(0,c.useEffect)(()=>{function e(){t(window.innerWidth)}return t(window.innerWidth),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}()/390,s=18.5*t,r=51*t;return(0,a.jsx)("div",{className:"bg-gray-900/80 glass-effect border-t border-gray-700",style:{height:r},children:(0,a.jsx)("div",{className:"flex justify-around items-center max-w-md mx-auto h-full",children:[{href:"/cal",icon:"/cond/cal.png"},{href:"/earth",icon:"/cond/globe.png"},{href:"/chat",icon:"/cond/chat.png"},{href:"/docs",icon:"/cond/book.png"},{href:"/user",icon:"/cond/user.png"}].map((i,c)=>{let o=e===i.href;return 2===c?(0,a.jsx)(l(),{href:i.href,className:"flex items-center justify-center rounded-full transition-colors shadow-lg \n    bg-[#0051feff]",style:{padding:10*t,transform:"translateY(-".concat(.2*r,"px)")},children:(0,a.jsx)(n.default,{src:i.icon,alt:"",width:1.2*s,height:1.2*s,style:{width:"".concat(1.2*s,"px"),height:"".concat(1.2*s,"px")}})},i.href):(0,a.jsx)(l(),{href:i.href,className:"flex items-center justify-center rounded-lg transition-colors\n                ".concat(o?"bg-gray-700":"hover:bg-gray-700"),style:{padding:6*t},children:(0,a.jsx)(n.default,{src:i.icon,alt:"",width:s,height:s,style:{width:"".concat(s,"px"),height:"".concat(s,"px")}})},i.href)})})})}},3560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(3365),n=s(1521),r=s(627);function l(){return(0,a.jsx)("div",{style:{width:"100%",height:"100%",minHeight:"520px",overflow:"hidden"},children:(0,a.jsx)("iframe",{src:"/js/moon.html",title:"qixingguiji",style:{width:"100%",height:"100%",border:"none"}})})}var i=s(8660),c=s(5826);let o={太阳:{rise:"05 : 11 : 52",transit:"12 : 00 : 21",set:"18 : 40 : 12",declination:"17.582549"},月球:{rise:"04 : 05 : 23",transit:"11 : 12 : 48",set:"17 : 54 : 09",declination:"19.482000"},水星:{rise:"05 : 45 : 13",transit:"12 : 09 : 42",set:"18 : 33 : 21",declination:"8.923451"},金星:{rise:"06 : 15 : 01",transit:"12 : 33 : 12",set:"18 : 51 : 22",declination:"-2.145325"},火星:{rise:"02 : 12 : 41",transit:"09 : 21 : 09",set:"16 : 29 : 37",declination:"4.231123"},木星:{rise:"19 : 22 : 15",transit:"01 : 55 : 34",set:"08 : 28 : 53",declination:"-15.678901"},土星:{rise:"22 : 11 : 34",transit:"04 : 35 : 01",set:"10 : 58 : 28",declination:"-10.234789"}};function d(){let[e,t]=(0,n.useState)({latitude:"30.67",longitude:"104.06",date:"",time:"",altitude:"500"}),[s,r]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),[h,u]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=new Date,s=e.toISOString().split("T")[0],a=e.toTimeString().slice(0,5);t(e=>({...e,date:s,time:a})),r(o)},[]);let x=e=>{let{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))},m=async t=>{var s,a,n,l,c,o;t.preventDefault(),d(!0),u(""),r(null);try{let t=await i.A.post("/api/planets",{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),date:e.date,time:e.time});if(t.data&&t.data.success){let e=t.data.data,n={};for(let t of Object.keys(e)){let r=e[t];n[t]={rise:r.rise||"-- : -- : --",transit:r.transit||"-- : -- : --",set:r.set||"-- : -- : --",declination:(null==(a=r.declination)||null==(s=a.toFixed)?void 0:s.call(a,6))||"0.000000"}}r(n)}else throw Error((null==(l=t.data)||null==(n=l.error)?void 0:n.message)||"获取行星数据失败")}catch(t){let e="获取行星数据失败，请稍后再试。";i.A.isAxiosError(t)&&t.response?e=(null==(o=t.response.data)||null==(c=o.error)?void 0:c.message)||t.message:t instanceof Error&&(e=t.message),u(e)}finally{d(!1)}};return(0,a.jsxs)("div",{className:"relative min-h-screen bg-black text-white flex flex-col items-center justify-start pt-4 pb-2 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[url('/stars-bg.png')] bg-cover bg-center opacity-40 pointer-events-none"}),(0,a.jsx)("form",{onSubmit:m,className:"relative z-10 mt-2 w-[92%] max-w-2xl backdrop-blur-md bg-white/10 border border-white/20 rounded-2xl px-0 py-4 shadow-[0_0_20px_rgba(255,255,255,0.05)] text-sm",children:(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)("div",{className:"w-4/5 space-y-1 px-3",children:[["纬度 Latitude","latitude"],["经度 Longitude","longitude"],["日期 Date","date"],["时间 Time(HH:MM)","time"],["海拔 Altitude","altitude"]].map(t=>{let[s,n]=t;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs mb-1 opacity-80",children:s}),(0,a.jsx)("input",{type:"date"===n?"date":"time"===n?"time":"text",name:n,value:e[n]||"",onChange:x,className:"w-full bg-white/10 border border-white/20 rounded-full px-2 py-1.5 text-left text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-400 text-sm",required:"altitude"!==n})]},n)})}),(0,a.jsx)("div",{className:"w-1/5 flex justify-center",children:(0,a.jsx)("button",{type:"submit",disabled:l,className:"p-0 bg-transparent border-none",children:(0,a.jsx)(c.default,{src:"/pho/箭头.png",alt:l?"计算中...":"开始计算",width:80,height:80,className:"w-full h-auto"})})})]})}),(0,a.jsx)("div",{className:"relative z-10 my-2 w-[92%] max-w-md border-t border-white/20"}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2 text-center mb-2",children:["行星","升起","中天","落下","赤纬角"].map(e=>(0,a.jsx)("div",{className:"bg-[rgb(90,89,122)] text-white text-xs py-1 px-3 rounded-full cursor-default select-none",children:e},e))}),s&&(0,a.jsx)("div",{className:"p-3 text-sm",children:(0,a.jsx)("div",{className:"space-y-0.5 text-xs text-gray-100",children:Object.entries(s).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-0.5 text-center py-0.5 rounded hover:bg-white/5 transition",children:[(0,a.jsx)("span",{className:"whitespace-nowrap",children:t}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:s.rise}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:s.transit}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:s.set}),(0,a.jsxs)("span",{className:"whitespace-nowrap",children:[s.declination,"\xb0"]})]},t)})})}),h&&(0,a.jsx)("div",{className:"z-10 mt-2 text-red-400 bg-red-900/30 px-3 py-1.5 rounded-lg text-sm",children:h})]})}let h=()=>(0,a.jsx)("div",{style:{width:"100%",height:"100vh",overflow:"hidden"},children:(0,a.jsx)("iframe",{src:"/js/十二宫图.html",title:"十二宫图",style:{width:"100%",height:"100%",border:"none"}})});function u(){let[e,t]=(0,n.useState)(2025),[s,r]=(0,n.useState)(""),[l,i]=(0,n.useState)({tg:18,dz:195}),[o,d]=(0,n.useState)(!1),h=(0,n.useRef)(null),u=(0,n.useMemo)(()=>{let e=["铁","铁","水","水","木","木","火","火","土","土"],t=["虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪","鼠","牛"],s=[];for(let a=0;a<60;a++)s.push(e[(a-6+10)%10]+t[(a-2+12)%12]);return s},[]),x=(0,n.useMemo)(()=>Array.from({length:201},(e,t)=>1925+t),[2025]),m=(0,n.useCallback)(e=>{let t=(e-2025)%60;i({dz:600+-(30*t),tg:306+-(36*t)}),r("".concat(e," 年是 【").concat(u[(e+56+60)%60],"】年"))},[u]);return(0,n.useEffect)(()=>{m(e)},[e,m]),(0,n.useEffect)(()=>{if(o&&h.current){let t=40*x.indexOf(e);setTimeout(()=>{h.current.scrollTo({top:t>0?t:0,behavior:"auto"})},30)}},[o,e,x]),(0,n.useEffect)(()=>{let e=e=>{e.target.closest(".year-selector")||d(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,a.jsxs)("div",{className:"bg-black text-white min-h-screen flex flex-col items-center pt-6",children:[(0,a.jsx)("style",{children:"\n                @keyframes fadeInUp {\n                    from { opacity: 0; transform: translateY(8px); }\n                    to { opacity: 1; transform: translateY(0); }\n                }\n                .animate-fadeInUp { animation: fadeInUp 200ms ease-out; }\n                .no-scrollbar::-webkit-scrollbar { width: 6px; }\n                .no-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 8px; }\n            "}),(0,a.jsxs)("div",{className:"relative mt-4 year-selector",children:[(0,a.jsxs)("button",{onClick:()=>d(e=>!e),className:"relative z-10 px-6 py-3 text-xl font-semibold rounded-xl transition-all ".concat(o?"opacity-0 pointer-events-none":"opacity-100"),children:[e,(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"inline-block ml-2 text-gray-300 transition-transform duration-300 ".concat(o?"rotate-180":""),children:(0,a.jsx)("path",{d:"M4 6l4 4 4-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),o&&(0,a.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 p-[2px] rounded-2xl bg-white/40 border border-white/60 shadow-[0_0_10px_rgba(255,255,255,0.4)] animate-fadeInUp z-20",children:(0,a.jsx)("div",{ref:h,className:"w-28 h-[200px] rounded-2xl backdrop-blur-md    bg-white/10 border border-gray-600/60 shadow-inner    text-center overflow-y-auto no-scrollbar",children:x.map(s=>{let n=s===e;return(0,a.jsx)("button",{onClick:()=>{t(s),m(s),d(!1)},className:"block w-full h-[40px] text-lg transition-all duration-200 \n                                            ".concat(n?"text-blue-400 scale-110":"text-gray-200 scale-105"),children:s},s)})})})]}),(0,a.jsxs)("div",{className:"relative mt-8 w-80 h-80",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full",style:{transform:"rotate(".concat(l.dz,"deg)"),transition:"transform 1s ease-out"},children:(0,a.jsx)(c.default,{src:"/pho/地支.png",alt:"地支盘",width:320,height:320,className:"w-full h-full select-none pointer-events-none"})}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full",style:{transform:"rotate(".concat(l.tg,"deg)"),transition:"transform 1s ease-out"},children:(0,a.jsx)(c.default,{src:"/pho/天干.png",alt:"天干盘",width:320,height:320,className:"w-full h-full select-none pointer-events-none"})}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full",children:(0,a.jsx)(c.default,{src:"/pho/指针.png",alt:"指针",width:320,height:320,className:"w-full h-full select-none pointer-events-none"})})]}),(0,a.jsx)("div",{className:"mt-8 mb-4 text-lg h-[30px] text-center w-full",children:s})]})}var x=s(6812),m=s(9534),f=s.n(m);function p(e){let{currentPage:t}=e,s=(0,r.usePathname)(),n=s.includes("zodiac")?"十二宫":s.includes("seven-stars")?"七星轨迹":s.includes("tibetan-cycle")?"藏历绕迥纪年":t||"十二宫";return(0,a.jsx)("div",{className:"flex justify-center space-x-10 p-6 whitespace-nowrap",children:[{name:"十二宫图",path:"/earth?tab=zodiac"},{name:"七星轨迹",path:"/earth?tab=seven-stars"},{name:"藏历绕迥纪年",path:"/earth?tab=tibetan-cycle"}].map(e=>(0,a.jsx)(f(),{href:e.path,className:"px-3 py-1 rounded-md text-sm transition-all duration-300 ".concat(n===e.name?"bg-blue-600 text-white shadow-md":"bg-gray-700 text-white hover:bg-gray-600"),children:e.name},e.name))})}var g=s(1912);function b(){let e=(0,r.useSearchParams)(),t=(0,r.useRouter)(),s=e.get("tab"),i=(0,n.useCallback)(()=>"seven-stars"===s?1:2*("tibetan-cycle"===s),[s]),[c,o]=(0,n.useState)(i),[m,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{o(i())},[i]);let b=[(0,a.jsx)(h,{},"zodiac"),m?(0,a.jsx)(d,{},"seven-data"):(0,a.jsx)(l,{},"seven-stars"),(0,a.jsx)(u,{},"tibetan-cycle")];return(0,a.jsxs)("div",{className:"bg-black text-white min-h-screen flex flex-col",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black"}),(0,a.jsx)("div",{className:"relative z-10 flex flex-col h-screen",children:(0,a.jsxs)("div",{className:"flex-1 flex flex-col p-4",children:[(0,a.jsx)("div",{className:"mb-4 text-sm",children:(0,a.jsx)(p,{currentPage:"seven-stars"===s?"七星轨迹":"tibetan-cycle"===s?"藏历绕迥纪年":"十二宫图"})}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center p-2 sm:p-4",children:(0,a.jsx)(x.A,{items:b,currentIndex:c,onChange:e=>{o(e),0===e&&t.push("/earth?tab=zodiac"),1===e&&t.push("/earth?tab=seven-stars"),2===e&&t.push("/earth?tab=tibetan-cycle")}})}),1===c&&(0,a.jsx)("button",{onClick:()=>{f(e=>!e)},className:"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-full shadow-lg transition duration-300 hover:scale-105",children:m?"*v*":"*_*"})]})}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-30",children:(0,a.jsx)(g.A,{})})]})}function v(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(b,{})})}},6812:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(3365),n=s(1521);let r=e=>{let{items:t,currentIndex:s,onChange:r,swipeThreshold:l=50}=e,i=n.useRef(0),c=n.useRef(0);return(0,a.jsx)("div",{className:"w-full transition-all duration-500 ease-in-out",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"transform transition-all duration-500 ease-out hover:scale-[1.02] hover:shadow-2xl",onTouchStart:e=>{c.current=0,i.current=e.targetTouches[0].clientX},onTouchMove:e=>{c.current=e.targetTouches[0].clientX},onTouchEnd:()=>{let e=i.current,a=c.current;if(!e||!a)return;let n=e-a;n>l&&r((s+1)%t.length),n<-l&&r((s-1+t.length)%t.length)},children:t[s]}),(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-t from-transparent via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]})})}},7295:(e,t,s)=>{Promise.resolve().then(s.bind(s,3560))}},e=>{e.O(0,[289,660,347,508,358],()=>e(e.s=7295)),_N_E=e.O()}]);