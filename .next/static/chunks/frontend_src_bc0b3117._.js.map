{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/seven-stars/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { CSS2DRenderer } from \"three/examples/jsm/renderers/CSS2DRenderer\";\r\n\r\ntype BodyId = \"sun\" | \"moon\" | \"mercury\" | \"venus\" | \"mars\" | \"jupiter\" | \"saturn\";\r\n\r\ntype BodyConfig = {\r\n  id: BodyId;\r\n  label: string;\r\n  color: number;\r\n};\r\n\r\nconst BODIES: BodyConfig[] = [\r\n  { id: \"sun\", label: \"太阳\", color: 0xffff00 },\r\n  { id: \"moon\", label: \"月亮\", color: 0xc0c0c0 },\r\n  { id: \"mercury\", label: \"水星\", color: 0x498bff },\r\n  { id: \"venus\", label: \"金星\", color: 0xcec2a8 },\r\n  { id: \"mars\", label: \"火星\", color: 0xff5153 },\r\n  { id: \"jupiter\", label: \"木星\", color: 0x60b633 },\r\n  { id: \"saturn\", label: \"土星\", color: 0xf4d727 }\r\n];\r\n\r\nconst DEFAULT_SELECTION: Record<BodyId, boolean> = {\r\n  sun: true,\r\n  moon: true,\r\n  mercury: false,\r\n  venus: false,\r\n  mars: false,\r\n  jupiter: false,\r\n  saturn: false\r\n};\r\n\r\nfunction parseDeclination(input: unknown): number | null {\r\n  if (typeof input === \"number\" && Number.isFinite(input)) return input;\r\n  if (typeof input !== \"string\") return null;\r\n  const trimmed = input.trim();\r\n  if (!trimmed) return null;\r\n  const match = trimmed.match(/[-+]?\\d+(\\.\\d+)?/);\r\n  if (!match) return null;\r\n  const value = Number(match[0]);\r\n  return Number.isFinite(value) ? value : null;\r\n}\r\n\r\nfunction isAllSelected(selection: Record<BodyId, boolean>): boolean {\r\n  return BODIES.every((b) => selection[b.id]);\r\n}\r\n\r\nfunction toTodayDateString(): string {\r\n  const now = new Date();\r\n  const y = now.getFullYear();\r\n  const m = String(now.getMonth() + 1).padStart(2, \"0\");\r\n  const d = String(now.getDate()).padStart(2, \"0\");\r\n  return `${y}-${m}-${d}`;\r\n}\r\n\r\nfunction toNowTimeString(): string {\r\n  const now = new Date();\r\n  const h = String(now.getHours()).padStart(2, \"0\");\r\n  const m = String(now.getMinutes()).padStart(2, \"0\");\r\n  return `${h}:${m}`;\r\n}\r\n\r\ntype SunMoonApiResponse = {\r\n  sunrise?: string;\r\n  sunset?: string;\r\n  moonrise?: string;\r\n  moonset?: string;\r\n  sun_declination?: unknown;\r\n  moon_declination?: unknown;\r\n};\r\n\r\ntype PlanetsApiResponse = Record<string, { declination?: unknown }>;\r\n\r\nexport default function SevenStars() {\r\n  return (\r\n    <div style={{ width: \"100%\", height: \"100%\", minHeight: \"520px\", overflow: \"hidden\" }}>\r\n      <iframe\r\n        src=\"/js/moon.html\"\r\n        title=\"qixingguiji\"\r\n        style={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          border: \"none\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function SevenStarsNew() {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const sceneRef = useRef<THREE.Scene | null>(null);\r\n  const cameraRef = useRef<THREE.PerspectiveCamera | null>(null);\r\n  const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n  const labelRendererRef = useRef<CSS2DRenderer | null>(null);\r\n  const controlsRef = useRef<OrbitControls | null>(null);\r\n  const animationIdRef = useRef<number | null>(null);\r\n\r\n  const dynamicObjectsRef = useRef<THREE.Object3D[]>([]);\r\n\r\n  const [latitude, setLatitude] = useState(\"31.23\");\r\n  const [longitude, setLongitude] = useState(\"121.47\");\r\n  const [date, setDate] = useState(toTodayDateString);\r\n  const [time, setTime] = useState(toNowTimeString);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [selection, setSelection] = useState<Record<BodyId, boolean>>(DEFAULT_SELECTION);\r\n  const selectionRef = useRef(selection);\r\n  const [info, setInfo] = useState<{ sunrise?: string; sunset?: string; moonrise?: string; moonset?: string } | null>(null);\r\n  const queryRef = useRef({ latitude, longitude, date, time });\r\n\r\n  useEffect(() => {\r\n    selectionRef.current = selection;\r\n  }, [selection]);\r\n\r\n  useEffect(() => {\r\n    queryRef.current = { latitude, longitude, date, time };\r\n  }, [date, latitude, longitude, time]);\r\n\r\n  const setBodyVisible = useCallback((body: BodyId, visible: boolean) => {\r\n    for (const obj of dynamicObjectsRef.current) {\r\n      const type = (obj.userData as { type?: unknown } | undefined)?.type;\r\n      if (type === body) obj.visible = visible;\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    for (const body of BODIES) {\r\n      setBodyVisible(body.id, selection[body.id]);\r\n    }\r\n  }, [selection, setBodyVisible]);\r\n\r\n  const disposeObject = (obj: THREE.Object3D) => {\r\n    if (obj instanceof THREE.Mesh) {\r\n      obj.geometry?.dispose?.();\r\n      if (Array.isArray(obj.material)) {\r\n        for (const m of obj.material) m.dispose?.();\r\n      } else {\r\n        obj.material?.dispose?.();\r\n      }\r\n    }\r\n  };\r\n\r\n  const clearDynamicObjects = useCallback(() => {\r\n    const scene = sceneRef.current;\r\n    if (!scene) return;\r\n    for (const obj of dynamicObjectsRef.current) {\r\n      scene.remove(obj);\r\n      disposeObject(obj);\r\n    }\r\n    dynamicObjectsRef.current = [];\r\n  }, []);\r\n\r\n  const handleResize = useCallback(() => {\r\n    const container = containerRef.current;\r\n    const camera = cameraRef.current;\r\n    const renderer = rendererRef.current;\r\n    const labelRenderer = labelRendererRef.current;\r\n    if (!container || !camera || !renderer || !labelRenderer) return;\r\n\r\n    const width = container.clientWidth;\r\n    const height = container.clientHeight;\r\n    if (width <= 0 || height <= 0) return;\r\n\r\n    camera.aspect = width / height;\r\n    camera.updateProjectionMatrix();\r\n    renderer.setSize(width, height);\r\n    labelRenderer.setSize(width, height);\r\n  }, []);\r\n\r\n  const initThree = useCallback(() => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n\r\n    const scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(0x000000);\r\n    sceneRef.current = scene;\r\n\r\n    const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);\r\n    camera.position.set(4, 4, 4);\r\n    cameraRef.current = camera;\r\n\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio || 1));\r\n    rendererRef.current = renderer;\r\n    container.appendChild(renderer.domElement);\r\n\r\n    const labelRenderer = new CSS2DRenderer();\r\n    labelRenderer.domElement.style.position = \"absolute\";\r\n    labelRenderer.domElement.style.top = \"0\";\r\n    labelRenderer.domElement.style.pointerEvents = \"none\";\r\n    labelRendererRef.current = labelRenderer;\r\n    container.appendChild(labelRenderer.domElement);\r\n\r\n    const controls = new OrbitControls(camera, renderer.domElement);\r\n    controls.enableDamping = true;\r\n    controls.dampingFactor = 0.05;\r\n    controlsRef.current = controls;\r\n\r\n    const starsGeometry = new THREE.BufferGeometry();\r\n    const starsCount = 1600;\r\n    const positions = new Float32Array(starsCount * 3);\r\n    for (let i = 0; i < starsCount * 3; i += 3) {\r\n      positions[i] = (Math.random() - 0.5) * 100;\r\n      positions[i + 1] = (Math.random() - 0.5) * 100;\r\n      positions[i + 2] = (Math.random() - 0.5) * 100;\r\n    }\r\n    starsGeometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\r\n    const starsMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.12, transparent: true, opacity: 0.8 });\r\n    scene.add(new THREE.Points(starsGeometry, starsMaterial));\r\n\r\n    const equatorialPlane = new THREE.Mesh(\r\n      new THREE.CircleGeometry(2, 64),\r\n      new THREE.MeshBasicMaterial({ color: 0x4169e1, transparent: true, opacity: 0.15, side: THREE.DoubleSide })\r\n    );\r\n    equatorialPlane.rotation.x = Math.PI / 2;\r\n    scene.add(equatorialPlane);\r\n\r\n    const equatorLine = new THREE.Mesh(new THREE.TorusGeometry(2, 0.004, 16, 200), new THREE.MeshBasicMaterial({ color: 0xffffff }));\r\n    equatorLine.rotation.x = Math.PI / 2;\r\n    scene.add(equatorLine);\r\n\r\n    handleResize();\r\n  }, [handleResize]);\r\n\r\n  const createTrajectory = useCallback(\r\n    (body: BodyId, declinationDeg: number, latitudeDeg: number, color: number) => {\r\n      const scene = sceneRef.current;\r\n      if (!scene) return;\r\n\r\n      const radius = 2;\r\n      const pointsCount = 1440;\r\n      const points: THREE.Vector3[] = [];\r\n\r\n      const delta = (declinationDeg * Math.PI) / 180;\r\n      const latitudeRad = (latitudeDeg * Math.PI) / 180;\r\n\r\n      const zAxis = new THREE.Vector3(0, 0, 1);\r\n      const northPoleDir = new THREE.Vector3(0, Math.sin(latitudeRad), Math.cos(latitudeRad)).normalize();\r\n      const rotationAxis = new THREE.Vector3().crossVectors(zAxis, northPoleDir).normalize();\r\n      const rotationAngle = Math.acos(zAxis.dot(northPoleDir));\r\n      const rotationMatrix = new THREE.Matrix4().makeRotationAxis(rotationAxis, rotationAngle);\r\n\r\n      for (let i = 0; i < pointsCount; i++) {\r\n        const t = (i / pointsCount) * Math.PI * 2;\r\n        const d = radius * Math.sin(delta);\r\n        const circleRadius = Math.sqrt(Math.max(0, radius * radius - d * d));\r\n        const x = circleRadius * Math.cos(t);\r\n        const y = circleRadius * Math.sin(t);\r\n        const z = d;\r\n\r\n        const p = new THREE.Vector3(x, y, z).applyMatrix4(rotationMatrix);\r\n        points.push(p);\r\n      }\r\n\r\n      const curve = new THREE.CatmullRomCurve3(points, true);\r\n      const geometry = new THREE.TubeGeometry(curve, 128, 0.01, 12, true);\r\n      const material = new THREE.MeshBasicMaterial({ color, transparent: true, opacity: 0.95 });\r\n      const mesh = new THREE.Mesh(geometry, material);\r\n      mesh.userData = { type: body };\r\n      mesh.visible = selectionRef.current[body];\r\n      scene.add(mesh);\r\n      dynamicObjectsRef.current.push(mesh);\r\n    },\r\n    []\r\n  );\r\n\r\n  const updateVisualization = useCallback(\r\n    (sunMoonData: SunMoonApiResponse, planetsData: PlanetsApiResponse | null, latitudeValue: number) => {\r\n      clearDynamicObjects();\r\n\r\n      const lat = latitudeValue;\r\n      const declSun = parseDeclination(sunMoonData.sun_declination) ?? 0;\r\n      const declMoon = parseDeclination(sunMoonData.moon_declination) ?? 0;\r\n\r\n      createTrajectory(\"sun\", declSun, lat, BODIES.find((b) => b.id === \"sun\")!.color);\r\n      createTrajectory(\"moon\", declMoon, lat, BODIES.find((b) => b.id === \"moon\")!.color);\r\n\r\n      const planetNameMap: Record<Exclude<BodyId, \"sun\" | \"moon\">, string> = {\r\n        mercury: \"水星\",\r\n        venus: \"金星\",\r\n        mars: \"火星\",\r\n        jupiter: \"木星\",\r\n        saturn: \"土星\"\r\n      };\r\n\r\n      if (planetsData) {\r\n        (Object.keys(planetNameMap) as Array<Exclude<BodyId, \"sun\" | \"moon\">>).forEach((id) => {\r\n          const cn = planetNameMap[id];\r\n          const decl = parseDeclination(planetsData[cn]?.declination);\r\n          if (decl === null) return;\r\n          const cfg = BODIES.find((b) => b.id === id)!;\r\n          createTrajectory(id, decl, lat, cfg.color);\r\n        });\r\n      }\r\n\r\n      setInfo({\r\n        sunrise: sunMoonData.sunrise,\r\n        sunset: sunMoonData.sunset,\r\n        moonrise: sunMoonData.moonrise,\r\n        moonset: sunMoonData.moonset\r\n      });\r\n    },\r\n    [clearDynamicObjects, createTrajectory]\r\n  );\r\n\r\n  const animate = useCallback(() => {\r\n    const scene = sceneRef.current;\r\n    const camera = cameraRef.current;\r\n    const renderer = rendererRef.current;\r\n    const labelRenderer = labelRendererRef.current;\r\n    if (!scene || !camera || !renderer || !labelRenderer) return;\r\n\r\n    controlsRef.current?.update();\r\n    renderer.render(scene, camera);\r\n    labelRenderer.render(scene, camera);\r\n    animationIdRef.current = window.requestAnimationFrame(animate);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    initThree();\r\n    window.addEventListener(\"resize\", handleResize);\r\n    animate();\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n      if (animationIdRef.current) window.cancelAnimationFrame(animationIdRef.current);\r\n\r\n      clearDynamicObjects();\r\n\r\n      controlsRef.current?.dispose?.();\r\n      controlsRef.current = null;\r\n\r\n      if (rendererRef.current) {\r\n        rendererRef.current.dispose();\r\n        rendererRef.current.domElement.remove();\r\n      }\r\n      rendererRef.current = null;\r\n\r\n      if (labelRendererRef.current) {\r\n        labelRendererRef.current.domElement.remove();\r\n      }\r\n      labelRendererRef.current = null;\r\n\r\n      sceneRef.current = null;\r\n      cameraRef.current = null;\r\n    };\r\n  }, [animate, clearDynamicObjects, handleResize, initThree]);\r\n\r\n  const canQuery = useMemo(() => {\r\n    const lat = Number(latitude);\r\n    const lng = Number(longitude);\r\n    if (!Number.isFinite(lat) || !Number.isFinite(lng)) return false;\r\n    if (!date || !time) return false;\r\n    return true;\r\n  }, [date, latitude, longitude, time]);\r\n\r\n  const submitQuery = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const { latitude: latStr, longitude: lngStr, date: dateStr, time: timeStr } = queryRef.current;\r\n      const lat = Number(latStr);\r\n      const lng = Number(lngStr);\r\n\r\n      const [sunMoonRes, planetsRes] = await Promise.allSettled([\r\n        fetch(\"/api/calculate\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ latitude: lat, longitude: lng, date: dateStr, time: timeStr })\r\n        }),\r\n        fetch(\"/api/planets\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ latitude: lat, longitude: lng, date: dateStr, time: timeStr })\r\n        })\r\n      ]);\r\n\r\n      if (sunMoonRes.status === \"rejected\") throw sunMoonRes.reason;\r\n      if (!sunMoonRes.value.ok) throw new Error(`HTTP ${sunMoonRes.value.status}`);\r\n      const sunMoonData = (await sunMoonRes.value.json()) as SunMoonApiResponse;\r\n\r\n      let planetsData: PlanetsApiResponse | null = null;\r\n      if (planetsRes.status === \"fulfilled\" && planetsRes.value.ok) {\r\n        planetsData = (await planetsRes.value.json()) as PlanetsApiResponse;\r\n      }\r\n\r\n      updateVisualization(sunMoonData, planetsData, lat);\r\n    } catch (e) {\r\n      const message = e instanceof Error ? e.message : \"查询失败\";\r\n      setError(message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [updateVisualization]);\r\n\r\n  useEffect(() => {\r\n    void submitQuery();\r\n  }, [submitQuery]);\r\n\r\n  const handleToggle = (body: BodyId) => {\r\n    setSelection((prev) => ({ ...prev, [body]: !prev[body] }));\r\n  };\r\n\r\n  const handleDateChange = (value: string) => {\r\n    setSelection((prev) => (isAllSelected(prev) ? DEFAULT_SELECTION : prev));\r\n    setDate(value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full min-h-[520px] rounded-2xl overflow-hidden bg-black\">\r\n      <div ref={containerRef} className=\"absolute inset-0\" />\r\n\r\n      <div className=\"absolute left-4 top-4 z-10 w-[260px] max-w-[72vw] rounded-xl border border-white/10 bg-black/55 backdrop-blur px-3 py-3\">\r\n        <div className=\"flex flex-col gap-2 text-xs text-white/90\">\r\n          <div className=\"grid grid-cols-[56px_1fr] items-center gap-2\">\r\n            <div className=\"text-white/80\">纬度</div>\r\n            <input\r\n              value={latitude}\r\n              onChange={(e) => setLatitude(e.target.value)}\r\n              className=\"w-full rounded-md bg-white/10 px-2 py-1 outline-none ring-0\"\r\n              inputMode=\"decimal\"\r\n            />\r\n          </div>\r\n          <div className=\"grid grid-cols-[56px_1fr] items-center gap-2\">\r\n            <div className=\"text-white/80\">经度</div>\r\n            <input\r\n              value={longitude}\r\n              onChange={(e) => setLongitude(e.target.value)}\r\n              className=\"w-full rounded-md bg-white/10 px-2 py-1 outline-none ring-0\"\r\n              inputMode=\"decimal\"\r\n            />\r\n          </div>\r\n          <div className=\"grid grid-cols-[56px_1fr] items-center gap-2\">\r\n            <div className=\"text-white/80\">日期</div>\r\n            <input\r\n              type=\"date\"\r\n              value={date}\r\n              onChange={(e) => handleDateChange(e.target.value)}\r\n              className=\"w-full rounded-md bg-white/10 px-2 py-1 outline-none ring-0\"\r\n            />\r\n          </div>\r\n          <div className=\"grid grid-cols-[56px_1fr] items-center gap-2\">\r\n            <div className=\"text-white/80\">时间</div>\r\n            <input\r\n              type=\"time\"\r\n              value={time}\r\n              onChange={(e) => setTime(e.target.value)}\r\n              className=\"w-full rounded-md bg-white/10 px-2 py-1 outline-none ring-0\"\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            disabled={!canQuery || loading}\r\n            onClick={() => void submitQuery()}\r\n            className=\"mt-1 w-full rounded-lg bg-blue-600/90 px-3 py-2 text-sm font-semibold text-white disabled:opacity-60\"\r\n          >\r\n            {loading ? \"计算中...\" : \"更新轨迹\"}\r\n          </button>\r\n\r\n          {error && <div className=\"rounded-md bg-red-900/40 px-2 py-1 text-red-200\">{error}</div>}\r\n          {info && (\r\n            <div className=\"rounded-md bg-white/5 px-2 py-1 text-white/85\">\r\n              <div>日出 {info.sunrise || \"--:--\"}</div>\r\n              <div>日落 {info.sunset || \"--:--\"}</div>\r\n              <div>月出 {info.moonrise || \"--:--\"}</div>\r\n              <div>月落 {info.moonset || \"--:--\"}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"absolute right-4 top-4 z-10 rounded-xl border border-white/10 bg-black/55 backdrop-blur px-3 py-3\">\r\n        <div className=\"flex flex-col gap-2 text-xs\">\r\n          {BODIES.map((b) => {\r\n            const hex = `#${b.color.toString(16).padStart(6, \"0\")}`;\r\n            return (\r\n              <label key={b.id} className=\"flex items-center gap-2 select-none\" style={{ color: hex }}>\r\n                <input type=\"checkbox\" checked={selection[b.id]} onChange={() => handleToggle(b.id)} />\r\n                <span>{b.label}</span>\r\n              </label>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// import React, { useEffect, useRef, useState } from 'react';\r\n// import Link from \"next/link\";\r\n// import BottomNav from \"@/components/Footer/BottomNav\";\r\n// import EarthNav from \"@/components/EarthNav/EarthNav\";\r\n// import * as THREE from 'three';\r\n// import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\n// import { CSS2DRenderer, CSS2DObject } from 'three/examples/jsm/renderers/CSS2DRenderer';\r\n\r\n// const AstronomyVisualization: React.FC = () => {\r\n//     const canvasRef = useRef<HTMLCanvasElement>(null);\r\n//     const containerRef = useRef<HTMLDivElement>(null);\r\n//     const [latitude, setLatitude] = useState('31.23');\r\n//     const [longitude, setLongitude] = useState('121.47');\r\n//     const [date, setDate] = useState('');\r\n//     const [time, setTime] = useState('');\r\n//     const [result, setResult] = useState('');\r\n\r\n//     // Three.js相关引用\r\n//     const sceneRef = useRef<THREE.Scene | null>(null);\r\n//     const cameraRef = useRef<THREE.PerspectiveCamera | null>(null);\r\n//     const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n//     const labelRendererRef = useRef<CSS2DRenderer | null>(null);\r\n//     const controlsRef = useRef<OrbitControls | null>(null);\r\n//     const celestialObjectsRef = useRef<any[]>([]);\r\n//     const labelsRef = useRef<any[]>([]);\r\n//     const animationIdRef = useRef<number>();\r\n\r\n//     // 初始化Three.js场景\r\n//     const initThree = () => {\r\n//         if (!canvasRef.current) return;\r\n\r\n//         // 创建场景\r\n//         const scene = new THREE.Scene();\r\n//         scene.background = new THREE.Color(0x000000);\r\n//         sceneRef.current = scene;\r\n\r\n//         // 添加星空效果\r\n//         const starsGeometry = new THREE.BufferGeometry();\r\n//         const starsCount = 2000;\r\n//         const positions = new Float32Array(starsCount * 3);\r\n\r\n//         for (let i = 0; i < starsCount * 3; i += 3) {\r\n//             positions[i] = (Math.random() - 0.5) * 100;\r\n//             positions[i + 1] = (Math.random() - 0.5) * 100;\r\n//             positions[i + 2] = (Math.random() - 0.5) * 100;\r\n//         }\r\n\r\n//         starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n//         const starsMaterial = new THREE.PointsMaterial({\r\n//             color: 0xffffff,\r\n//             size: 0.13,\r\n//             transparent: true,\r\n//             sizeAttenuation: true,\r\n//             opacity: 0.8,\r\n//         });\r\n\r\n//         const starField = new THREE.Points(starsGeometry, starsMaterial);\r\n//         scene.add(starField);\r\n//         celestialObjectsRef.current.push(starField);\r\n\r\n//         // 创建相机\r\n//         const camera = new THREE.PerspectiveCamera(\r\n//             75,\r\n//             window.innerWidth / window.innerHeight,\r\n//             0.1,\r\n//             1000\r\n//         );\r\n//         cameraRef.current = camera;\r\n\r\n//         // 创建WebGL渲染器\r\n//         const renderer = new THREE.WebGLRenderer({\r\n//             canvas: canvasRef.current,\r\n//             antialias: true,\r\n//         });\r\n//         renderer.setSize(window.innerWidth, window.innerHeight);\r\n//         rendererRef.current = renderer;\r\n\r\n//         // 创建CSS2D渲染器\r\n//         const labelRenderer = new CSS2DRenderer();\r\n//         labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         labelRenderer.domElement.style.position = 'absolute';\r\n//         labelRenderer.domElement.style.top = '0';\r\n//         labelRenderer.domElement.style.pointerEvents = 'none';\r\n\r\n//         if (containerRef.current) {\r\n//             containerRef.current.appendChild(labelRenderer.domElement);\r\n//         }\r\n\r\n//         labelRendererRef.current = labelRenderer;\r\n\r\n//         // 基础天球\r\n//         const celestialSphere = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(2, 30, 30),\r\n//             new THREE.MeshBasicMaterial({\r\n//                 wireframe: true,\r\n//                 transparent: true,\r\n//                 opacity: 0.1,\r\n//             })\r\n//         );\r\n//         scene.add(celestialSphere);\r\n\r\n//         // 赤道平面\r\n//         const equatorialPlane = new THREE.Mesh(\r\n//             new THREE.CircleGeometry(2, 30),\r\n//             new THREE.MeshBasicMaterial({\r\n//                 color: 0x4169e1,\r\n//                 transparent: true,\r\n//                 opacity: 0.2,\r\n//                 side: THREE.DoubleSide,\r\n//             })\r\n//         );\r\n//         equatorialPlane.rotation.x = Math.PI / 2;\r\n//         scene.add(equatorialPlane);\r\n\r\n//         // 赤道圆圈\r\n//         const equatorLine = new THREE.Mesh(\r\n//             new THREE.TorusGeometry(2, 0.003, 16, 100),\r\n//             new THREE.MeshBasicMaterial({ color: 0xffffff })\r\n//         );\r\n//         equatorLine.rotation.x = Math.PI / 2;\r\n//         scene.add(equatorLine);\r\n\r\n//         // 坐标轴\r\n//         const axesHelper = new THREE.AxesHelper(2.4);\r\n//         scene.add(axesHelper);\r\n\r\n//         // 方位标签\r\n//         const orientationLabels = ['东', '北', '西', '南'];\r\n//         for (let i = 0; i < 4; i++) {\r\n//             const angle = (i * Math.PI * 2) / 4;\r\n//             const x = 2 * Math.cos(angle);\r\n//             const z = 2 * Math.sin(angle);\r\n//             const y = 0;\r\n\r\n//             const labelDiv = document.createElement('div');\r\n//             labelDiv.className = 'orientation-label';\r\n//             labelDiv.textContent = orientationLabels[i];\r\n//             labelDiv.style.color = '#ffffff';\r\n//             labelDiv.style.fontSize = '14px';\r\n//             labelDiv.style.fontWeight = 'bold';\r\n//             labelDiv.style.textShadow = '0 0 3px rgba(0,0,0,0.8)';\r\n\r\n//             const label = new CSS2DObject(labelDiv);\r\n//             label.position.set(x * 1.1, y, z * 1.1);\r\n//             scene.add(label);\r\n//             labelsRef.current.push(label);\r\n//         }\r\n\r\n//         // 初始化控制器\r\n//         const controls = new OrbitControls(camera, renderer.domElement);\r\n//         camera.position.set(4, 4, 4);\r\n//         controls.update();\r\n//         controlsRef.current = controls;\r\n//     };\r\n\r\n//     // 更新可视化\r\n//     const updateVisualization = (data: any, planetsData: any) => {\r\n//         if (!sceneRef.current) return;\r\n\r\n//         const scene = sceneRef.current;\r\n\r\n//         // 保存星空对象\r\n//         const starField = celestialObjectsRef.current.find(\r\n//             (obj) => obj instanceof THREE.Points\r\n//         );\r\n\r\n//         // 清除旧对象\r\n//         celestialObjectsRef.current.forEach((obj) => {\r\n//             if (!(obj instanceof THREE.Points)) {\r\n//                 scene.remove(obj);\r\n//             }\r\n//         });\r\n\r\n//         celestialObjectsRef.current = starField ? [starField] : [];\r\n\r\n//         // 清除旧标签\r\n//         labelsRef.current.forEach((label) => scene.remove(label));\r\n//         labelsRef.current = [];\r\n\r\n//         const sunDeclination = parseFloat(data.sun_declination.replace('°', ''));\r\n//         const moonDeclination = parseFloat(data.moon_declination.replace('°', ''));\r\n//         const latitudeValue = parseFloat(latitude);\r\n\r\n//         // 创建太阳和月亮轨迹\r\n//         createCelestialBodyTrajectory('sun', sunDeclination, latitudeValue, 0xffff00, data);\r\n//         createCelestialBodyTrajectory('moon', moonDeclination, latitudeValue, 0xc0c0c0, data);\r\n\r\n//         // 创建行星轨迹\r\n//         if (planetsData) {\r\n//             const planetConfigs = {\r\n//                 '水星': { color: 0x498bff, englishName: 'mercury' },\r\n//                 '金星': { color: 0xcec2a8, englishName: 'venus' },\r\n//                 '火星': { color: 0xb92123, englishName: 'mars' },\r\n//                 '木星': { color: 0x60b633, englishName: 'jupiter' },\r\n//                 '土星': { color: 0xf4d727, englishName: 'saturn' },\r\n//             };\r\n\r\n//             Object.entries(planetConfigs).forEach(([chineseName, config]) => {\r\n//                 if (planetsData[chineseName]) {\r\n//                     const declination = parseFloat(planetsData[chineseName].declination.replace('°', ''));\r\n//                     createCelestialBodyTrajectory(\r\n//                         config.englishName,\r\n//                         declination,\r\n//                         latitudeValue,\r\n//                         config.color,\r\n//                         data,\r\n//                         true\r\n//                     );\r\n//                 }\r\n//             });\r\n//         }\r\n\r\n//         // 更新结果显示\r\n//         setResult(`\r\n//       <p>日出时间: ${data.sunrise}</p>\r\n//       <p>日落时间: ${data.sunset}</p>\r\n//       <p>月出时间: ${data.moonrise}</p>\r\n//       <p>月落时间: ${data.moonset}</p>\r\n//       <p>日照时长: ${data.daylight_duration}</p>\r\n//       <p>太阳赤纬角: ${data.sun_declination}</p>\r\n//       <p>月亮赤纬角: ${data.moon_declination}</p>\r\n//       <hr>\r\n//     `);\r\n//     };\r\n\r\n//     // 创建天体轨迹\r\n//     const createCelestialBodyTrajectory = (\r\n//         bodyType: string,\r\n//         declination: number,\r\n//         latitude: number,\r\n//         color: number,\r\n//         data: any,\r\n//         isPlanet: boolean = false\r\n//     ) => {\r\n//         if (!sceneRef.current) return;\r\n\r\n//         const scene = sceneRef.current;\r\n//         const radius = 2;\r\n//         const timePoints = 86400;\r\n//         const points = [];\r\n\r\n//         const delta = (declination * Math.PI) / 180;\r\n//         const latitudeRad = (latitude * Math.PI) / 180;\r\n\r\n//         // 生成轨迹点\r\n//         for (let i = 0; i < timePoints; i++) {\r\n//             const t = (i / (timePoints - 1)) * Math.PI * 2;\r\n//             const d = radius * Math.sin(delta);\r\n//             const circleRadius = Math.sqrt(radius * radius - d * d);\r\n//             const x = circleRadius * Math.cos(t);\r\n//             const y = circleRadius * Math.sin(t);\r\n//             const z = d;\r\n\r\n//             // 计算旋转\r\n//             const zAxis = new THREE.Vector3(0, 0, 1);\r\n//             const northPoleDir = new THREE.Vector3(\r\n//                 0,\r\n//                 Math.sin(latitudeRad),\r\n//                 Math.cos(latitudeRad)\r\n//             ).normalize();\r\n\r\n//             const rotationAxis = new THREE.Vector3();\r\n//             rotationAxis.crossVectors(zAxis, northPoleDir).normalize();\r\n//             const rotationAngle = Math.acos(zAxis.dot(northPoleDir));\r\n\r\n//             const rotationMatrix = new THREE.Matrix4();\r\n//             rotationMatrix.makeRotationAxis(rotationAxis, rotationAngle);\r\n\r\n//             const point = new THREE.Vector3(x, y, z);\r\n//             point.applyMatrix4(rotationMatrix);\r\n//             points.push(point);\r\n//         }\r\n\r\n//         // 创建轨迹管道\r\n//         const curve = new THREE.CatmullRomCurve3(points);\r\n//         const pathGeometry = new THREE.TubeGeometry(curve, 50, 0.01, 20, false);\r\n//         const pathMaterial = new THREE.MeshBasicMaterial({ color });\r\n//         const path = new THREE.Mesh(pathGeometry, pathMaterial);\r\n//         path.userData = { type: bodyType };\r\n//         path.visible = !isPlanet; // 行星默认不可见\r\n//         scene.add(path);\r\n//         celestialObjectsRef.current.push(path);\r\n\r\n//         // 添加时间标记和交点\r\n//         createTimeMarkers(bodyType, points, data, color, declination > 0);\r\n//     };\r\n\r\n//     // 创建时间标记\r\n//     const createTimeMarkers = (\r\n//         bodyType: string,\r\n//         points: THREE.Vector3[],\r\n//         data: any,\r\n//         color: number,\r\n//         isDeclinationPositive: boolean\r\n//     ) => {\r\n//         if (!sceneRef.current) return;\r\n\r\n//         const scene = sceneRef.current;\r\n\r\n//         // 时间转换函数\r\n//         const timeToSeconds = (timeStr: string) => {\r\n//             const [h, m] = timeStr.split(':').map(Number);\r\n//             return h * 3600 + m * 60;\r\n//         };\r\n\r\n//         // 查找与赤道平面的交点\r\n//         const findIntersections = () => {\r\n//             const intersections: THREE.Vector3[] = [];\r\n//             const indices: number[] = [];\r\n\r\n//             for (let i = 0; i < points.length - 1; i++) {\r\n//                 const point = points[i];\r\n//                 const nextPoint = points[i + 1];\r\n\r\n//                 if (point.y * nextPoint.y <= 0) {\r\n//                     const t = -point.y / (nextPoint.y - point.y);\r\n//                     const intersectX = point.x + t * (nextPoint.x - point.x);\r\n//                     const intersectZ = point.z + t * (nextPoint.z - point.z);\r\n\r\n//                     intersections.push(new THREE.Vector3(intersectX, 0, intersectZ));\r\n//                     indices.push(i);\r\n//                 }\r\n//             }\r\n//             return { points: intersections, indices };\r\n//         };\r\n\r\n//         const { points: intersectionPoints, indices: intersectionIndices } = findIntersections();\r\n\r\n//         // 创建交点标记\r\n//         intersectionPoints.forEach((point, index) => {\r\n//             const marker = new THREE.Mesh(\r\n//                 new THREE.SphereGeometry(0.03),\r\n//                 new THREE.MeshBasicMaterial({\r\n//                     color: bodyType === 'sun' ? 0xff0000 : 0x008b8b\r\n//                 })\r\n//             );\r\n//             marker.position.copy(point);\r\n//             scene.add(marker);\r\n//             celestialObjectsRef.current.push(marker);\r\n\r\n//             // 添加标签\r\n//             const labelDiv = document.createElement('div');\r\n//             labelDiv.className = bodyType === 'sun' ? 'intersection-label' : 'moon-intersection-label';\r\n//             const label = new CSS2DObject(labelDiv);\r\n//             label.position.copy(point);\r\n//             scene.add(label);\r\n//             labelsRef.current.push(label);\r\n//         });\r\n\r\n//         // 获取升起时间\r\n//         const riseTime = bodyType === 'sun' ? data.sunrise : data.moonrise;\r\n//         const riseSec = timeToSeconds(riseTime);\r\n//         const riseIndex = isDeclinationPositive ? intersectionIndices[1] : intersectionIndices[0];\r\n\r\n//         // 创建整点时间标记\r\n//         const riseHour = Math.ceil(riseSec / 3600);\r\n//         const firstHourMarker = riseHour * 3600;\r\n//         const timeDiff = firstHourMarker - riseSec;\r\n\r\n//         const firstHourIndex = (riseIndex + Math.round((timeDiff / 86400) * points.length)) % points.length;\r\n\r\n//         const markerColor = bodyType === 'sun' ? 0xffa500 : 0x20b2aa;\r\n//         const markerGeometry = new THREE.SphereGeometry(0.03);\r\n//         const markerMaterial = new THREE.MeshBasicMaterial({ color: markerColor });\r\n\r\n//         for (let h = 0; h < 24; h++) {\r\n//             const targetSec = firstHourMarker + h * 3600;\r\n//             const markerIndex = (firstHourIndex + Math.round((h * points.length) / 24)) % points.length;\r\n//             const position = points[markerIndex];\r\n\r\n//             // 创建标记点\r\n//             const marker = new THREE.Mesh(markerGeometry, markerMaterial);\r\n//             marker.position.copy(position);\r\n//             marker.userData = { type: bodyType };\r\n//             scene.add(marker);\r\n//             celestialObjectsRef.current.push(marker);\r\n\r\n//             // 添加时间标签\r\n//             const labelDiv = document.createElement('div');\r\n//             labelDiv.className = bodyType === 'sun' ? 'time-marker' : 'moon-time-marker';\r\n//             labelDiv.textContent = `${Math.floor(targetSec / 3600).toString().padStart(2, '0')}`;\r\n\r\n//             const label = new CSS2DObject(labelDiv);\r\n//             label.userData = { type: bodyType };\r\n\r\n//             const direction = position.clone().normalize();\r\n//             const labelPosition = position.clone().add(direction.multiplyScalar(0.15));\r\n//             label.position.copy(labelPosition);\r\n\r\n//             scene.add(label);\r\n//             labelsRef.current.push(label);\r\n//         }\r\n\r\n//         // 添加当前时间标记\r\n//         const [currentHour, currentMinute] = time.split(':').map(Number);\r\n//         const currentSeconds = currentHour * 3600 + currentMinute * 60;\r\n//         const pointsPerSecond = points.length / 86400;\r\n//         const timeDiffFromRise = currentSeconds - riseSec;\r\n//         const offsetPoints = Math.floor(timeDiffFromRise * pointsPerSecond);\r\n//         const validIndex = (((riseIndex + offsetPoints) % points.length) + points.length) % points.length;\r\n\r\n//         const currentMarker = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.08),\r\n//             new THREE.MeshBasicMaterial({\r\n//                 color: bodyType === 'sun' ? 0xff4500 : 0x87ceeb\r\n//             })\r\n//         );\r\n//         currentMarker.position.copy(points[validIndex]);\r\n//         currentMarker.userData = { type: bodyType };\r\n//         scene.add(currentMarker);\r\n//         celestialObjectsRef.current.push(currentMarker);\r\n\r\n//         const currentLabel = document.createElement('div');\r\n//         currentLabel.className = bodyType === 'sun' ? 'time-marker' : 'moon-time-marker';\r\n//         currentLabel.style.color = bodyType === 'sun' ? '#ff4500' : '#87ceeb';\r\n//         currentLabel.style.fontSize = '16px';\r\n//         currentLabel.textContent = `${currentHour}:${currentMinute.toString().padStart(2, '0')}`;\r\n\r\n//         const timeLabel = new CSS2DObject(currentLabel);\r\n//         const direction = currentMarker.position.clone().normalize();\r\n//         const labelPosition = currentMarker.position.clone().add(direction.multiplyScalar(0.2));\r\n//         timeLabel.position.copy(labelPosition);\r\n//         timeLabel.userData = { type: bodyType };\r\n\r\n//         scene.add(timeLabel);\r\n//         labelsRef.current.push(timeLabel);\r\n//     };\r\n\r\n//     // 动画循环\r\n//     const animate = () => {\r\n//         if (!sceneRef.current || !cameraRef.current || !rendererRef.current || !labelRendererRef.current) return;\r\n\r\n//         controlsRef.current?.update();\r\n//         rendererRef.current.render(sceneRef.current, cameraRef.current);\r\n//         labelRendererRef.current.render(sceneRef.current, cameraRef.current);\r\n\r\n//         animationIdRef.current = requestAnimationFrame(animate);\r\n//     };\r\n\r\n//     // 窗口大小调整\r\n//     const handleResize = () => {\r\n//         if (!cameraRef.current || !rendererRef.current || !labelRendererRef.current) return;\r\n\r\n//         const container = containerRef.current;\r\n//         if (!container) return;\r\n\r\n//         const width = container.clientWidth;\r\n//         const height = container.clientHeight;\r\n\r\n//         cameraRef.current.aspect = width / height;\r\n//         cameraRef.current.updateProjectionMatrix();\r\n//         rendererRef.current.setSize(width, height);\r\n//         labelRendererRef.current.setSize(width, height);\r\n//     };\r\n\r\n//     // 表单提交处理\r\n//     const handleSubmit = async (e: React.FormEvent) => {\r\n//         e.preventDefault();\r\n\r\n//         // 验证中国范围内的经纬度\r\n//         const minLatitude = 3.5;\r\n//         const maxLatitude = 53.4;\r\n//         const minLongitude = 73.3;\r\n//         const maxLongitude = 135.1;\r\n\r\n//         const lat = parseFloat(latitude);\r\n//         const lng = parseFloat(longitude);\r\n\r\n//         if (lat < minLatitude || lat > maxLatitude || lng < minLongitude || lng > maxLongitude) {\r\n//             setResult('请输入中国范围内的经纬度');\r\n//             return;\r\n//         }\r\n\r\n//         try {\r\n//             // 获取日月数据\r\n//             const sunMoonResponse = await fetch('/api/calculate', {\r\n//                 method: 'POST',\r\n//                 headers: {\r\n//                     'Content-Type': 'application/json',\r\n//                 },\r\n//                 body: JSON.stringify({ latitude: lat, longitude: lng, date, time }),\r\n//             });\r\n//             const sunMoonData = await sunMoonResponse.json();\r\n\r\n//             // 获取行星数据\r\n//             const planetsResponse = await fetch('/api/planets', {\r\n//                 method: 'POST',\r\n//                 headers: {\r\n//                     'Content-Type': 'application/json',\r\n//                 },\r\n//                 body: JSON.stringify({ latitude: lat, longitude: lng, date, time }),\r\n//             });\r\n//             const planetsData = await planetsResponse.json();\r\n\r\n//             updateVisualization(sunMoonData, planetsData);\r\n//         } catch (error) {\r\n//             console.error('Error:', error);\r\n//             setResult('获取数据时出错，请重试');\r\n//         }\r\n//     };\r\n\r\n//     // 天体显示控制\r\n//     const handleCelestialToggle = (celestialBody: string, isChecked: boolean) => {\r\n//         // 控制天体对象显示\r\n//         celestialObjectsRef.current.forEach((obj) => {\r\n//             if (obj.userData && obj.userData.type === celestialBody) {\r\n//                 obj.visible = isChecked;\r\n//             }\r\n//         });\r\n\r\n//         // 控制标签显示\r\n//         labelsRef.current.forEach((label) => {\r\n//             if (label.userData && label.userData.type === celestialBody) {\r\n//                 label.visible = isChecked;\r\n//             }\r\n//         });\r\n//     };\r\n\r\n//     // 组件挂载和卸载\r\n//     useEffect(() => {\r\n//         // 设置默认日期和时间\r\n//         const today = new Date();\r\n//         const year = today.getFullYear();\r\n//         const month = String(today.getMonth() + 1).padStart(2, '0');\r\n//         const day = String(today.getDate()).padStart(2, '0');\r\n//         const hours = String(today.getHours()).padStart(2, '0');\r\n//         const minutes = String(today.getMinutes()).padStart(2, '0');\r\n\r\n//         setDate(`${year}-${month}-${day}`);\r\n//         setTime(`${hours}:${minutes}`);\r\n\r\n//         // 初始化Three.js\r\n//         initThree();\r\n//         window.addEventListener('resize', handleResize);\r\n//         animate();\r\n\r\n//         // 自动提交表单\r\n//         const submitForm = async () => {\r\n//             if (latitude && longitude && date && time) {\r\n//                 await handleSubmit(new Event('submit') as any);\r\n//             }\r\n//         };\r\n\r\n//         submitForm();\r\n\r\n//         // 清理函数\r\n//         return () => {\r\n//             window.removeEventListener('resize', handleResize);\r\n//             if (animationIdRef.current) {\r\n//                 cancelAnimationFrame(animationIdRef.current);\r\n//             }\r\n\r\n//             // 清理Three.js资源\r\n//             if (rendererRef.current) {\r\n//                 rendererRef.current.dispose();\r\n//             }\r\n\r\n//             if (labelRendererRef.current) {\r\n//                 labelRendererRef.current.domElement.remove();\r\n//             }\r\n//         };\r\n//     }, []);\r\n\r\n//     // 复选框事件处理\r\n//     useEffect(() => {\r\n//         const checkboxes = document.querySelectorAll('.celestial-checkbox');\r\n\r\n//         const handleCheckboxChange = (e: Event) => {\r\n//             const target = e.target as HTMLInputElement;\r\n//             const celestialBody = target.dataset.celestial;\r\n//             if (celestialBody) {\r\n//                 handleCelestialToggle(celestialBody, target.checked);\r\n//             }\r\n//         };\r\n\r\n//         checkboxes.forEach(checkbox => {\r\n//             checkbox.addEventListener('change', handleCheckboxChange);\r\n//         });\r\n\r\n//         return () => {\r\n//             checkboxes.forEach(checkbox => {\r\n//                 checkbox.removeEventListener('change', handleCheckboxChange);\r\n//             });\r\n//         };\r\n//     }, []);\r\n\r\n//     return (\r\n//         <div style={{\r\n//             display: 'flex',\r\n//             flexDirection: 'column',\r\n//             minHeight: '100vh',\r\n//             backgroundColor: '#1c023f',\r\n//             color: 'white',\r\n//             fontFamily: 'Arial, sans-serif',\r\n//             margin: 0,\r\n//             padding: 0,\r\n//             overflowX: 'hidden'\r\n//         }}>\r\n//             <div\r\n//                 style={{\r\n//                     display: \"grid\",\r\n//                     gridTemplateColumns: \"minmax(240px, 280px) 1fr\",\r\n//                     minHeight: \"100vh\",\r\n//                 }}\r\n//             >\r\n//                 {/* 输入面板 */}\r\n//                 <div\r\n//                     style={{\r\n//                         background: \"rgba(0, 0, 0, 0.6)\",\r\n//                         boxShadow: \"1px 0 3px rgba(0, 0, 0, 0.3)\",\r\n//                         overflowY: \"auto\",\r\n//                         position: \"fixed\" as const,\r\n//                         top: \"2vw\",\r\n//                         left: \"2vw\",\r\n//                         borderRadius: \"8px\",\r\n//                         zIndex: 1000,\r\n//                         width: \"20vw\", // ← 自动根据屏幕宽度调整\r\n//                         minWidth: \"120px\", // 保证小屏时不会太小\r\n//                         maxWidth: \"200px\", // 大屏时不会太大\r\n//                         border: \"none\",\r\n//                         padding: \"1vw\", // 自适应内边距\r\n//                         fontSize: \"clamp(12px, 1vw, 16px)\", // 字体随屏幕变化\r\n//                     }}\r\n//                 >\r\n//                     <form\r\n//                         onSubmit={handleSubmit}\r\n//                         style={{ display: \"flex\", flexDirection: \"column\", gap: \"0.8vw\" }}\r\n//                     >\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"latitude\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 纬度\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"number\"\r\n//                                 id=\"latitude\"\r\n//                                 step=\"0.01\"\r\n//                                 required\r\n//                                 placeholder=\"例如：31.35\"\r\n//                                 value={latitude}\r\n//                                 onChange={(e) => setLatitude(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"longitude\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 经度\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"number\"\r\n//                                 id=\"longitude\"\r\n//                                 step=\"0.01\"\r\n//                                 required\r\n//                                 placeholder=\"例如：121.43\"\r\n//                                 value={longitude}\r\n//                                 onChange={(e) => setLongitude(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"date\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 日期\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"date\"\r\n//                                 id=\"date\"\r\n//                                 required\r\n//                                 value={date}\r\n//                                 onChange={(e) => setDate(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"time\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 时间\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"time\"\r\n//                                 id=\"time\"\r\n//                                 required\r\n//                                 value={time}\r\n//                                 onChange={(e) => setTime(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <button\r\n//                             type=\"submit\"\r\n//                             style={{\r\n//                                 padding: \"0.7em\",\r\n//                                 backgroundColor: \"#6b55b4\",\r\n//                                 color: \"white\",\r\n//                                 border: \"none\",\r\n//                                 borderRadius: \"2px\",\r\n//                                 cursor: \"pointer\",\r\n//                                 transition: \"background-color 0.3s\",\r\n//                             }}\r\n//                         >\r\n//                             查询并可视化\r\n//                         </button>\r\n//                     </form>\r\n//                 </div>\r\n\r\n\r\n//                 {/* 结果显示 */}\r\n//                 <div id=\"result\" style={{\r\n//                     position: 'fixed' as const,\r\n//                     top: '20px',\r\n//                     right: '20px',\r\n//                     width: '220px',\r\n//                     padding: '10px',\r\n//                     background: 'rgba(0, 0, 0, 0.3)',\r\n//                     borderRadius: '10px',\r\n//                     boxShadow: '0 2px 4px rgba(0, 0, 0, 0.2)',\r\n//                     color: 'white',\r\n//                     fontSize: '0.9rem'\r\n//                 }} dangerouslySetInnerHTML={{ __html: result }} />\r\n\r\n//                 {/* 可视化面板 */}\r\n//                 <div ref={containerRef} className=\"visualization-panel\" style={{\r\n//                     position: 'relative' as const,\r\n//                     background: '#000',\r\n//                     overflow: 'hidden',\r\n//                     gridColumn: '1 / -1'\r\n//                 }}>\r\n//                     <canvas ref={canvasRef} id=\"threeCanvas\" />\r\n//                     <div id=\"info\" style={{\r\n//                         position: 'absolute',\r\n//                         top: '225px',\r\n//                         right: '300px',\r\n//                         color: 'yellow',\r\n//                         fontFamily: 'monospace',\r\n//                         fontSize: '14px',\r\n//                         whiteSpace: 'pre' as const,\r\n//                         textShadow: '1px 1px 1px black',\r\n//                         background: 'rgba(0, 0, 0, 0.2)',\r\n//                         padding: '0.1rem 0.1rem',\r\n//                         borderRadius: '6px',\r\n//                         zIndex: 1000\r\n//                     }}></div>\r\n//                 </div>\r\n\r\n//                 {/* 天体轨迹控制 */}\r\n//                 <div id=\"celestialControls\" style={{\r\n//                     position: 'fixed' as const,\r\n//                     right: '8px',\r\n//                     top: '15%',\r\n//                     transform: 'translateY(-50%)',\r\n//                     background: 'rgba(0, 0, 0, 0.7)',\r\n//                     padding: '8px',\r\n//                     borderRadius: '8px',\r\n//                     display: 'flex',\r\n//                     flexDirection: 'column' as const,\r\n//                     gap: '8px',\r\n//                     zIndex: 1000,\r\n//                     border: '1px solid rgba(255, 255, 255, 0.1)'\r\n//                 }}>\r\n//                     <div className=\"control-title\" style={{\r\n//                         color: '#fff',\r\n//                         fontWeight: 'bold',\r\n//                         marginBottom: '5px',\r\n//                         borderBottom: '1px solid rgba(255, 255, 255, 0.2)',\r\n//                         paddingBottom: '5px'\r\n//                     }}></div>\r\n\r\n//                     {[\r\n//                         { id: 'sun', name: '太阳', color: '#ffff00' },\r\n//                         { id: 'moon', name: '月亮', color: '#c0c0c0' },\r\n//                         { id: 'mercury', name: '水星', color: '#498bff' },\r\n//                         { id: 'venus', name: '金星', color: '#cec2a8' },\r\n//                         { id: 'mars', name: '火星', color: '#ff5153' },\r\n//                         { id: 'jupiter', name: '木星', color: '#60b633' },\r\n//                         { id: 'saturn', name: '土星', color: '#f4d727' }\r\n//                     ].map((body) => (\r\n//                         <label\r\n//                             key={body.id}\r\n//                             data-celestial={body.id}\r\n//                             style={{\r\n//                                 color: body.color,\r\n//                                 fontFamily: 'Arial, sans-serif',\r\n//                                 fontSize: '12px',\r\n//                                 display: 'flex',\r\n//                                 alignItems: 'center',\r\n//                                 gap: '4px',\r\n//                                 cursor: 'pointer'\r\n//                             }}\r\n//                         >\r\n//                             <input\r\n//                                 type=\"checkbox\"\r\n//                                 className=\"celestial-checkbox\"\r\n//                                 data-celestial={body.id}\r\n//                                 defaultChecked={body.id === 'sun' || body.id === 'moon'}\r\n//                             />\r\n//                             {body.name}\r\n//                         </label>\r\n//                     ))}\r\n\r\n//                 </div>\r\n//             </div>\r\n//             <style>{`\r\n//         * {\r\n//           box-sizing: border-box;\r\n//         }\r\n\r\n//         canvas {\r\n//           display: block;\r\n//         }\r\n\r\n//         .label {\r\n//           color: #ffffff;\r\n//           font-family: sans-serif;\r\n//           padding: 2px;\r\n//           background: rgba(0, 0, 0, 0.6);\r\n//         }\r\n\r\n//         .button:hover {\r\n//           background: #5b4aa3;\r\n//         }\r\n\r\n//         .footer svg {\r\n//           color: white;\r\n//           font-size: 24px;\r\n//         }\r\n\r\n//         .back-btn:hover,\r\n//         .location-btn:hover,\r\n//         .calendar-btn:hover,\r\n//         .moon-btn:hover,\r\n//         .data-btn:hover,\r\n//         .index-btn:hover {\r\n//           opacity: 0.8;\r\n//         }\r\n\r\n//         .time-marker {\r\n//           font-size: 12px;\r\n//           background: rgba(0, 0, 0, 0);\r\n//           padding: 2px 5px;\r\n//           border-radius: 3px;\r\n//           transform: translateY(-10px);\r\n//           white-space: nowrap;\r\n//           color: #ffb347;\r\n//           font-weight: bold;\r\n//         }\r\n\r\n//         .intersection-label {\r\n//           color: #ff0000;\r\n//           font-size: 14px;\r\n//           font-weight: bold;\r\n//         }\r\n\r\n//         .marker-point {\r\n//           border-radius: 50%;\r\n//           width: 6px;\r\n//           height: 6px;\r\n//           background-color: #ffa500;\r\n//         }\r\n\r\n//         .intersection-point {\r\n//           border-radius: 50%;\r\n//           width: 8px;\r\n//           height: 8px;\r\n//           background-color: #ff0000;\r\n//         }\r\n\r\n//         .moon-time-marker {\r\n//           font-size: 12px;\r\n//           background: rgba(0, 0, 0, 0);\r\n//           padding: 2px 5px;\r\n//           border-radius: 3px;\r\n//           transform: translateY(-10px);\r\n//           white-space: nowrap;\r\n//           color: #20b2aa !important;\r\n//           font-weight: bold;\r\n//         }\r\n\r\n//         .moon-intersection-label {\r\n//           color: #044343 !important;\r\n//           font-size: 13px;\r\n//           text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);\r\n//         }\r\n\r\n//         .nav-button {\r\n//           background: rgba(107, 85, 180, 0.2);\r\n//           border: none;\r\n//           border-radius: 20px;\r\n//           padding: 10px;\r\n//           cursor: pointer;\r\n//           transition: all 0.3s ease;\r\n//           display: flex;\r\n//           align-items: center;\r\n//           justify-content: center;\r\n//           min-width: 80px;\r\n//         }\r\n\r\n//         .nav-button:hover {\r\n//           background: rgba(255, 255, 255, 0.9);\r\n//           transform: scale(1.1);\r\n//         }\r\n\r\n//         @media (max-width: 768px) {\r\n//           .input-panel, #result {\r\n//             width: calc(40%);\r\n//             font-size: 0.9rem;\r\n//           }\r\n\r\n//           .input-panel h2 {\r\n//             font-size: 1.2rem;\r\n//             margin-bottom: 1rem;\r\n//           }\r\n\r\n//           .container {\r\n//             grid-template-columns: 1fr;\r\n//           }\r\n\r\n//           .input-panel {\r\n//             width: calc(50%);\r\n//             max-height: 60vh;\r\n//           }\r\n\r\n//           .visualization-panel {\r\n//             height: 100vh;\r\n//           }\r\n//         }\r\n//       `}</style>\r\n//         </div>\r\n\r\n//     );\r\n// };\r\n\r\n// export default AstronomyVisualization;\r\n\r\n// \"use client\";\r\n\r\n// import { useEffect, useRef, useState } from \"react\";\r\n// import * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n// import { CSS2DRenderer, CSS2DObject } from \"three/examples/jsm/renderers/CSS2DRenderer\";\r\n// import BottomNav from \"@/components/Footer/BottomNav\";\r\n\r\n// export default function ZodiacPage() {\r\n//     const containerRef = useRef<HTMLDivElement | null>(null);\r\n//     const animRef = useRef<number | null>(null);\r\n//     const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n//     const labelRendererRef = useRef<CSS2DRenderer | null>(null);\r\n//     const controlsRef = useRef<OrbitControls | null>(null);\r\n//     const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n//     useEffect(() => {\r\n//         if (!containerRef.current) return;\r\n//         const container = containerRef.current;\r\n\r\n//         // --- 如果页面已有旧的 canvas / labelRenderer DOM，先移除它们（避免重复附加） ---\r\n//         const EXISTING_CANVAS_ID = \"threejs-canvas\";\r\n//         const EXISTING_LABELS_ID = \"threejs-labels\";\r\n\r\n//         const removeIfExist = (id: string) => {\r\n//             const el = container.querySelector(`#${id}`);\r\n//             if (el) el.remove();\r\n//         };\r\n//         removeIfExist(EXISTING_CANVAS_ID);\r\n//         removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//         // --- Scene, Camera, Renderer ---\r\n//         const scene = new THREE.Scene();\r\n//         const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n//         const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n//         renderer.setSize(window.innerWidth, window.innerHeight);\r\n//         renderer.setClearColor(0x000000);\r\n//         // 给 canvas 一个稳定 id（方便清理）\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n//         rendererRef.current = renderer;\r\n\r\n//         // --- CSS2DRenderer for labels ---\r\n//         const labelRenderer = new CSS2DRenderer();\r\n//         labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         // append renderer + labelRenderer (顺序无关，label 在上)\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n\r\n//         labelRenderer.domElement.style.position = \"absolute\";\r\n//         labelRenderer.domElement.style.top = \"0\";\r\n//         labelRenderer.domElement.style.pointerEvents = \"none\"; // 让事件穿透到 canvas\r\n//         labelRenderer.domElement.id = EXISTING_LABELS_ID;\r\n//         container.appendChild(labelRenderer.domElement);\r\n\r\n//         // bind controls to canvas\r\n//         const controls = new OrbitControls(camera, renderer.domElement);\r\n//         controls.enableDamping = true;\r\n//         controls.dampingFactor = 0.05;\r\n\r\n\r\n//         // --- Star field ---\r\n//         const starsGeometry = new THREE.BufferGeometry();\r\n//         const starsCount = 2000;\r\n//         const positions = new Float32Array(starsCount * 3);\r\n//         for (let i = 0; i < starsCount * 3; i++) {\r\n//             positions[i] = (Math.random() - 0.5) * 100;\r\n//         }\r\n//         starsGeometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\r\n//         const starField = new THREE.Points(\r\n//             starsGeometry,\r\n//             new THREE.PointsMaterial({ size: 0.1, transparent: true })\r\n//         );\r\n//         scene.add(starField);\r\n\r\n//         // --- Load Textures ---\r\n//         const textureLoader = new THREE.TextureLoader();\r\n//         const sunTexture = textureLoader.load(\"/pho/sun1.png\");\r\n//         const earthTexture = textureLoader.load(\"/pho/earth.png\");\r\n\r\n//         const constellationImages = [\r\n//             \"libra.png\", \"scorpio.png\", \"sagittarius.png\", \"capricorn.png\",\r\n//             \"aquarius.png\", \"pisces.png\", \"aries.png\", \"taurus.png\",\r\n//             \"gemini.png\", \"cancer.png\", \"leo.png\", \"virgo.png\"\r\n//         ];\r\n//         const loadedConstellationTextures = constellationImages.map(img => textureLoader.load(`/pho/${img}`));\r\n\r\n//         // --- Solar System Group ---\r\n//         const solarSystem = new THREE.Group();\r\n//         scene.add(solarSystem);\r\n\r\n//         // --- Sun ---\r\n//         const sun = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.2, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: sunTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(sun);\r\n\r\n//         // --- Earth ---\r\n//         const earth = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.1, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: earthTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(earth);\r\n\r\n//         // --- Earth-Sun line ---\r\n//         const lineMaterial = new THREE.LineDashedMaterial({ dashSize: 0.2, gapSize: 0.1 });\r\n//         const lineGeometry = new THREE.BufferGeometry();\r\n//         const linePositions = new Float32Array(6);\r\n//         lineGeometry.setAttribute(\"position\", new THREE.BufferAttribute(linePositions, 3));\r\n//         const earthSunLine = new THREE.Line(lineGeometry, lineMaterial);\r\n//         earthSunLine.computeLineDistances();\r\n//         solarSystem.add(earthSunLine);\r\n\r\n//         // --- Orbit ---\r\n//         const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x4169e1, transparent: true, opacity: 0.8 });\r\n//         const orbit = new THREE.Mesh(new THREE.TorusGeometry(1, 0.007, 16, 200), orbitMaterial);\r\n//         solarSystem.add(orbit);\r\n\r\n//         // --- Zodiac Labels + Images ---\r\n//         const zodiacNames = [\"天秤宫\", \"天蝎宫\", \"射手宫\", \"摩羯宫\", \"水瓶宫\", \"双鱼宫\", \"白羊宫\", \"金牛宫\", \"双子宫\", \"巨蟹宫\", \"狮子宫\", \"处女宫\"];\r\n//         const zodiacPlanes: THREE.Mesh[] = [];\r\n\r\n//         for (let i = 0; i < 12; i++) {\r\n//             const angle = (i * Math.PI * 2) / 12;\r\n//             const radius = 2.2;\r\n//             const tex = loadedConstellationTextures[i];\r\n//             const mat = new THREE.MeshBasicMaterial({ map: tex, transparent: true, side: THREE.DoubleSide });\r\n//             const plane = new THREE.Mesh(new THREE.PlaneGeometry(0.6, 0.6), mat);\r\n//             plane.position.set(Math.cos(angle) * radius, Math.sin(angle) * radius, 0);\r\n//             solarSystem.add(plane);\r\n//             zodiacPlanes.push(plane);\r\n\r\n//             // --- Text label (CSS2DObject) ---\r\n//             const div = document.createElement(\"div\");\r\n//             div.className = \"label\";\r\n//             div.textContent = zodiacNames[i];\r\n//             div.style.color = \"white\";\r\n//             div.style.fontSize = \"14px\";\r\n//             div.style.fontWeight = \"bold\";\r\n//             // pointerEvents none (不拦截鼠标)\r\n//             div.style.pointerEvents = \"none\";\r\n//             const label = new CSS2DObject(div);\r\n//             label.position.set(Math.cos(angle) * (radius + 0.5), Math.sin(angle) * (radius + 0.5), 0);\r\n//             solarSystem.add(label);\r\n//         }\r\n\r\n//         // 整体上移\r\n//         solarSystem.position.y = 1.5;\r\n\r\n//         // --- Julian Date & position calculations ---\r\n//         const julianDate = (date: Date) => {\r\n//             const year = date.getFullYear();\r\n//             const month = date.getMonth() + 1;\r\n//             const day = date.getDate();\r\n//             const a = Math.floor((14 - month) / 12);\r\n//             const y = year + 4800 - a;\r\n//             const m = month + 12 * a - 3;\r\n//             return day + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045 + 0.5;\r\n//         };\r\n\r\n//         const calculatePositions = (date: Date) => {\r\n//             const JD = julianDate(date);\r\n//             const J2000 = 2451545.0;\r\n//             const n = JD - J2000;\r\n//             const L0 = (280.46646 + 0.98564736 * n) % 360;\r\n//             const M = (357.52911 + 0.98560028 * n) % 360;\r\n//             const M_rad = (M * Math.PI) / 180;\r\n//             const C = (1.914602 - 0.004817 * (n / 36525) - 0.000014 * (n / 36525) ** 2) * Math.sin(M_rad) +\r\n//                 (0.019993 - 0.000101 * (n / 36525)) * Math.sin(2 * M_rad) + 0.000289 * Math.sin(3 * M_rad);\r\n//             const L_E = (L0 + C) % 360;\r\n//             const L_S = (L_E + 180) % 360;\r\n//             return {\r\n//                 earthLongitude: L_E,\r\n//                 sunLongitude: L_S,\r\n//                 earthX: Math.cos(L_E * Math.PI / 180),\r\n//                 earthY: Math.sin(L_E * Math.PI / 180)\r\n//             };\r\n//         };\r\n\r\n//         const updateEarthAndLine = (date: Date) => {\r\n//             const pos = calculatePositions(date);\r\n//             earth.position.set(pos.earthX, pos.earthY, 0);\r\n\r\n//             const sunDir = new THREE.Vector3(-pos.earthX, -pos.earthY, 0).normalize().multiplyScalar(3);\r\n//             const arr = (earthSunLine.geometry.attributes.position.array as Float32Array);\r\n//             arr[0] = pos.earthX; arr[1] = pos.earthY; arr[2] = 0;\r\n//             arr[3] = sunDir.x; arr[4] = sunDir.y; arr[5] = 0;\r\n//             earthSunLine.geometry.attributes.position.needsUpdate = true;\r\n//             earthSunLine.computeLineDistances();\r\n\r\n//             const info = document.getElementById(\"info\");\r\n//             if (info) {\r\n//                 const zodiacIndex = Math.floor(pos.sunLongitude / 30) % 12;\r\n//                 info.textContent = `观测日期: ${date.toLocaleDateString()}\\n地球黄经: ${pos.earthLongitude.toFixed(2)}°\\n太阳视黄经: ${pos.sunLongitude.toFixed(2)}°\\n太阳位于: ${zodiacNames[zodiacIndex]}`;\r\n//             }\r\n//         };\r\n\r\n//         // 把 update 方法挂到 window（谨慎用，仅为兼容你原逻辑）\r\n//         // @ts-ignore\r\n//         window.updateEarthAndLine = updateEarthAndLine;\r\n\r\n//         camera.position.set(0, 0, 9);\r\n//         camera.lookAt(0, 0, 0);\r\n//         updateEarthAndLine(currentDate);\r\n\r\n//         // --- Animation loop ---\r\n//         const animate = () => {\r\n//             animRef.current = requestAnimationFrame(animate);\r\n//             controls.update();\r\n//             zodiacPlanes.forEach(plane => plane.lookAt(camera.position));\r\n//             renderer.render(scene, camera);\r\n//             labelRenderer.render(scene, camera);\r\n//         };\r\n//         animate();\r\n\r\n//         // --- Handle resize ---\r\n//         const onResize = () => {\r\n//             camera.aspect = window.innerWidth / window.innerHeight;\r\n//             camera.updateProjectionMatrix();\r\n//             renderer.setSize(window.innerWidth, window.innerHeight);\r\n//             labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         };\r\n//         window.addEventListener(\"resize\", onResize);\r\n\r\n//         // --- Cleanup on unmount ---\r\n//         return () => {\r\n//             window.removeEventListener(\"resize\", onResize);\r\n\r\n//             // cancel animation\r\n//             if (animRef.current) {\r\n//                 cancelAnimationFrame(animRef.current);\r\n//                 animRef.current = null;\r\n//             }\r\n\r\n//             // dispose controls\r\n//             try {\r\n//                 controls.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             // remove global attach\r\n//             // @ts-ignore\r\n//             if (window.updateEarthAndLine) delete window.updateEarthAndLine;\r\n\r\n//             // remove appended DOM nodes if still present\r\n//             removeIfExist(EXISTING_CANVAS_ID);\r\n//             removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//             // dispose geometries / materials to avoid memory leaks\r\n//             try {\r\n//                 starField.geometry.dispose();\r\n//                 // dispose textures/materials we created\r\n//                 sun.geometry.dispose();\r\n//                 (sun.material as THREE.Material).dispose();\r\n//                 earth.geometry.dispose();\r\n//                 (earth.material as THREE.Material).dispose();\r\n//                 orbit.geometry.dispose();\r\n//                 (orbit.material as THREE.Material).dispose();\r\n//                 lineGeometry.dispose();\r\n//                 (lineMaterial as THREE.Material).dispose();\r\n//                 // dispose loaded constellation textures and materials\r\n//                 loadedConstellationTextures.forEach((t) => { if (t) t.dispose && (t as any).dispose(); });\r\n//             } catch (e) {\r\n//                 // 某些对象可能已被 GC 或不同实现，忽略错误\r\n//             }\r\n\r\n//             // ensure renderer disposed\r\n//             try {\r\n//                 renderer.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             rendererRef.current = null;\r\n//             labelRendererRef.current = null;\r\n//             controlsRef.current = null;\r\n//         };\r\n//         // eslint-disable-next-line react-hooks/exhaustive-deps\r\n//     }, []); // 仅在挂载/卸载时运行\r\n\r\n//     const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n//         const val = e.target.value;\r\n//         if (!val) return;\r\n//         const newDate = new Date(val);\r\n//         setCurrentDate(newDate);\r\n//         const updateEvent = new CustomEvent(\"updateEarth\", { detail: newDate });\r\n//         window.dispatchEvent(updateEvent);\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         const listener = (e: any) => {\r\n//             const date: Date = e.detail;\r\n//             // @ts-ignore\r\n//             window.updateEarthAndLine && window.updateEarthAndLine(date);\r\n//         };\r\n//         window.addEventListener(\"updateEarth\", listener);\r\n//         return () => window.removeEventListener(\"updateEarth\", listener);\r\n//     }, []);\r\n\r\n//     const formatDateInput = (date: Date) => {\r\n//         const year = date.getFullYear();\r\n//         const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n//         const day = String(date.getDate()).padStart(2, \"0\");\r\n//         const hours = String(date.getHours()).padStart(2, \"0\");\r\n//         const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n//         return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n//     };\r\n\r\n//     return (\r\n//         <div className=\"bg-black text-white min-h-screen flex flex-col\">\r\n//             <div className=\"relative z-10 flex flex-col h-screen\">\r\n//                 <div ref={containerRef} style={{ width: \"100vw\", height: \"100vh\", position: \"relative\" }}>\r\n//                     <div id=\"info\" style={{ position: \"absolute\", top: \"10px\", left: \"10px\", color: \"yellow\", fontFamily: \"monospace\", fontSize: \"14px\", whiteSpace: \"pre\", textShadow: \"1px 1px 1px black\" }} />\r\n//                     <div style={{ position: \"absolute\", top: \"10px\", right: \"10px\", background: \"rgba(0,0,0,0.6)\", padding: \"15px\", borderRadius: \"8px\" }}>\r\n//                         <label style={{ color: \"white\", fontSize: \"14px\" }} />\r\n//                         <input type=\"datetime-local\" value={formatDateInput(currentDate)} onChange={handleDateChange} style={{ padding: \"5px\", borderRadius: \"10px\", border: \"1px solid #666\", background: \"rgba(255,255,255,0.9)\" }} />\r\n//                     </div>\r\n//                 </div>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// }\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1876, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/seven-data/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Image from \"next/image\";\r\n\r\n// 定义行星数据接口\r\ninterface PlanetInfo {\r\n    rise: string;\r\n    transit: string;\r\n    set: string;\r\n    declination: string;\r\n}\r\n\r\n// 定义行星数据类型\r\ntype PlanetData = Record<string, PlanetInfo>;\r\n\r\n// ✅ 演示数据\r\nconst demoData: PlanetData = {\r\n    \"太阳\": { rise: \"05 : 11 : 52\", transit: \"12 : 00 : 21\", set: \"18 : 40 : 12\", declination: \"17.582549\" },\r\n    \"月球\": { rise: \"04 : 05 : 23\", transit: \"11 : 12 : 48\", set: \"17 : 54 : 09\", declination: \"19.482000\" },\r\n    \"水星\": { rise: \"05 : 45 : 13\", transit: \"12 : 09 : 42\", set: \"18 : 33 : 21\", declination: \"8.923451\" },\r\n    \"金星\": { rise: \"06 : 15 : 01\", transit: \"12 : 33 : 12\", set: \"18 : 51 : 22\", declination: \"-2.145325\" },\r\n    \"火星\": { rise: \"02 : 12 : 41\", transit: \"09 : 21 : 09\", set: \"16 : 29 : 37\", declination: \"4.231123\" },\r\n    \"木星\": { rise: \"19 : 22 : 15\", transit: \"01 : 55 : 34\", set: \"08 : 28 : 53\", declination: \"-15.678901\" },\r\n    \"土星\": { rise: \"22 : 11 : 34\", transit: \"04 : 35 : 01\", set: \"10 : 58 : 28\", declination: \"-10.234789\" },\r\n};\r\n\r\nexport default function PlanetCalculator() {\r\n    const [formData, setFormData] = useState({\r\n        latitude: \"30.67\",\r\n        longitude: \"104.06\",\r\n        date: \"\",\r\n        time: \"\",\r\n        altitude: \"500\",\r\n    });\r\n\r\n    const [planetsData, setPlanetsData] = useState<PlanetData | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        const now = new Date();\r\n        const dateStr = now.toISOString().split(\"T\")[0];\r\n        const timeStr = now.toTimeString().slice(0, 5);\r\n        setFormData((prev) => ({ ...prev, date: dateStr, time: timeStr }));\r\n        setPlanetsData(demoData);\r\n    }, []);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(\"\");\r\n        setPlanetsData(null);\r\n        try {\r\n            const res = await axios.post(\"/api/planets\", {\r\n                latitude: parseFloat(formData.latitude),\r\n                longitude: parseFloat(formData.longitude),\r\n                date: formData.date,\r\n                time: formData.time,\r\n            });\r\n\r\n            if (res.data && res.data.success) {\r\n                const responseData = res.data.data;\r\n                // ✅ 转换为 demoData 格式\r\n                const formattedData: PlanetData = {};\r\n                for (const planet of Object.keys(responseData)) {\r\n                    const p = responseData[planet];\r\n                    formattedData[planet] = {\r\n                        rise: p.rise || \"-- : -- : --\",\r\n                        transit: p.transit || \"-- : -- : --\",\r\n                        set: p.set || \"-- : -- : --\",\r\n                        declination: p.declination?.toFixed?.(6) || \"0.000000\",\r\n                    };\r\n                }\r\n                setPlanetsData(formattedData);\r\n            } else {\r\n                throw new Error(res.data?.error?.message || \"获取行星数据失败\");\r\n            }\r\n        } catch (err) {\r\n            let errorMessage = \"获取行星数据失败，请稍后再试。\";\r\n            if (axios.isAxiosError(err) && err.response) {\r\n                errorMessage = err.response.data?.error?.message || err.message;\r\n            } else if (err instanceof Error) {\r\n                errorMessage = err.message;\r\n            }\r\n            setError(errorMessage);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative min-h-screen bg-black text-white flex flex-col items-center justify-start pt-4 pb-2 overflow-hidden\">\r\n            {/* 背景 */}\r\n            <div className=\"absolute inset-0 bg-[url('/stars-bg.png')] bg-cover bg-center opacity-40 pointer-events-none\"></div>\r\n\r\n            {/* 输入表单 */}\r\n            <form\r\n                onSubmit={handleSubmit}\r\n                className=\"relative z-10 mt-2 w-[92%] max-w-2xl backdrop-blur-md bg-white/10 border border-white/20 rounded-2xl px-0 py-4 shadow-[0_0_20px_rgba(255,255,255,0.05)] text-sm\"\r\n            >\r\n                <div className=\"flex items-end gap-2\">\r\n                    {/* 左侧 80% 输入框 */}\r\n                    <div className=\"w-4/5 space-y-1 px-3\">\r\n                        {[\r\n                            [\"纬度 Latitude\", \"latitude\"],\r\n                            [\"经度 Longitude\", \"longitude\"],\r\n                            [\"日期 Date\", \"date\"],\r\n                            [\"时间 Time(HH:MM)\", \"time\"],\r\n                            [\"海拔 Altitude\", \"altitude\"],\r\n                        ].map(([label, name]) => (\r\n                            <div key={name}>\r\n                                <label className=\"block text-xs mb-1 opacity-80\">{label}</label>\r\n                                <input\r\n                                    type={name === \"date\" ? \"date\" : name === \"time\" ? \"time\" : \"text\"}\r\n                                    name={name}\r\n                                    value={formData[name as keyof typeof formData] || \"\"}\r\n                                    onChange={handleChange}\r\n                                    className=\"w-full bg-white/10 border border-white/20 rounded-full px-2 py-1.5 text-left text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-400 text-sm\"\r\n                                    required={name !== \"altitude\"}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* 右侧 20% 图片按钮 */}\r\n                    <div className=\"w-1/5 flex justify-center\">\r\n                        <button type=\"submit\" disabled={loading} className=\"p-0 bg-transparent border-none\">\r\n                            <Image\r\n                                src=\"/pho/箭头.png\"\r\n                                alt={loading ? \"计算中...\" : \"开始计算\"}\r\n                                width={80}\r\n                                height={80}\r\n                                className=\"w-full h-auto\"\r\n                            />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n\r\n\r\n            <div className=\"relative z-10 my-2 w-[92%] max-w-md border-t border-white/20\"></div>\r\n            {/* 表头按钮风格 */}\r\n            <div className=\"grid grid-cols-5 gap-2 text-center mb-2\">\r\n                {['行星', '升起', '中天', '落下', '赤纬角'].map((title) => (\r\n                    <div\r\n                        key={title}\r\n                        className=\"bg-[rgb(90,89,122)] text-white text-xs py-1 px-3 rounded-full cursor-default select-none\"\r\n                    >\r\n                        {title}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* 行星数据表 */}\r\n            {planetsData && (\r\n                <div className=\"p-3 text-sm\">\r\n                    <div className=\"space-y-0.5 text-xs text-gray-100\">\r\n                        {Object.entries(planetsData).map(([planet, d]) => (\r\n                            <div\r\n                                key={planet}\r\n                                className=\"grid grid-cols-5 gap-0.5 text-center py-0.5 rounded hover:bg-white/5 transition\"\r\n                            >\r\n                                <span className=\"whitespace-nowrap\">{planet}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.rise}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.transit}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.set}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.declination}°</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n\r\n            {error && (\r\n                <div className=\"z-10 mt-2 text-red-400 bg-red-900/30 px-3 py-1.5 rounded-lg text-sm\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2250, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/zodiac/page.tsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import { useEffect, useRef, useState } from \"react\";\r\n// import * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n// import { CSS2DRenderer, CSS2DObject } from \"three/examples/jsm/renderers/CSS2DRenderer\";\r\n// import BottomNav from \"@/components/Footer/BottomNav\";\r\n\r\n// export default function ZodiacPage() {\r\n//     const containerRef = useRef<HTMLDivElement | null>(null);\r\n//     const animRef = useRef<number | null>(null);\r\n//     const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n//     const labelRendererRef = useRef<CSS2DRenderer | null>(null);\r\n//     const controlsRef = useRef<OrbitControls | null>(null);\r\n//     const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n//     useEffect(() => {\r\n//         if (!containerRef.current) return;\r\n//         const container = containerRef.current;\r\n\r\n//         // --- 如果页面已有旧的 canvas / labelRenderer DOM，先移除它们（避免重复附加） ---\r\n//         const EXISTING_CANVAS_ID = \"threejs-canvas\";\r\n//         const EXISTING_LABELS_ID = \"threejs-labels\";\r\n\r\n//         const removeIfExist = (id: string) => {\r\n//             const el = container.querySelector(`#${id}`);\r\n//             if (el) el.remove();\r\n//         };\r\n//         removeIfExist(EXISTING_CANVAS_ID);\r\n//         removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//         // --- Scene, Camera, Renderer ---\r\n//         const scene = new THREE.Scene();\r\n//         const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n//         const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n//         renderer.setSize(window.innerWidth, window.innerHeight);\r\n//         renderer.setClearColor(0x000000);\r\n//         // 给 canvas 一个稳定 id（方便清理）\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n//         rendererRef.current = renderer;\r\n\r\n//         // --- CSS2DRenderer for labels ---\r\n//         const labelRenderer = new CSS2DRenderer();\r\n//         labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         // append renderer + labelRenderer (顺序无关，label 在上)\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n\r\n//         labelRenderer.domElement.style.position = \"absolute\";\r\n//         labelRenderer.domElement.style.top = \"0\";\r\n//         labelRenderer.domElement.style.pointerEvents = \"none\"; // 让事件穿透到 canvas\r\n//         labelRenderer.domElement.id = EXISTING_LABELS_ID;\r\n//         container.appendChild(labelRenderer.domElement);\r\n\r\n//         // bind controls to canvas\r\n//         const controls = new OrbitControls(camera, renderer.domElement);\r\n//         controls.enableDamping = true;\r\n//         controls.dampingFactor = 0.05;\r\n\r\n\r\n//         // --- Star field ---\r\n//         const starsGeometry = new THREE.BufferGeometry();\r\n//         const starsCount = 2000;\r\n//         const positions = new Float32Array(starsCount * 3);\r\n//         for (let i = 0; i < starsCount * 3; i++) {\r\n//             positions[i] = (Math.random() - 0.5) * 100;\r\n//         }\r\n//         starsGeometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\r\n//         const starField = new THREE.Points(\r\n//             starsGeometry,\r\n//             new THREE.PointsMaterial({ size: 0.1, transparent: true })\r\n//         );\r\n//         scene.add(starField);\r\n\r\n//         // --- Load Textures ---\r\n//         const textureLoader = new THREE.TextureLoader();\r\n//         const sunTexture = textureLoader.load(\"/pho/sun1.png\");\r\n//         const earthTexture = textureLoader.load(\"/pho/earth.png\");\r\n\r\n//         const constellationImages = [\r\n//             \"libra.png\", \"scorpio.png\", \"sagittarius.png\", \"capricorn.png\",\r\n//             \"aquarius.png\", \"pisces.png\", \"aries.png\", \"taurus.png\",\r\n//             \"gemini.png\", \"cancer.png\", \"leo.png\", \"virgo.png\"\r\n//         ];\r\n//         const loadedConstellationTextures = constellationImages.map(img => textureLoader.load(`/pho/${img}`));\r\n\r\n//         // --- Solar System Group ---\r\n//         const solarSystem = new THREE.Group();\r\n//         scene.add(solarSystem);\r\n\r\n//         // --- Sun ---\r\n//         const sun = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.2, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: sunTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(sun);\r\n\r\n//         // --- Earth ---\r\n//         const earth = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.1, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: earthTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(earth);\r\n\r\n//         // --- Earth-Sun line ---\r\n//         const lineMaterial = new THREE.LineDashedMaterial({ dashSize: 0.2, gapSize: 0.1 });\r\n//         const lineGeometry = new THREE.BufferGeometry();\r\n//         const linePositions = new Float32Array(6);\r\n//         lineGeometry.setAttribute(\"position\", new THREE.BufferAttribute(linePositions, 3));\r\n//         const earthSunLine = new THREE.Line(lineGeometry, lineMaterial);\r\n//         earthSunLine.computeLineDistances();\r\n//         solarSystem.add(earthSunLine);\r\n\r\n//         // --- Orbit ---\r\n//         const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x4169e1, transparent: true, opacity: 0.8 });\r\n//         const orbit = new THREE.Mesh(new THREE.TorusGeometry(1, 0.007, 16, 200), orbitMaterial);\r\n//         solarSystem.add(orbit);\r\n\r\n//         // --- Zodiac Labels + Images ---\r\n//         const zodiacNames = [\"天秤宫\", \"天蝎宫\", \"射手宫\", \"摩羯宫\", \"水瓶宫\", \"双鱼宫\", \"白羊宫\", \"金牛宫\", \"双子宫\", \"巨蟹宫\", \"狮子宫\", \"处女宫\"];\r\n//         const zodiacPlanes: THREE.Mesh[] = [];\r\n\r\n//         for (let i = 0; i < 12; i++) {\r\n//             const angle = (i * Math.PI * 2) / 12;\r\n//             const radius = 2.2;\r\n//             const tex = loadedConstellationTextures[i];\r\n//             const mat = new THREE.MeshBasicMaterial({ map: tex, transparent: true, side: THREE.DoubleSide });\r\n//             const plane = new THREE.Mesh(new THREE.PlaneGeometry(0.6, 0.6), mat);\r\n//             plane.position.set(Math.cos(angle) * radius, Math.sin(angle) * radius, 0);\r\n//             solarSystem.add(plane);\r\n//             zodiacPlanes.push(plane);\r\n\r\n//             // --- Text label (CSS2DObject) ---\r\n//             const div = document.createElement(\"div\");\r\n//             div.className = \"label\";\r\n//             div.textContent = zodiacNames[i];\r\n//             div.style.color = \"white\";\r\n//             div.style.fontSize = \"14px\";\r\n//             div.style.fontWeight = \"bold\";\r\n//             // pointerEvents none (不拦截鼠标)\r\n//             div.style.pointerEvents = \"none\";\r\n//             const label = new CSS2DObject(div);\r\n//             label.position.set(Math.cos(angle) * (radius + 0.5), Math.sin(angle) * (radius + 0.5), 0);\r\n//             solarSystem.add(label);\r\n//         }\r\n\r\n//         // 整体上移\r\n//         solarSystem.position.y = 1.5;\r\n\r\n//         // --- Julian Date & position calculations ---\r\n//         const julianDate = (date: Date) => {\r\n//             const year = date.getFullYear();\r\n//             const month = date.getMonth() + 1;\r\n//             const day = date.getDate();\r\n//             const a = Math.floor((14 - month) / 12);\r\n//             const y = year + 4800 - a;\r\n//             const m = month + 12 * a - 3;\r\n//             return day + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045 + 0.5;\r\n//         };\r\n\r\n//         const calculatePositions = (date: Date) => {\r\n//             const JD = julianDate(date);\r\n//             const J2000 = 2451545.0;\r\n//             const n = JD - J2000;\r\n//             const L0 = (280.46646 + 0.98564736 * n) % 360;\r\n//             const M = (357.52911 + 0.98560028 * n) % 360;\r\n//             const M_rad = (M * Math.PI) / 180;\r\n//             const C = (1.914602 - 0.004817 * (n / 36525) - 0.000014 * (n / 36525) ** 2) * Math.sin(M_rad) +\r\n//                 (0.019993 - 0.000101 * (n / 36525)) * Math.sin(2 * M_rad) + 0.000289 * Math.sin(3 * M_rad);\r\n//             const L_E = (L0 + C) % 360;\r\n//             const L_S = (L_E + 180) % 360;\r\n//             return {\r\n//                 earthLongitude: L_E,\r\n//                 sunLongitude: L_S,\r\n//                 earthX: Math.cos(L_E * Math.PI / 180),\r\n//                 earthY: Math.sin(L_E * Math.PI / 180)\r\n//             };\r\n//         };\r\n\r\n//         const updateEarthAndLine = (date: Date) => {\r\n//             const pos = calculatePositions(date);\r\n//             earth.position.set(pos.earthX, pos.earthY, 0);\r\n\r\n//             const sunDir = new THREE.Vector3(-pos.earthX, -pos.earthY, 0).normalize().multiplyScalar(3);\r\n//             const arr = (earthSunLine.geometry.attributes.position.array as Float32Array);\r\n//             arr[0] = pos.earthX; arr[1] = pos.earthY; arr[2] = 0;\r\n//             arr[3] = sunDir.x; arr[4] = sunDir.y; arr[5] = 0;\r\n//             earthSunLine.geometry.attributes.position.needsUpdate = true;\r\n//             earthSunLine.computeLineDistances();\r\n\r\n//             const info = document.getElementById(\"info\");\r\n//             if (info) {\r\n//                 const zodiacIndex = Math.floor(pos.sunLongitude / 30) % 12;\r\n//                 info.textContent = `观测日期: ${date.toLocaleDateString()}\\n地球黄经: ${pos.earthLongitude.toFixed(2)}°\\n太阳视黄经: ${pos.sunLongitude.toFixed(2)}°\\n太阳位于: ${zodiacNames[zodiacIndex]}`;\r\n//             }\r\n//         };\r\n\r\n//         // 把 update 方法挂到 window（谨慎用，仅为兼容你原逻辑）\r\n//         // @ts-ignore\r\n//         window.updateEarthAndLine = updateEarthAndLine;\r\n\r\n//         camera.position.set(0, 0, 9);\r\n//         camera.lookAt(0, 0, 0);\r\n//         updateEarthAndLine(currentDate);\r\n\r\n//         // --- Animation loop ---\r\n//         const animate = () => {\r\n//             animRef.current = requestAnimationFrame(animate);\r\n//             controls.update();\r\n//             zodiacPlanes.forEach(plane => plane.lookAt(camera.position));\r\n//             renderer.render(scene, camera);\r\n//             labelRenderer.render(scene, camera);\r\n//         };\r\n//         animate();\r\n\r\n//         // --- Handle resize ---\r\n//         const onResize = () => {\r\n//             camera.aspect = window.innerWidth / window.innerHeight;\r\n//             camera.updateProjectionMatrix();\r\n//             renderer.setSize(window.innerWidth, window.innerHeight);\r\n//             labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         };\r\n//         window.addEventListener(\"resize\", onResize);\r\n\r\n//         // --- Cleanup on unmount ---\r\n//         return () => {\r\n//             window.removeEventListener(\"resize\", onResize);\r\n\r\n//             // cancel animation\r\n//             if (animRef.current) {\r\n//                 cancelAnimationFrame(animRef.current);\r\n//                 animRef.current = null;\r\n//             }\r\n\r\n//             // dispose controls\r\n//             try {\r\n//                 controls.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             // remove global attach\r\n//             // @ts-ignore\r\n//             if (window.updateEarthAndLine) delete window.updateEarthAndLine;\r\n\r\n//             // remove appended DOM nodes if still present\r\n//             removeIfExist(EXISTING_CANVAS_ID);\r\n//             removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//             // dispose geometries / materials to avoid memory leaks\r\n//             try {\r\n//                 starField.geometry.dispose();\r\n//                 // dispose textures/materials we created\r\n//                 sun.geometry.dispose();\r\n//                 (sun.material as THREE.Material).dispose();\r\n//                 earth.geometry.dispose();\r\n//                 (earth.material as THREE.Material).dispose();\r\n//                 orbit.geometry.dispose();\r\n//                 (orbit.material as THREE.Material).dispose();\r\n//                 lineGeometry.dispose();\r\n//                 (lineMaterial as THREE.Material).dispose();\r\n//                 // dispose loaded constellation textures and materials\r\n//                 loadedConstellationTextures.forEach((t) => { if (t) t.dispose && (t as any).dispose(); });\r\n//             } catch (e) {\r\n//                 // 某些对象可能已被 GC 或不同实现，忽略错误\r\n//             }\r\n\r\n//             // ensure renderer disposed\r\n//             try {\r\n//                 renderer.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             rendererRef.current = null;\r\n//             labelRendererRef.current = null;\r\n//             controlsRef.current = null;\r\n//         };\r\n//         // eslint-disable-next-line react-hooks/exhaustive-deps\r\n//     }, []); // 仅在挂载/卸载时运行\r\n\r\n//     const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n//         const val = e.target.value;\r\n//         if (!val) return;\r\n//         const newDate = new Date(val);\r\n//         setCurrentDate(newDate);\r\n//         const updateEvent = new CustomEvent(\"updateEarth\", { detail: newDate });\r\n//         window.dispatchEvent(updateEvent);\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         const listener = (e: any) => {\r\n//             const date: Date = e.detail;\r\n//             // @ts-ignore\r\n//             window.updateEarthAndLine && window.updateEarthAndLine(date);\r\n//         };\r\n//         window.addEventListener(\"updateEarth\", listener);\r\n//         return () => window.removeEventListener(\"updateEarth\", listener);\r\n//     }, []);\r\n\r\n//     const formatDateInput = (date: Date) => {\r\n//         const year = date.getFullYear();\r\n//         const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n//         const day = String(date.getDate()).padStart(2, \"0\");\r\n//         const hours = String(date.getHours()).padStart(2, \"0\");\r\n//         const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n//         return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n//     };\r\n\r\n//     return (\r\n//         <div className=\"bg-black text-white min-h-screen flex flex-col\">\r\n//             <div className=\"relative z-10 flex flex-col h-screen\">\r\n//                 <div ref={containerRef} style={{ width: \"100vw\", height: \"100vh\", position: \"relative\" }}>\r\n//                     <div id=\"info\" style={{ position: \"absolute\", top: \"10px\", left: \"10px\", color: \"yellow\", fontFamily: \"monospace\", fontSize: \"14px\", whiteSpace: \"pre\", textShadow: \"1px 1px 1px black\" }} />\r\n//                     <div style={{ position: \"absolute\", top: \"10px\", right: \"10px\", background: \"rgba(0,0,0,0.6)\", padding: \"15px\", borderRadius: \"8px\" }}>\r\n//                         <label style={{ color: \"white\", fontSize: \"14px\" }} />\r\n//                         <input type=\"datetime-local\" value={formatDateInput(currentDate)} onChange={handleDateChange} style={{ padding: \"5px\", borderRadius: \"10px\", border: \"1px solid #666\", background: \"rgba(255,255,255,0.9)\" }} />\r\n//                     </div>\r\n//                 </div>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// }\r\nimport React from \"react\";\r\n\r\nconst ZodiacEmbed: React.FC = () => {\r\n    return (\r\n        <div style={{ width: \"100%\", height: \"100vh\", overflow: \"hidden\" }}>\r\n            <iframe\r\n                src=\"/js/十二宫图.html\"\r\n                title=\"十二宫图\"\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    border: \"none\",\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ZodiacEmbed;\r\n"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,uDAAuD;AACvD,kCAAkC;AAClC,6EAA6E;AAC7E,2FAA2F;AAC3F,yDAAyD;AAEzD,yCAAyC;AACzC,gEAAgE;AAChE,mDAAmD;AACnD,oEAAoE;AACpE,mEAAmE;AACnE,8DAA8D;AAC9D,kEAAkE;AAElE,wBAAwB;AACxB,6CAA6C;AAC7C,kDAAkD;AAElD,uEAAuE;AACvE,uDAAuD;AACvD,uDAAuD;AAEvD,kDAAkD;AAClD,4DAA4D;AAC5D,mCAAmC;AACnC,aAAa;AACb,6CAA6C;AAC7C,6CAA6C;AAE7C,6CAA6C;AAC7C,2CAA2C;AAC3C,6GAA6G;AAC7G,yEAAyE;AACzE,mEAAmE;AACnE,4CAA4C;AAC5C,oCAAoC;AACpC,uDAAuD;AACvD,sDAAsD;AACtD,0CAA0C;AAE1C,8CAA8C;AAC9C,qDAAqD;AACrD,wEAAwE;AACxE,6DAA6D;AAC7D,uDAAuD;AACvD,sDAAsD;AAEtD,gEAAgE;AAChE,oDAAoD;AACpD,kFAAkF;AAClF,4DAA4D;AAC5D,2DAA2D;AAE3D,qCAAqC;AACrC,2EAA2E;AAC3E,yCAAyC;AACzC,yCAAyC;AAGzC,gCAAgC;AAChC,4DAA4D;AAC5D,mCAAmC;AACnC,8DAA8D;AAC9D,qDAAqD;AACrD,0DAA0D;AAC1D,YAAY;AACZ,2FAA2F;AAC3F,8CAA8C;AAC9C,6BAA6B;AAC7B,yEAAyE;AACzE,aAAa;AACb,gCAAgC;AAEhC,mCAAmC;AACnC,2DAA2D;AAC3D,kEAAkE;AAClE,qEAAqE;AAErE,wCAAwC;AACxC,8EAA8E;AAC9E,uEAAuE;AACvE,iEAAiE;AACjE,aAAa;AACb,iHAAiH;AAEjH,wCAAwC;AACxC,iDAAiD;AACjD,kCAAkC;AAElC,yBAAyB;AACzB,sCAAsC;AACtC,qDAAqD;AACrD,kFAAkF;AAClF,aAAa;AACb,gCAAgC;AAEhC,2BAA2B;AAC3B,wCAAwC;AACxC,qDAAqD;AACrD,oFAAoF;AACpF,aAAa;AACb,kCAAkC;AAElC,oCAAoC;AACpC,8FAA8F;AAC9F,2DAA2D;AAC3D,qDAAqD;AACrD,8FAA8F;AAC9F,2EAA2E;AAC3E,+CAA+C;AAC/C,yCAAyC;AAEzC,2BAA2B;AAC3B,mHAAmH;AACnH,mGAAmG;AACnG,kCAAkC;AAElC,4CAA4C;AAC5C,oHAAoH;AACpH,iDAAiD;AAEjD,yCAAyC;AACzC,oDAAoD;AACpD,kCAAkC;AAClC,0DAA0D;AAC1D,gHAAgH;AAChH,oFAAoF;AACpF,yFAAyF;AACzF,sCAAsC;AACtC,wCAAwC;AAExC,kDAAkD;AAClD,yDAAyD;AACzD,uCAAuC;AACvC,gDAAgD;AAChD,yCAAyC;AACzC,2CAA2C;AAC3C,6CAA6C;AAC7C,4CAA4C;AAC5C,gDAAgD;AAChD,kDAAkD;AAClD,yGAAyG;AACzG,sCAAsC;AACtC,YAAY;AAEZ,kBAAkB;AAClB,wCAAwC;AAExC,yDAAyD;AACzD,+CAA+C;AAC/C,+CAA+C;AAC/C,iDAAiD;AACjD,0CAA0C;AAC1C,uDAAuD;AACvD,yCAAyC;AACzC,4CAA4C;AAC5C,kJAAkJ;AAClJ,aAAa;AAEb,uDAAuD;AACvD,2CAA2C;AAC3C,uCAAuC;AACvC,oCAAoC;AACpC,6DAA6D;AAC7D,4DAA4D;AAC5D,iDAAiD;AACjD,8GAA8G;AAC9G,8GAA8G;AAC9G,0CAA0C;AAC1C,6CAA6C;AAC7C,uBAAuB;AACvB,uCAAuC;AACvC,qCAAqC;AACrC,yDAAyD;AACzD,wDAAwD;AACxD,iBAAiB;AACjB,aAAa;AAEb,uDAAuD;AACvD,oDAAoD;AACpD,6DAA6D;AAE7D,2GAA2G;AAC3G,6FAA6F;AAC7F,oEAAoE;AACpE,gEAAgE;AAChE,4EAA4E;AAC5E,mDAAmD;AAEnD,4DAA4D;AAC5D,0BAA0B;AAC1B,8EAA8E;AAC9E,+LAA+L;AAC/L,gBAAgB;AAChB,aAAa;AAEb,gDAAgD;AAChD,wBAAwB;AACxB,0DAA0D;AAE1D,wCAAwC;AACxC,kCAAkC;AAClC,2CAA2C;AAE3C,oCAAoC;AACpC,kCAAkC;AAClC,gEAAgE;AAChE,iCAAiC;AACjC,4EAA4E;AAC5E,8CAA8C;AAC9C,mDAAmD;AACnD,aAAa;AACb,qBAAqB;AAErB,mCAAmC;AACnC,mCAAmC;AACnC,sEAAsE;AACtE,+CAA+C;AAC/C,uEAAuE;AACvE,4EAA4E;AAC5E,aAAa;AACb,uDAAuD;AAEvD,wCAAwC;AACxC,yBAAyB;AACzB,8DAA8D;AAE9D,kCAAkC;AAClC,qCAAqC;AACrC,yDAAyD;AACzD,0CAA0C;AAC1C,gBAAgB;AAEhB,kCAAkC;AAClC,oBAAoB;AACpB,sCAAsC;AACtC,2CAA2C;AAE3C,sCAAsC;AACtC,4BAA4B;AAC5B,+EAA+E;AAE/E,4DAA4D;AAC5D,iDAAiD;AACjD,iDAAiD;AAEjD,sEAAsE;AACtE,oBAAoB;AACpB,gDAAgD;AAChD,2DAA2D;AAC3D,0CAA0C;AAC1C,8DAA8D;AAC9D,4CAA4C;AAC5C,gEAAgE;AAChE,4CAA4C;AAC5C,gEAAgE;AAChE,0CAA0C;AAC1C,8DAA8D;AAC9D,yEAAyE;AACzE,6GAA6G;AAC7G,4BAA4B;AAC5B,4CAA4C;AAC5C,gBAAgB;AAEhB,0CAA0C;AAC1C,oBAAoB;AACpB,sCAAsC;AACtC,2CAA2C;AAE3C,0CAA0C;AAC1C,+CAA+C;AAC/C,0CAA0C;AAC1C,aAAa;AACb,kEAAkE;AAClE,4BAA4B;AAE5B,6EAA6E;AAC7E,sCAAsC;AACtC,4BAA4B;AAC5B,yCAAyC;AACzC,mCAAmC;AACnC,mFAAmF;AACnF,6CAA6C;AAC7C,SAAS;AAET,wBAAwB;AACxB,yCAAyC;AACzC,2CAA2C;AAC3C,4BAA4B;AAC5B,4EAA4E;AAC5E,aAAa;AACb,4DAA4D;AAC5D,4EAA4E;AAC5E,cAAc;AAEd,gDAAgD;AAChD,2CAA2C;AAC3C,sEAAsE;AACtE,+DAA+D;AAC/D,kEAAkE;AAClE,sEAAsE;AACtE,gEAAgE;AAChE,SAAS;AAET,eAAe;AACf,2EAA2E;AAC3E,qEAAqE;AACrE,6GAA6G;AAC7G,oNAAoN;AACpN,8JAA8J;AAC9J,iFAAiF;AACjF,2OAA2O;AAC3O,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,SAAS;AACT,IAAI;;;;;;AAGJ,MAAM,cAAwB;IAC1B,qBACI,6LAAC;QAAI,OAAO;YAAE,OAAO;YAAQ,QAAQ;YAAS,UAAU;QAAS;kBAC7D,cAAA,6LAAC;YACG,KAAI;YACJ,OAAM;YACN,OAAO;gBACH,OAAO;gBACP,QAAQ;gBACR,QAAQ;YACZ;;;;;;;;;;;AAIhB;KAdM;uCAgBS","debugId":null}},
    {"offset": {"line": 2571, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/tibetan-cycle/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState, useCallback, useMemo } from \"react\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function TibetanCyclePage() {\r\n    const baseYear = 2025;\r\n    const [year, setYear] = useState<number>(baseYear);\r\n    const [result, setResult] = useState<string>(\"\");\r\n    const [rotation, setRotation] = useState({ tg: 18, dz: 195 });\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    // 天干地支计算表\r\n    const ganzhiList = useMemo(() => {\r\n        const tiangan = [\"铁\", \"铁\", \"水\", \"水\", \"木\", \"木\", \"火\", \"火\", \"土\", \"土\"];\r\n        const dizhi = [\"虎\", \"兔\", \"龙\", \"蛇\", \"马\", \"羊\", \"猴\", \"鸡\", \"狗\", \"猪\", \"鼠\", \"牛\"];\r\n        const list: string[] = [];\r\n        for (let i = 0; i < 60; i++) {\r\n            list.push(tiangan[(i - 6 + 10) % 10] + dizhi[(i - 2 + 12) % 12]);\r\n        }\r\n        return list;\r\n    }, []);\r\n\r\n    // 年份列表\r\n    const years = useMemo(() => Array.from({ length: 201 }, (_, i) => baseYear - 100 + i), [baseYear]);\r\n\r\n    // 计算干支与旋转角\r\n    const calculate = useCallback((y: number) => {\r\n        const offsetYear = (y - 2025) % 60;\r\n        const dzAngle = -offsetYear * 30;\r\n        const tgAngle = -offsetYear * 36;\r\n        setRotation({\r\n            dz: 240 + 360 + dzAngle,\r\n            tg: -54 + 360 + tgAngle,\r\n        });\r\n        const index = (y + 56 + 60) % 60;\r\n        setResult(`${y} 年是 【${ganzhiList[index]}】年`);\r\n    }, [ganzhiList]);\r\n\r\n    useEffect(() => {\r\n        calculate(year);\r\n    }, [year, calculate]);\r\n\r\n    // 打开下拉时滚动至当前年份顶部\r\n    useEffect(() => {\r\n        if (isOpen && scrollRef.current) {\r\n            const index = years.indexOf(year);\r\n            const itemHeight = 40;\r\n            const top = index * itemHeight;\r\n            setTimeout(() => {\r\n                scrollRef.current!.scrollTo({\r\n                    top: top > 0 ? top : 0,\r\n                    behavior: \"auto\",\r\n                });\r\n            }, 30);\r\n        }\r\n    }, [isOpen, year, years]);\r\n\r\n    // 点击外部关闭\r\n    useEffect(() => {\r\n        const handleClickOutside = (e: MouseEvent) => {\r\n            if (!(e.target as HTMLElement).closest(\".year-selector\")) setIsOpen(false);\r\n        };\r\n        document.addEventListener(\"click\", handleClickOutside);\r\n        return () => document.removeEventListener(\"click\", handleClickOutside);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"bg-black text-white min-h-screen flex flex-col items-center pt-6\">\r\n            <style>{`\r\n                @keyframes fadeInUp {\r\n                    from { opacity: 0; transform: translateY(8px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n                .animate-fadeInUp { animation: fadeInUp 200ms ease-out; }\r\n                .no-scrollbar::-webkit-scrollbar { width: 6px; }\r\n                .no-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 8px; }\r\n            `}</style>\r\n\r\n            {/* 年份选择 */}\r\n            <div className=\"relative mt-4 year-selector\">\r\n                <button\r\n                    onClick={() => setIsOpen((v) => !v)}\r\n                    className={`relative z-10 px-6 py-3 text-xl font-semibold rounded-xl transition-all ${isOpen ? \"opacity-0 pointer-events-none\" : \"opacity-100\"\r\n                        }`}\r\n                >\r\n                    {year}\r\n                    <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 16 16\"\r\n                        className={`inline-block ml-2 text-gray-300 transition-transform duration-300 ${isOpen ? \"rotate-180\" : \"\"\r\n                            }`}\r\n                    >\r\n                        <path\r\n                            d=\"M4 6l4 4 4-4\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            strokeWidth=\"2\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                        />\r\n                    </svg>\r\n                </button>\r\n\r\n                {isOpen && (\r\n                    <div\r\n                        className=\"absolute top-0 left-1/2 -translate-x-1/2 p-[2px] rounded-2xl bg-white/40 border border-white/60 shadow-[0_0_10px_rgba(255,255,255,0.4)] animate-fadeInUp z-20\"\r\n                    >\r\n                        {/* 毛玻璃内部层 */}\r\n                        <div\r\n                            ref={scrollRef}\r\n                            className=\"w-28 h-[200px] rounded-2xl backdrop-blur-md \r\n                            bg-white/10 border border-gray-600/60 shadow-inner \r\n                            text-center overflow-y-auto no-scrollbar\"\r\n                        >\r\n                            {years.map((y) => {\r\n                                const isActive = y === year;\r\n                                return (\r\n                                    <button\r\n                                        key={y}\r\n                                        onClick={() => {\r\n                                            setYear(y);\r\n                                            calculate(y);\r\n                                            setIsOpen(false);\r\n                                        }}\r\n                                        className={`block w-full h-[40px] text-lg transition-all duration-200 \r\n                                            ${isActive ? \"text-blue-400 scale-110\" : \"text-gray-200 scale-105\"\r\n                                            }`}\r\n                                    >\r\n                                        {y}\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* 天干地支旋转盘 */}\r\n            <div className=\"relative mt-8 w-80 h-80\">\r\n                <div\r\n                    className=\"absolute top-0 left-0 w-full h-full\"\r\n                    style={{\r\n                        transform: `rotate(${rotation.dz}deg)`,\r\n                        transition: \"transform 1s ease-out\",\r\n                    }}\r\n                >\r\n                    <Image\r\n                        src=\"/pho/地支.png\"\r\n                        alt=\"地支盘\"\r\n                        width={320}\r\n                        height={320}\r\n                        className=\"w-full h-full select-none pointer-events-none\"\r\n                    />\r\n                </div>\r\n                <div\r\n                    className=\"absolute top-0 left-0 w-full h-full\"\r\n                    style={{\r\n                        transform: `rotate(${rotation.tg}deg)`,\r\n                        transition: \"transform 1s ease-out\",\r\n                    }}\r\n                >\r\n                    <Image\r\n                        src=\"/pho/天干.png\"\r\n                        alt=\"天干盘\"\r\n                        width={320}\r\n                        height={320}\r\n                        className=\"w-full h-full select-none pointer-events-none\"\r\n                    />\r\n                </div>\r\n                <div className=\"absolute top-0 left-0 w-full h-full\">\r\n                    <Image\r\n                        src=\"/pho/指针.png\"\r\n                        alt=\"指针\"\r\n                        width={320}\r\n                        height={320}\r\n                        className=\"w-full h-full select-none pointer-events-none\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* 干支结果 */}\r\n            <div className=\"mt-8 mb-4 text-lg h-[30px] text-center w-full\">\r\n                {result}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2881, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/widgets/WidgetCarousel.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nexport interface WidgetCarouselProps {\n  items: React.ReactNode[];\n  currentIndex: number;\n  onChange: (idx: number) => void;\n  /** 滑动阈值（像素），默认 50 */\n  swipeThreshold?: number;\n}\n\n/**\n * WidgetCarousel\n * - 用途：包装滑动手势与页面指示点，切换传入的 items。\n * - 使用：见 README 里的示例。\n */\nconst WidgetCarousel: React.FC<WidgetCarouselProps> = ({\n  items,\n  currentIndex,\n  onChange,\n  swipeThreshold = 50\n}) => {\n  const touchStartRef = React.useRef<number>(0);\n  const touchEndRef = React.useRef<number>(0);\n\n  const onTouchStart = (e: React.TouchEvent) => {\n    touchEndRef.current = 0;\n    touchStartRef.current = e.targetTouches[0].clientX;\n  };\n\n  const onTouchMove = (e: React.TouchEvent) => {\n    touchEndRef.current = e.targetTouches[0].clientX;\n  };\n\n  const onTouchEnd = () => {\n    const start = touchStartRef.current;\n    const end = touchEndRef.current;\n    if (!start || !end) return;\n    const distance = start - end;\n    if (distance > swipeThreshold) onChange((currentIndex + 1) % items.length);\n    if (distance < -swipeThreshold) onChange((currentIndex - 1 + items.length) % items.length);\n  };\n\n  return (\n    <div className=\"w-full transition-all duration-500 ease-in-out\">\n      {/* 主内容区域 */}\n      <div className=\"relative\">\n        <div\n          className=\"transform transition-all duration-500 ease-out hover:scale-[1.02] hover:shadow-2xl\"\n          onTouchStart={onTouchStart}\n          onTouchMove={onTouchMove}\n          onTouchEnd={onTouchEnd}\n        >\n          {items[currentIndex]}\n        </div>\n        \n        {/* 渐变遮罩效果 */}\n        <div className=\"absolute inset-0 pointer-events-none bg-gradient-to-t from-transparent via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300\"></div>\n      </div>\n\n    </div>\n  );\n};\n\nexport default WidgetCarousel;\n"],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAYA;;;;CAIC,GACD,MAAM,iBAAgD;QAAC,EACrD,KAAK,EACL,YAAY,EACZ,QAAQ,EACR,iBAAiB,EAAE,EACpB;;IACC,MAAM,gBAAgB,6JAAA,CAAA,SAAY,CAAS;IAC3C,MAAM,cAAc,6JAAA,CAAA,SAAY,CAAS;IAEzC,MAAM,eAAe,CAAC;QACpB,YAAY,OAAO,GAAG;QACtB,cAAc,OAAO,GAAG,EAAE,aAAa,CAAC,EAAE,CAAC,OAAO;IACpD;IAEA,MAAM,cAAc,CAAC;QACnB,YAAY,OAAO,GAAG,EAAE,aAAa,CAAC,EAAE,CAAC,OAAO;IAClD;IAEA,MAAM,aAAa;QACjB,MAAM,QAAQ,cAAc,OAAO;QACnC,MAAM,MAAM,YAAY,OAAO;QAC/B,IAAI,CAAC,SAAS,CAAC,KAAK;QACpB,MAAM,WAAW,QAAQ;QACzB,IAAI,WAAW,gBAAgB,SAAS,CAAC,eAAe,CAAC,IAAI,MAAM,MAAM;QACzE,IAAI,WAAW,CAAC,gBAAgB,SAAS,CAAC,eAAe,IAAI,MAAM,MAAM,IAAI,MAAM,MAAM;IAC3F;IAEA,qBACE,6LAAC;QAAI,WAAU;kBAEb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,WAAU;oBACV,cAAc;oBACd,aAAa;oBACb,YAAY;8BAEX,KAAK,CAAC,aAAa;;;;;;8BAItB,6LAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;;AAKvB;GA9CM;KAAA;uCAgDS","debugId":null}},
    {"offset": {"line": 2963, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/EarthNav/EarthNav.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\ninterface EarthNavProps {\r\n    currentPage?: string;\r\n}\r\n\r\nexport default function EarthNav({ currentPage }: EarthNavProps) {\r\n    const pathname = usePathname();\r\n\r\n    // 根据当前路径确定激活状态\r\n    const getActiveTab = () => {\r\n        if (pathname.includes(\"zodiac\")) return \"十二宫\";\r\n        if (pathname.includes(\"seven-stars\")) return \"七星轨迹\";\r\n        if (pathname.includes(\"tibetan-cycle\")) return \"藏历绕迥纪年\";\r\n        return currentPage || \"十二宫\";\r\n    };\r\n\r\n    const activeTab = getActiveTab();\r\n\r\n    const tabs = [\r\n        { name: \"十二宫图\", path: \"/earth?tab=zodiac\" },\r\n        { name: \"七星轨迹\", path: \"/earth?tab=seven-stars\" },\r\n        { name: \"藏历绕迥纪年\", path: \"/earth?tab=tibetan-cycle\" },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"flex justify-center space-x-10 p-6 whitespace-nowrap\">\r\n            {tabs.map((tab) => (\r\n                <Link\r\n                    key={tab.name}\r\n                    href={tab.path}\r\n                    className={`px-3 py-1 rounded-md text-sm transition-all duration-300 ${activeTab === tab.name\r\n                        ? \"bg-blue-600 text-white shadow-md\"\r\n                        : \"bg-gray-700 text-white hover:bg-gray-600\"\r\n                        }`}\r\n                >\r\n                    {tab.name}\r\n                </Link>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AASe,SAAS,SAAS,KAA8B;QAA9B,EAAE,WAAW,EAAiB,GAA9B;;IAC7B,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAE3B,eAAe;IACf,MAAM,eAAe;QACjB,IAAI,SAAS,QAAQ,CAAC,WAAW,OAAO;QACxC,IAAI,SAAS,QAAQ,CAAC,gBAAgB,OAAO;QAC7C,IAAI,SAAS,QAAQ,CAAC,kBAAkB,OAAO;QAC/C,OAAO,eAAe;IAC1B;IAEA,MAAM,YAAY;IAElB,MAAM,OAAO;QACT;YAAE,MAAM;YAAQ,MAAM;QAAoB;QAC1C;YAAE,MAAM;YAAQ,MAAM;QAAyB;QAC/C;YAAE,MAAM;YAAU,MAAM;QAA2B;KACtD;IAED,qBACI,6LAAC;QAAI,WAAU;kBACV,KAAK,GAAG,CAAC,CAAC,oBACP,6LAAC,+JAAA,CAAA,UAAI;gBAED,MAAM,IAAI,IAAI;gBACd,WAAW,AAAC,4DAGP,OAHkE,cAAc,IAAI,IAAI,GACvF,qCACA;0BAGL,IAAI,IAAI;eAPJ,IAAI,IAAI;;;;;;;;;;AAYjC;GAnCwB;;QACH,qIAAA,CAAA,cAAW;;;KADR","debugId":null}},
    {"offset": {"line": 3034, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/FooterBar.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport React, { useState, useEffect } from \"react\";\n\n// 定义导航项类型\ninterface NavItem {\n  href: string;\n  icon: string;\n}\n\n// 自适应 hook - 修复：初始化时立即获取真实窗口宽度\nfunction useWindowWidth(): number {\n  const [width, setWidth] = useState<number>(() => {\n    return 390; // 服务端渲染时的默认值\n  });\n\n  useEffect(() => {\n    // 客户端挂载时再次确认宽度（处理初始化时机问题）\n    setWidth(window.innerWidth);\n\n    function handleResize(): void {\n      setWidth(window.innerWidth);\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return width;\n}\n\nexport default function FooterBar(): React.JSX.Element {\n  const pathname = usePathname();\n  const width = useWindowWidth();\n\n  // 按 390px 基准做比例\n  const scale: number = width / 390;\n  const iconSize: number = 18.5 * scale; // 图标大小\n  const footerHeight: number = 51 * scale; // 整个 footer 高度\n\n  const navItems: NavItem[] = [\n    { href: \"/cal\", icon: \"/cond/cal.png\" },\n    { href: \"/earth\", icon: \"/cond/globe.png\" },\n    { href: \"/chat\", icon: \"/cond/chat.png\" },\n    { href: \"/docs\", icon: \"/cond/book.png\" },\n    { href: \"/user\", icon: \"/cond/user.png\" },\n  ];\n\n  return (\n    <div\n      className=\"bg-gray-900/80 glass-effect border-t border-gray-700\"\n      style={{ height: footerHeight }}\n    >\n      <div className=\"flex justify-around items-center max-w-md mx-auto h-full\">\n        {navItems.map((item: NavItem, idx: number) => {\n          const isActive: boolean = pathname === item.href;\n\n          // 中间\"聊天\"按钮突出显示\n          if (idx === 2) {\n            return (\n              // <Link\n              //       href=\"/chat\"\n              //       className=\"flex flex-col items-center space-y-1 p-2 rounded-lg transition-colors text-white\"\n              //       style={{\n              //           backgroundColor: \"#0051feff\",  // 始终使用这个背景色\n              //       }}\n              //   >\n              //       <Image src=\"/cond/chat.png\" alt=\"聊天\" width={24} height={24} />\n              //       <span className=\"text-xs\">聊天</span>\n              //   </Link>\n              <Link\n                href={item.href}\n                key={item.href}\n                className={`flex items-center justify-center rounded-full transition-colors shadow-lg \n    bg-[#0051feff]`}\n                style={{\n                  padding: 10 * scale,\n                  transform: `translateY(-${footerHeight * 0.2}px)`,\n                }}\n              >\n                <Image\n                  src={item.icon}\n                  alt=\"\"\n                  width={iconSize * 1.2}\n                  height={iconSize * 1.2}\n                  style={{ width: `${iconSize * 1.2}px`, height: `${iconSize * 1.2}px` }}\n                />\n              </Link>\n\n            );\n          }\n\n          // 其他项\n          return (\n            <Link\n              href={item.href}\n              key={item.href}\n              className={`flex items-center justify-center rounded-lg transition-colors\n                ${isActive ? \"bg-gray-700\" : \"hover:bg-gray-700\"}`}\n              style={{ padding: 6 * scale }}\n            >\n              <Image\n                src={item.icon}\n                alt=\"\"\n                width={iconSize}\n                height={iconSize}\n                style={{ width: `${iconSize}px`, height: `${iconSize}px` }}\n              />\n            </Link>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAaA,+BAA+B;AAC/B,SAAS;;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD;mCAAU;YACzC,OAAO,KAAK,aAAa;QAC3B;;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,0BAA0B;YAC1B,SAAS,OAAO,UAAU;YAE1B,SAAS;gBACP,SAAS,OAAO,UAAU;YAC5B;YAEA,OAAO,gBAAgB,CAAC,UAAU;YAElC;4CAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;mCAAG,EAAE;IAEL,OAAO;AACT;GAnBS;AAqBM,SAAS;;IACtB,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,QAAQ;IAEd,gBAAgB;IAChB,MAAM,QAAgB,QAAQ;IAC9B,MAAM,WAAmB,OAAO,OAAO,OAAO;IAC9C,MAAM,eAAuB,KAAK,OAAO,eAAe;IAExD,MAAM,WAAsB;QAC1B;YAAE,MAAM;YAAQ,MAAM;QAAgB;QACtC;YAAE,MAAM;YAAU,MAAM;QAAkB;QAC1C;YAAE,MAAM;YAAS,MAAM;QAAiB;QACxC;YAAE,MAAM;YAAS,MAAM;QAAiB;QACxC;YAAE,MAAM;YAAS,MAAM;QAAiB;KACzC;IAED,qBACE,6LAAC;QACC,WAAU;QACV,OAAO;YAAE,QAAQ;QAAa;kBAE9B,cAAA,6LAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC,MAAe;gBAC5B,MAAM,WAAoB,aAAa,KAAK,IAAI;gBAEhD,eAAe;gBACf,IAAI,QAAQ,GAAG;oBACb,OACE,QAAQ;oBACR,qBAAqB;oBACrB,qGAAqG;oBACrG,iBAAiB;oBACjB,wDAAwD;oBACxD,WAAW;oBACX,MAAM;oBACN,uEAAuE;oBACvE,4CAA4C;oBAC5C,YAAY;kCACZ,6LAAC,+JAAA,CAAA,UAAI;wBACH,MAAM,KAAK,IAAI;wBAEf,WAAY;wBAEZ,OAAO;4BACL,SAAS,KAAK;4BACd,WAAW,AAAC,eAAiC,OAAnB,eAAe,KAAI;wBAC/C;kCAEA,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KAAK,KAAK,IAAI;4BACd,KAAI;4BACJ,OAAO,WAAW;4BAClB,QAAQ,WAAW;4BACnB,OAAO;gCAAE,OAAO,AAAC,GAAiB,OAAf,WAAW,KAAI;gCAAK,QAAQ,AAAC,GAAiB,OAAf,WAAW,KAAI;4BAAI;;;;;;uBAblE,KAAK,IAAI;;;;;gBAkBpB;gBAEA,MAAM;gBACN,qBACE,6LAAC,+JAAA,CAAA,UAAI;oBACH,MAAM,KAAK,IAAI;oBAEf,WAAW,AAAC,kFACuC,OAA/C,WAAW,gBAAgB;oBAC/B,OAAO;wBAAE,SAAS,IAAI;oBAAM;8BAE5B,cAAA,6LAAC,gIAAA,CAAA,UAAK;wBACJ,KAAK,KAAK,IAAI;wBACd,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,OAAO;4BAAE,OAAO,AAAC,GAAW,OAAT,UAAS;4BAAK,QAAQ,AAAC,GAAW,OAAT,UAAS;wBAAI;;;;;;mBAVtD,KAAK,IAAI;;;;;YAcpB;;;;;;;;;;;AAIR;IAnFwB;;QACL,qIAAA,CAAA,cAAW;QACd;;;KAFQ","debugId":null}},
    {"offset": {"line": 3207, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/EarthPageClient.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport SevenStars from \"@/components/seven-stars/page\";\nimport SevenData from \"@/components/seven-data/page\";\nimport Zodiac from \"@/components/zodiac/page\";\nimport TibetanCycle from \"@/components/tibetan-cycle/page\";\nimport WidgetCarousel from \"@/components/widgets/WidgetCarousel\";\nimport EarthNav from \"@/components/EarthNav/EarthNav\";\nimport FooterBar from \"@/components/FooterBar\";\n\nexport default function EarthPageClient() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const tabParam = searchParams.get(\"tab\");\n\n  const getInitialPage = useCallback(() => {\n    if (tabParam === \"seven-stars\") return 1;\n    if (tabParam === \"tibetan-cycle\") return 2;\n    return 0;\n  }, [tabParam]);\n\n  const [currentPage, setCurrentPage] = useState(getInitialPage);\n  const [showSevenData, setShowSevenData] = useState(false);\n\n  useEffect(() => {\n    setCurrentPage(getInitialPage());\n  }, [getInitialPage]);\n\n  const handleToggleSeven = () => {\n    setShowSevenData((prev) => !prev);\n  };\n\n  const handleChangePage = (index: number) => {\n    setCurrentPage(index);\n    if (index === 0) router.push(\"/earth?tab=zodiac\");\n    if (index === 1) router.push(\"/earth?tab=seven-stars\");\n    if (index === 2) router.push(\"/earth?tab=tibetan-cycle\");\n  };\n\n  const items = [\n    <Zodiac key=\"zodiac\" />,\n    showSevenData ? <SevenData key=\"seven-data\" /> : <SevenStars key=\"seven-stars\" />,\n    <TibetanCycle key=\"tibetan-cycle\" />,\n  ];\n\n  return (\n    <div className=\"bg-black text-white min-h-screen flex flex-col\">\n      <div className=\"fixed inset-0 bg-black\"></div>\n      <div className=\"relative z-10 flex flex-col h-screen\">\n        <div className=\"flex-1 flex flex-col p-4\">\n          <div className=\"mb-4 text-sm\">\n            <EarthNav\n              currentPage={\n                tabParam === \"seven-stars\"\n                  ? \"七星轨迹\"\n                  : tabParam === \"tibetan-cycle\"\n                    ? \"藏历绕迥纪年\"\n                    : \"十二宫图\"\n              }\n            />\n          </div>\n          <div className=\"flex-1 flex items-center justify-center p-2 sm:p-4\">\n            <WidgetCarousel\n              items={items}\n              currentIndex={currentPage}\n              onChange={handleChangePage}\n            />\n          </div>\n          {currentPage === 1 && (\n            <button\n              onClick={handleToggleSeven}\n              className=\"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-full shadow-lg transition duration-300 hover:scale-105\"\n            >\n              {showSevenData ? \"*v*\" : \"*_*\"}\n            </button>\n          )}\n        </div>\n      </div>\n      <div className=\"fixed bottom-0 left-0 right-0 z-30\">\n        <FooterBar />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;;AAYe,SAAS;;IACtB,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,MAAM,iBAAiB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;uDAAE;YACjC,IAAI,aAAa,eAAe,OAAO;YACvC,IAAI,aAAa,iBAAiB,OAAO;YACzC,OAAO;QACT;sDAAG;QAAC;KAAS;IAEb,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,eAAe;QACjB;oCAAG;QAAC;KAAe;IAEnB,MAAM,oBAAoB;QACxB,iBAAiB,CAAC,OAAS,CAAC;IAC9B;IAEA,MAAM,mBAAmB,CAAC;QACxB,eAAe;QACf,IAAI,UAAU,GAAG,OAAO,IAAI,CAAC;QAC7B,IAAI,UAAU,GAAG,OAAO,IAAI,CAAC;QAC7B,IAAI,UAAU,GAAG,OAAO,IAAI,CAAC;IAC/B;IAEA,MAAM,QAAQ;sBACZ,6LAAC,mJAAA,CAAA,UAAM,MAAK;;;;;QACZ,8BAAgB,6LAAC,0JAAA,CAAA,UAAS,MAAK;;;;iCAAkB,6LAAC,2JAAA,CAAA,UAAU,MAAK;;;;;sBACjE,6LAAC,6JAAA,CAAA,UAAY,MAAK;;;;;KACnB;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,yJAAA,CAAA,UAAQ;gCACP,aACE,aAAa,gBACT,SACA,aAAa,kBACX,WACA;;;;;;;;;;;sCAIZ,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,8JAAA,CAAA,UAAc;gCACb,OAAO;gCACP,cAAc;gCACd,UAAU;;;;;;;;;;;wBAGb,gBAAgB,mBACf,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAET,gBAAgB,QAAQ;;;;;;;;;;;;;;;;;0BAKjC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,8IAAA,CAAA,UAAS;;;;;;;;;;;;;;;;AAIlB;GAzEwB;;QACD,qIAAA,CAAA,kBAAe;QACrB,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 3387, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/app/earth/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { Suspense } from 'react';\nimport EarthPageClient from '@/components/EarthPageClient';\n\nexport default function EarthPage() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <EarthPageClient />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAHA;;;;AAKe,SAAS;IACtB,qBACE,6LAAC,6JAAA,CAAA,WAAQ;QAAC,wBAAU,6LAAC;sBAAI;;;;;;kBACvB,cAAA,6LAAC,oJAAA,CAAA,UAAe;;;;;;;;;;AAGtB;KANwB","debugId":null}}]
}