{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/seven-stars/page.tsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import React, { useEffect, useRef, useState } from 'react';\r\n// import Link from \"next/link\";\r\n// import BottomNav from \"@/components/Footer/BottomNav\";\r\n// import EarthNav from \"@/components/EarthNav/EarthNav\";\r\n// import * as THREE from 'three';\r\n// import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\n// import { CSS2DRenderer, CSS2DObject } from 'three/examples/jsm/renderers/CSS2DRenderer';\r\n\r\n// const AstronomyVisualization: React.FC = () => {\r\n//     const canvasRef = useRef<HTMLCanvasElement>(null);\r\n//     const containerRef = useRef<HTMLDivElement>(null);\r\n//     const [latitude, setLatitude] = useState('31.23');\r\n//     const [longitude, setLongitude] = useState('121.47');\r\n//     const [date, setDate] = useState('');\r\n//     const [time, setTime] = useState('');\r\n//     const [result, setResult] = useState('');\r\n\r\n//     // Three.js相关引用\r\n//     const sceneRef = useRef<THREE.Scene | null>(null);\r\n//     const cameraRef = useRef<THREE.PerspectiveCamera | null>(null);\r\n//     const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n//     const labelRendererRef = useRef<CSS2DRenderer | null>(null);\r\n//     const controlsRef = useRef<OrbitControls | null>(null);\r\n//     const celestialObjectsRef = useRef<any[]>([]);\r\n//     const labelsRef = useRef<any[]>([]);\r\n//     const animationIdRef = useRef<number>();\r\n\r\n//     // 初始化Three.js场景\r\n//     const initThree = () => {\r\n//         if (!canvasRef.current) return;\r\n\r\n//         // 创建场景\r\n//         const scene = new THREE.Scene();\r\n//         scene.background = new THREE.Color(0x000000);\r\n//         sceneRef.current = scene;\r\n\r\n//         // 添加星空效果\r\n//         const starsGeometry = new THREE.BufferGeometry();\r\n//         const starsCount = 2000;\r\n//         const positions = new Float32Array(starsCount * 3);\r\n\r\n//         for (let i = 0; i < starsCount * 3; i += 3) {\r\n//             positions[i] = (Math.random() - 0.5) * 100;\r\n//             positions[i + 1] = (Math.random() - 0.5) * 100;\r\n//             positions[i + 2] = (Math.random() - 0.5) * 100;\r\n//         }\r\n\r\n//         starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n//         const starsMaterial = new THREE.PointsMaterial({\r\n//             color: 0xffffff,\r\n//             size: 0.13,\r\n//             transparent: true,\r\n//             sizeAttenuation: true,\r\n//             opacity: 0.8,\r\n//         });\r\n\r\n//         const starField = new THREE.Points(starsGeometry, starsMaterial);\r\n//         scene.add(starField);\r\n//         celestialObjectsRef.current.push(starField);\r\n\r\n//         // 创建相机\r\n//         const camera = new THREE.PerspectiveCamera(\r\n//             75,\r\n//             window.innerWidth / window.innerHeight,\r\n//             0.1,\r\n//             1000\r\n//         );\r\n//         cameraRef.current = camera;\r\n\r\n//         // 创建WebGL渲染器\r\n//         const renderer = new THREE.WebGLRenderer({\r\n//             canvas: canvasRef.current,\r\n//             antialias: true,\r\n//         });\r\n//         renderer.setSize(window.innerWidth, window.innerHeight);\r\n//         rendererRef.current = renderer;\r\n\r\n//         // 创建CSS2D渲染器\r\n//         const labelRenderer = new CSS2DRenderer();\r\n//         labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         labelRenderer.domElement.style.position = 'absolute';\r\n//         labelRenderer.domElement.style.top = '0';\r\n//         labelRenderer.domElement.style.pointerEvents = 'none';\r\n\r\n//         if (containerRef.current) {\r\n//             containerRef.current.appendChild(labelRenderer.domElement);\r\n//         }\r\n\r\n//         labelRendererRef.current = labelRenderer;\r\n\r\n//         // 基础天球\r\n//         const celestialSphere = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(2, 30, 30),\r\n//             new THREE.MeshBasicMaterial({\r\n//                 wireframe: true,\r\n//                 transparent: true,\r\n//                 opacity: 0.1,\r\n//             })\r\n//         );\r\n//         scene.add(celestialSphere);\r\n\r\n//         // 赤道平面\r\n//         const equatorialPlane = new THREE.Mesh(\r\n//             new THREE.CircleGeometry(2, 30),\r\n//             new THREE.MeshBasicMaterial({\r\n//                 color: 0x4169e1,\r\n//                 transparent: true,\r\n//                 opacity: 0.2,\r\n//                 side: THREE.DoubleSide,\r\n//             })\r\n//         );\r\n//         equatorialPlane.rotation.x = Math.PI / 2;\r\n//         scene.add(equatorialPlane);\r\n\r\n//         // 赤道圆圈\r\n//         const equatorLine = new THREE.Mesh(\r\n//             new THREE.TorusGeometry(2, 0.003, 16, 100),\r\n//             new THREE.MeshBasicMaterial({ color: 0xffffff })\r\n//         );\r\n//         equatorLine.rotation.x = Math.PI / 2;\r\n//         scene.add(equatorLine);\r\n\r\n//         // 坐标轴\r\n//         const axesHelper = new THREE.AxesHelper(2.4);\r\n//         scene.add(axesHelper);\r\n\r\n//         // 方位标签\r\n//         const orientationLabels = ['东', '北', '西', '南'];\r\n//         for (let i = 0; i < 4; i++) {\r\n//             const angle = (i * Math.PI * 2) / 4;\r\n//             const x = 2 * Math.cos(angle);\r\n//             const z = 2 * Math.sin(angle);\r\n//             const y = 0;\r\n\r\n//             const labelDiv = document.createElement('div');\r\n//             labelDiv.className = 'orientation-label';\r\n//             labelDiv.textContent = orientationLabels[i];\r\n//             labelDiv.style.color = '#ffffff';\r\n//             labelDiv.style.fontSize = '14px';\r\n//             labelDiv.style.fontWeight = 'bold';\r\n//             labelDiv.style.textShadow = '0 0 3px rgba(0,0,0,0.8)';\r\n\r\n//             const label = new CSS2DObject(labelDiv);\r\n//             label.position.set(x * 1.1, y, z * 1.1);\r\n//             scene.add(label);\r\n//             labelsRef.current.push(label);\r\n//         }\r\n\r\n//         // 初始化控制器\r\n//         const controls = new OrbitControls(camera, renderer.domElement);\r\n//         camera.position.set(4, 4, 4);\r\n//         controls.update();\r\n//         controlsRef.current = controls;\r\n//     };\r\n\r\n//     // 更新可视化\r\n//     const updateVisualization = (data: any, planetsData: any) => {\r\n//         if (!sceneRef.current) return;\r\n\r\n//         const scene = sceneRef.current;\r\n\r\n//         // 保存星空对象\r\n//         const starField = celestialObjectsRef.current.find(\r\n//             (obj) => obj instanceof THREE.Points\r\n//         );\r\n\r\n//         // 清除旧对象\r\n//         celestialObjectsRef.current.forEach((obj) => {\r\n//             if (!(obj instanceof THREE.Points)) {\r\n//                 scene.remove(obj);\r\n//             }\r\n//         });\r\n\r\n//         celestialObjectsRef.current = starField ? [starField] : [];\r\n\r\n//         // 清除旧标签\r\n//         labelsRef.current.forEach((label) => scene.remove(label));\r\n//         labelsRef.current = [];\r\n\r\n//         const sunDeclination = parseFloat(data.sun_declination.replace('°', ''));\r\n//         const moonDeclination = parseFloat(data.moon_declination.replace('°', ''));\r\n//         const latitudeValue = parseFloat(latitude);\r\n\r\n//         // 创建太阳和月亮轨迹\r\n//         createCelestialBodyTrajectory('sun', sunDeclination, latitudeValue, 0xffff00, data);\r\n//         createCelestialBodyTrajectory('moon', moonDeclination, latitudeValue, 0xc0c0c0, data);\r\n\r\n//         // 创建行星轨迹\r\n//         if (planetsData) {\r\n//             const planetConfigs = {\r\n//                 '水星': { color: 0x498bff, englishName: 'mercury' },\r\n//                 '金星': { color: 0xcec2a8, englishName: 'venus' },\r\n//                 '火星': { color: 0xb92123, englishName: 'mars' },\r\n//                 '木星': { color: 0x60b633, englishName: 'jupiter' },\r\n//                 '土星': { color: 0xf4d727, englishName: 'saturn' },\r\n//             };\r\n\r\n//             Object.entries(planetConfigs).forEach(([chineseName, config]) => {\r\n//                 if (planetsData[chineseName]) {\r\n//                     const declination = parseFloat(planetsData[chineseName].declination.replace('°', ''));\r\n//                     createCelestialBodyTrajectory(\r\n//                         config.englishName,\r\n//                         declination,\r\n//                         latitudeValue,\r\n//                         config.color,\r\n//                         data,\r\n//                         true\r\n//                     );\r\n//                 }\r\n//             });\r\n//         }\r\n\r\n//         // 更新结果显示\r\n//         setResult(`\r\n//       <p>日出时间: ${data.sunrise}</p>\r\n//       <p>日落时间: ${data.sunset}</p>\r\n//       <p>月出时间: ${data.moonrise}</p>\r\n//       <p>月落时间: ${data.moonset}</p>\r\n//       <p>日照时长: ${data.daylight_duration}</p>\r\n//       <p>太阳赤纬角: ${data.sun_declination}</p>\r\n//       <p>月亮赤纬角: ${data.moon_declination}</p>\r\n//       <hr>\r\n//     `);\r\n//     };\r\n\r\n//     // 创建天体轨迹\r\n//     const createCelestialBodyTrajectory = (\r\n//         bodyType: string,\r\n//         declination: number,\r\n//         latitude: number,\r\n//         color: number,\r\n//         data: any,\r\n//         isPlanet: boolean = false\r\n//     ) => {\r\n//         if (!sceneRef.current) return;\r\n\r\n//         const scene = sceneRef.current;\r\n//         const radius = 2;\r\n//         const timePoints = 86400;\r\n//         const points = [];\r\n\r\n//         const delta = (declination * Math.PI) / 180;\r\n//         const latitudeRad = (latitude * Math.PI) / 180;\r\n\r\n//         // 生成轨迹点\r\n//         for (let i = 0; i < timePoints; i++) {\r\n//             const t = (i / (timePoints - 1)) * Math.PI * 2;\r\n//             const d = radius * Math.sin(delta);\r\n//             const circleRadius = Math.sqrt(radius * radius - d * d);\r\n//             const x = circleRadius * Math.cos(t);\r\n//             const y = circleRadius * Math.sin(t);\r\n//             const z = d;\r\n\r\n//             // 计算旋转\r\n//             const zAxis = new THREE.Vector3(0, 0, 1);\r\n//             const northPoleDir = new THREE.Vector3(\r\n//                 0,\r\n//                 Math.sin(latitudeRad),\r\n//                 Math.cos(latitudeRad)\r\n//             ).normalize();\r\n\r\n//             const rotationAxis = new THREE.Vector3();\r\n//             rotationAxis.crossVectors(zAxis, northPoleDir).normalize();\r\n//             const rotationAngle = Math.acos(zAxis.dot(northPoleDir));\r\n\r\n//             const rotationMatrix = new THREE.Matrix4();\r\n//             rotationMatrix.makeRotationAxis(rotationAxis, rotationAngle);\r\n\r\n//             const point = new THREE.Vector3(x, y, z);\r\n//             point.applyMatrix4(rotationMatrix);\r\n//             points.push(point);\r\n//         }\r\n\r\n//         // 创建轨迹管道\r\n//         const curve = new THREE.CatmullRomCurve3(points);\r\n//         const pathGeometry = new THREE.TubeGeometry(curve, 50, 0.01, 20, false);\r\n//         const pathMaterial = new THREE.MeshBasicMaterial({ color });\r\n//         const path = new THREE.Mesh(pathGeometry, pathMaterial);\r\n//         path.userData = { type: bodyType };\r\n//         path.visible = !isPlanet; // 行星默认不可见\r\n//         scene.add(path);\r\n//         celestialObjectsRef.current.push(path);\r\n\r\n//         // 添加时间标记和交点\r\n//         createTimeMarkers(bodyType, points, data, color, declination > 0);\r\n//     };\r\n\r\n//     // 创建时间标记\r\n//     const createTimeMarkers = (\r\n//         bodyType: string,\r\n//         points: THREE.Vector3[],\r\n//         data: any,\r\n//         color: number,\r\n//         isDeclinationPositive: boolean\r\n//     ) => {\r\n//         if (!sceneRef.current) return;\r\n\r\n//         const scene = sceneRef.current;\r\n\r\n//         // 时间转换函数\r\n//         const timeToSeconds = (timeStr: string) => {\r\n//             const [h, m] = timeStr.split(':').map(Number);\r\n//             return h * 3600 + m * 60;\r\n//         };\r\n\r\n//         // 查找与赤道平面的交点\r\n//         const findIntersections = () => {\r\n//             const intersections: THREE.Vector3[] = [];\r\n//             const indices: number[] = [];\r\n\r\n//             for (let i = 0; i < points.length - 1; i++) {\r\n//                 const point = points[i];\r\n//                 const nextPoint = points[i + 1];\r\n\r\n//                 if (point.y * nextPoint.y <= 0) {\r\n//                     const t = -point.y / (nextPoint.y - point.y);\r\n//                     const intersectX = point.x + t * (nextPoint.x - point.x);\r\n//                     const intersectZ = point.z + t * (nextPoint.z - point.z);\r\n\r\n//                     intersections.push(new THREE.Vector3(intersectX, 0, intersectZ));\r\n//                     indices.push(i);\r\n//                 }\r\n//             }\r\n//             return { points: intersections, indices };\r\n//         };\r\n\r\n//         const { points: intersectionPoints, indices: intersectionIndices } = findIntersections();\r\n\r\n//         // 创建交点标记\r\n//         intersectionPoints.forEach((point, index) => {\r\n//             const marker = new THREE.Mesh(\r\n//                 new THREE.SphereGeometry(0.03),\r\n//                 new THREE.MeshBasicMaterial({\r\n//                     color: bodyType === 'sun' ? 0xff0000 : 0x008b8b\r\n//                 })\r\n//             );\r\n//             marker.position.copy(point);\r\n//             scene.add(marker);\r\n//             celestialObjectsRef.current.push(marker);\r\n\r\n//             // 添加标签\r\n//             const labelDiv = document.createElement('div');\r\n//             labelDiv.className = bodyType === 'sun' ? 'intersection-label' : 'moon-intersection-label';\r\n//             const label = new CSS2DObject(labelDiv);\r\n//             label.position.copy(point);\r\n//             scene.add(label);\r\n//             labelsRef.current.push(label);\r\n//         });\r\n\r\n//         // 获取升起时间\r\n//         const riseTime = bodyType === 'sun' ? data.sunrise : data.moonrise;\r\n//         const riseSec = timeToSeconds(riseTime);\r\n//         const riseIndex = isDeclinationPositive ? intersectionIndices[1] : intersectionIndices[0];\r\n\r\n//         // 创建整点时间标记\r\n//         const riseHour = Math.ceil(riseSec / 3600);\r\n//         const firstHourMarker = riseHour * 3600;\r\n//         const timeDiff = firstHourMarker - riseSec;\r\n\r\n//         const firstHourIndex = (riseIndex + Math.round((timeDiff / 86400) * points.length)) % points.length;\r\n\r\n//         const markerColor = bodyType === 'sun' ? 0xffa500 : 0x20b2aa;\r\n//         const markerGeometry = new THREE.SphereGeometry(0.03);\r\n//         const markerMaterial = new THREE.MeshBasicMaterial({ color: markerColor });\r\n\r\n//         for (let h = 0; h < 24; h++) {\r\n//             const targetSec = firstHourMarker + h * 3600;\r\n//             const markerIndex = (firstHourIndex + Math.round((h * points.length) / 24)) % points.length;\r\n//             const position = points[markerIndex];\r\n\r\n//             // 创建标记点\r\n//             const marker = new THREE.Mesh(markerGeometry, markerMaterial);\r\n//             marker.position.copy(position);\r\n//             marker.userData = { type: bodyType };\r\n//             scene.add(marker);\r\n//             celestialObjectsRef.current.push(marker);\r\n\r\n//             // 添加时间标签\r\n//             const labelDiv = document.createElement('div');\r\n//             labelDiv.className = bodyType === 'sun' ? 'time-marker' : 'moon-time-marker';\r\n//             labelDiv.textContent = `${Math.floor(targetSec / 3600).toString().padStart(2, '0')}`;\r\n\r\n//             const label = new CSS2DObject(labelDiv);\r\n//             label.userData = { type: bodyType };\r\n\r\n//             const direction = position.clone().normalize();\r\n//             const labelPosition = position.clone().add(direction.multiplyScalar(0.15));\r\n//             label.position.copy(labelPosition);\r\n\r\n//             scene.add(label);\r\n//             labelsRef.current.push(label);\r\n//         }\r\n\r\n//         // 添加当前时间标记\r\n//         const [currentHour, currentMinute] = time.split(':').map(Number);\r\n//         const currentSeconds = currentHour * 3600 + currentMinute * 60;\r\n//         const pointsPerSecond = points.length / 86400;\r\n//         const timeDiffFromRise = currentSeconds - riseSec;\r\n//         const offsetPoints = Math.floor(timeDiffFromRise * pointsPerSecond);\r\n//         const validIndex = (((riseIndex + offsetPoints) % points.length) + points.length) % points.length;\r\n\r\n//         const currentMarker = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.08),\r\n//             new THREE.MeshBasicMaterial({\r\n//                 color: bodyType === 'sun' ? 0xff4500 : 0x87ceeb\r\n//             })\r\n//         );\r\n//         currentMarker.position.copy(points[validIndex]);\r\n//         currentMarker.userData = { type: bodyType };\r\n//         scene.add(currentMarker);\r\n//         celestialObjectsRef.current.push(currentMarker);\r\n\r\n//         const currentLabel = document.createElement('div');\r\n//         currentLabel.className = bodyType === 'sun' ? 'time-marker' : 'moon-time-marker';\r\n//         currentLabel.style.color = bodyType === 'sun' ? '#ff4500' : '#87ceeb';\r\n//         currentLabel.style.fontSize = '16px';\r\n//         currentLabel.textContent = `${currentHour}:${currentMinute.toString().padStart(2, '0')}`;\r\n\r\n//         const timeLabel = new CSS2DObject(currentLabel);\r\n//         const direction = currentMarker.position.clone().normalize();\r\n//         const labelPosition = currentMarker.position.clone().add(direction.multiplyScalar(0.2));\r\n//         timeLabel.position.copy(labelPosition);\r\n//         timeLabel.userData = { type: bodyType };\r\n\r\n//         scene.add(timeLabel);\r\n//         labelsRef.current.push(timeLabel);\r\n//     };\r\n\r\n//     // 动画循环\r\n//     const animate = () => {\r\n//         if (!sceneRef.current || !cameraRef.current || !rendererRef.current || !labelRendererRef.current) return;\r\n\r\n//         controlsRef.current?.update();\r\n//         rendererRef.current.render(sceneRef.current, cameraRef.current);\r\n//         labelRendererRef.current.render(sceneRef.current, cameraRef.current);\r\n\r\n//         animationIdRef.current = requestAnimationFrame(animate);\r\n//     };\r\n\r\n//     // 窗口大小调整\r\n//     const handleResize = () => {\r\n//         if (!cameraRef.current || !rendererRef.current || !labelRendererRef.current) return;\r\n\r\n//         const container = containerRef.current;\r\n//         if (!container) return;\r\n\r\n//         const width = container.clientWidth;\r\n//         const height = container.clientHeight;\r\n\r\n//         cameraRef.current.aspect = width / height;\r\n//         cameraRef.current.updateProjectionMatrix();\r\n//         rendererRef.current.setSize(width, height);\r\n//         labelRendererRef.current.setSize(width, height);\r\n//     };\r\n\r\n//     // 表单提交处理\r\n//     const handleSubmit = async (e: React.FormEvent) => {\r\n//         e.preventDefault();\r\n\r\n//         // 验证中国范围内的经纬度\r\n//         const minLatitude = 3.5;\r\n//         const maxLatitude = 53.4;\r\n//         const minLongitude = 73.3;\r\n//         const maxLongitude = 135.1;\r\n\r\n//         const lat = parseFloat(latitude);\r\n//         const lng = parseFloat(longitude);\r\n\r\n//         if (lat < minLatitude || lat > maxLatitude || lng < minLongitude || lng > maxLongitude) {\r\n//             setResult('请输入中国范围内的经纬度');\r\n//             return;\r\n//         }\r\n\r\n//         try {\r\n//             // 获取日月数据\r\n//             const sunMoonResponse = await fetch('/api/calculate', {\r\n//                 method: 'POST',\r\n//                 headers: {\r\n//                     'Content-Type': 'application/json',\r\n//                 },\r\n//                 body: JSON.stringify({ latitude: lat, longitude: lng, date, time }),\r\n//             });\r\n//             const sunMoonData = await sunMoonResponse.json();\r\n\r\n//             // 获取行星数据\r\n//             const planetsResponse = await fetch('/api/planets', {\r\n//                 method: 'POST',\r\n//                 headers: {\r\n//                     'Content-Type': 'application/json',\r\n//                 },\r\n//                 body: JSON.stringify({ latitude: lat, longitude: lng, date, time }),\r\n//             });\r\n//             const planetsData = await planetsResponse.json();\r\n\r\n//             updateVisualization(sunMoonData, planetsData);\r\n//         } catch (error) {\r\n//             console.error('Error:', error);\r\n//             setResult('获取数据时出错，请重试');\r\n//         }\r\n//     };\r\n\r\n//     // 天体显示控制\r\n//     const handleCelestialToggle = (celestialBody: string, isChecked: boolean) => {\r\n//         // 控制天体对象显示\r\n//         celestialObjectsRef.current.forEach((obj) => {\r\n//             if (obj.userData && obj.userData.type === celestialBody) {\r\n//                 obj.visible = isChecked;\r\n//             }\r\n//         });\r\n\r\n//         // 控制标签显示\r\n//         labelsRef.current.forEach((label) => {\r\n//             if (label.userData && label.userData.type === celestialBody) {\r\n//                 label.visible = isChecked;\r\n//             }\r\n//         });\r\n//     };\r\n\r\n//     // 组件挂载和卸载\r\n//     useEffect(() => {\r\n//         // 设置默认日期和时间\r\n//         const today = new Date();\r\n//         const year = today.getFullYear();\r\n//         const month = String(today.getMonth() + 1).padStart(2, '0');\r\n//         const day = String(today.getDate()).padStart(2, '0');\r\n//         const hours = String(today.getHours()).padStart(2, '0');\r\n//         const minutes = String(today.getMinutes()).padStart(2, '0');\r\n\r\n//         setDate(`${year}-${month}-${day}`);\r\n//         setTime(`${hours}:${minutes}`);\r\n\r\n//         // 初始化Three.js\r\n//         initThree();\r\n//         window.addEventListener('resize', handleResize);\r\n//         animate();\r\n\r\n//         // 自动提交表单\r\n//         const submitForm = async () => {\r\n//             if (latitude && longitude && date && time) {\r\n//                 await handleSubmit(new Event('submit') as any);\r\n//             }\r\n//         };\r\n\r\n//         submitForm();\r\n\r\n//         // 清理函数\r\n//         return () => {\r\n//             window.removeEventListener('resize', handleResize);\r\n//             if (animationIdRef.current) {\r\n//                 cancelAnimationFrame(animationIdRef.current);\r\n//             }\r\n\r\n//             // 清理Three.js资源\r\n//             if (rendererRef.current) {\r\n//                 rendererRef.current.dispose();\r\n//             }\r\n\r\n//             if (labelRendererRef.current) {\r\n//                 labelRendererRef.current.domElement.remove();\r\n//             }\r\n//         };\r\n//     }, []);\r\n\r\n//     // 复选框事件处理\r\n//     useEffect(() => {\r\n//         const checkboxes = document.querySelectorAll('.celestial-checkbox');\r\n\r\n//         const handleCheckboxChange = (e: Event) => {\r\n//             const target = e.target as HTMLInputElement;\r\n//             const celestialBody = target.dataset.celestial;\r\n//             if (celestialBody) {\r\n//                 handleCelestialToggle(celestialBody, target.checked);\r\n//             }\r\n//         };\r\n\r\n//         checkboxes.forEach(checkbox => {\r\n//             checkbox.addEventListener('change', handleCheckboxChange);\r\n//         });\r\n\r\n//         return () => {\r\n//             checkboxes.forEach(checkbox => {\r\n//                 checkbox.removeEventListener('change', handleCheckboxChange);\r\n//             });\r\n//         };\r\n//     }, []);\r\n\r\n//     return (\r\n//         <div style={{\r\n//             display: 'flex',\r\n//             flexDirection: 'column',\r\n//             minHeight: '100vh',\r\n//             backgroundColor: '#1c023f',\r\n//             color: 'white',\r\n//             fontFamily: 'Arial, sans-serif',\r\n//             margin: 0,\r\n//             padding: 0,\r\n//             overflowX: 'hidden'\r\n//         }}>\r\n//             <div\r\n//                 style={{\r\n//                     display: \"grid\",\r\n//                     gridTemplateColumns: \"minmax(240px, 280px) 1fr\",\r\n//                     minHeight: \"100vh\",\r\n//                 }}\r\n//             >\r\n//                 {/* 输入面板 */}\r\n//                 <div\r\n//                     style={{\r\n//                         background: \"rgba(0, 0, 0, 0.6)\",\r\n//                         boxShadow: \"1px 0 3px rgba(0, 0, 0, 0.3)\",\r\n//                         overflowY: \"auto\",\r\n//                         position: \"fixed\" as const,\r\n//                         top: \"2vw\",\r\n//                         left: \"2vw\",\r\n//                         borderRadius: \"8px\",\r\n//                         zIndex: 1000,\r\n//                         width: \"20vw\", // ← 自动根据屏幕宽度调整\r\n//                         minWidth: \"120px\", // 保证小屏时不会太小\r\n//                         maxWidth: \"200px\", // 大屏时不会太大\r\n//                         border: \"none\",\r\n//                         padding: \"1vw\", // 自适应内边距\r\n//                         fontSize: \"clamp(12px, 1vw, 16px)\", // 字体随屏幕变化\r\n//                     }}\r\n//                 >\r\n//                     <form\r\n//                         onSubmit={handleSubmit}\r\n//                         style={{ display: \"flex\", flexDirection: \"column\", gap: \"0.8vw\" }}\r\n//                     >\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"latitude\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 纬度\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"number\"\r\n//                                 id=\"latitude\"\r\n//                                 step=\"0.01\"\r\n//                                 required\r\n//                                 placeholder=\"例如：31.35\"\r\n//                                 value={latitude}\r\n//                                 onChange={(e) => setLatitude(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"longitude\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 经度\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"number\"\r\n//                                 id=\"longitude\"\r\n//                                 step=\"0.01\"\r\n//                                 required\r\n//                                 placeholder=\"例如：121.43\"\r\n//                                 value={longitude}\r\n//                                 onChange={(e) => setLongitude(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"date\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 日期\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"date\"\r\n//                                 id=\"date\"\r\n//                                 required\r\n//                                 value={date}\r\n//                                 onChange={(e) => setDate(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n//                             <label htmlFor=\"time\" style={{ marginBottom: \"0.3em\" }}>\r\n//                                 时间\r\n//                             </label>\r\n//                             <input\r\n//                                 type=\"time\"\r\n//                                 id=\"time\"\r\n//                                 required\r\n//                                 value={time}\r\n//                                 onChange={(e) => setTime(e.target.value)}\r\n//                                 style={{\r\n//                                     width: \"100%\",\r\n//                                     padding: \"0.5em\",\r\n//                                     borderRadius: \"4px\",\r\n//                                     border: \"1px solid #ccc\",\r\n//                                 }}\r\n//                             />\r\n//                         </div>\r\n\r\n//                         <button\r\n//                             type=\"submit\"\r\n//                             style={{\r\n//                                 padding: \"0.7em\",\r\n//                                 backgroundColor: \"#6b55b4\",\r\n//                                 color: \"white\",\r\n//                                 border: \"none\",\r\n//                                 borderRadius: \"2px\",\r\n//                                 cursor: \"pointer\",\r\n//                                 transition: \"background-color 0.3s\",\r\n//                             }}\r\n//                         >\r\n//                             查询并可视化\r\n//                         </button>\r\n//                     </form>\r\n//                 </div>\r\n\r\n\r\n//                 {/* 结果显示 */}\r\n//                 <div id=\"result\" style={{\r\n//                     position: 'fixed' as const,\r\n//                     top: '20px',\r\n//                     right: '20px',\r\n//                     width: '220px',\r\n//                     padding: '10px',\r\n//                     background: 'rgba(0, 0, 0, 0.3)',\r\n//                     borderRadius: '10px',\r\n//                     boxShadow: '0 2px 4px rgba(0, 0, 0, 0.2)',\r\n//                     color: 'white',\r\n//                     fontSize: '0.9rem'\r\n//                 }} dangerouslySetInnerHTML={{ __html: result }} />\r\n\r\n//                 {/* 可视化面板 */}\r\n//                 <div ref={containerRef} className=\"visualization-panel\" style={{\r\n//                     position: 'relative' as const,\r\n//                     background: '#000',\r\n//                     overflow: 'hidden',\r\n//                     gridColumn: '1 / -1'\r\n//                 }}>\r\n//                     <canvas ref={canvasRef} id=\"threeCanvas\" />\r\n//                     <div id=\"info\" style={{\r\n//                         position: 'absolute',\r\n//                         top: '225px',\r\n//                         right: '300px',\r\n//                         color: 'yellow',\r\n//                         fontFamily: 'monospace',\r\n//                         fontSize: '14px',\r\n//                         whiteSpace: 'pre' as const,\r\n//                         textShadow: '1px 1px 1px black',\r\n//                         background: 'rgba(0, 0, 0, 0.2)',\r\n//                         padding: '0.1rem 0.1rem',\r\n//                         borderRadius: '6px',\r\n//                         zIndex: 1000\r\n//                     }}></div>\r\n//                 </div>\r\n\r\n//                 {/* 天体轨迹控制 */}\r\n//                 <div id=\"celestialControls\" style={{\r\n//                     position: 'fixed' as const,\r\n//                     right: '8px',\r\n//                     top: '15%',\r\n//                     transform: 'translateY(-50%)',\r\n//                     background: 'rgba(0, 0, 0, 0.7)',\r\n//                     padding: '8px',\r\n//                     borderRadius: '8px',\r\n//                     display: 'flex',\r\n//                     flexDirection: 'column' as const,\r\n//                     gap: '8px',\r\n//                     zIndex: 1000,\r\n//                     border: '1px solid rgba(255, 255, 255, 0.1)'\r\n//                 }}>\r\n//                     <div className=\"control-title\" style={{\r\n//                         color: '#fff',\r\n//                         fontWeight: 'bold',\r\n//                         marginBottom: '5px',\r\n//                         borderBottom: '1px solid rgba(255, 255, 255, 0.2)',\r\n//                         paddingBottom: '5px'\r\n//                     }}></div>\r\n\r\n//                     {[\r\n//                         { id: 'sun', name: '太阳', color: '#ffff00' },\r\n//                         { id: 'moon', name: '月亮', color: '#c0c0c0' },\r\n//                         { id: 'mercury', name: '水星', color: '#498bff' },\r\n//                         { id: 'venus', name: '金星', color: '#cec2a8' },\r\n//                         { id: 'mars', name: '火星', color: '#ff5153' },\r\n//                         { id: 'jupiter', name: '木星', color: '#60b633' },\r\n//                         { id: 'saturn', name: '土星', color: '#f4d727' }\r\n//                     ].map((body) => (\r\n//                         <label\r\n//                             key={body.id}\r\n//                             data-celestial={body.id}\r\n//                             style={{\r\n//                                 color: body.color,\r\n//                                 fontFamily: 'Arial, sans-serif',\r\n//                                 fontSize: '12px',\r\n//                                 display: 'flex',\r\n//                                 alignItems: 'center',\r\n//                                 gap: '4px',\r\n//                                 cursor: 'pointer'\r\n//                             }}\r\n//                         >\r\n//                             <input\r\n//                                 type=\"checkbox\"\r\n//                                 className=\"celestial-checkbox\"\r\n//                                 data-celestial={body.id}\r\n//                                 defaultChecked={body.id === 'sun' || body.id === 'moon'}\r\n//                             />\r\n//                             {body.name}\r\n//                         </label>\r\n//                     ))}\r\n\r\n//                 </div>\r\n//             </div>\r\n//             <style>{`\r\n//         * {\r\n//           box-sizing: border-box;\r\n//         }\r\n\r\n//         canvas {\r\n//           display: block;\r\n//         }\r\n\r\n//         .label {\r\n//           color: #ffffff;\r\n//           font-family: sans-serif;\r\n//           padding: 2px;\r\n//           background: rgba(0, 0, 0, 0.6);\r\n//         }\r\n\r\n//         .button:hover {\r\n//           background: #5b4aa3;\r\n//         }\r\n\r\n//         .footer svg {\r\n//           color: white;\r\n//           font-size: 24px;\r\n//         }\r\n\r\n//         .back-btn:hover,\r\n//         .location-btn:hover,\r\n//         .calendar-btn:hover,\r\n//         .moon-btn:hover,\r\n//         .data-btn:hover,\r\n//         .index-btn:hover {\r\n//           opacity: 0.8;\r\n//         }\r\n\r\n//         .time-marker {\r\n//           font-size: 12px;\r\n//           background: rgba(0, 0, 0, 0);\r\n//           padding: 2px 5px;\r\n//           border-radius: 3px;\r\n//           transform: translateY(-10px);\r\n//           white-space: nowrap;\r\n//           color: #ffb347;\r\n//           font-weight: bold;\r\n//         }\r\n\r\n//         .intersection-label {\r\n//           color: #ff0000;\r\n//           font-size: 14px;\r\n//           font-weight: bold;\r\n//         }\r\n\r\n//         .marker-point {\r\n//           border-radius: 50%;\r\n//           width: 6px;\r\n//           height: 6px;\r\n//           background-color: #ffa500;\r\n//         }\r\n\r\n//         .intersection-point {\r\n//           border-radius: 50%;\r\n//           width: 8px;\r\n//           height: 8px;\r\n//           background-color: #ff0000;\r\n//         }\r\n\r\n//         .moon-time-marker {\r\n//           font-size: 12px;\r\n//           background: rgba(0, 0, 0, 0);\r\n//           padding: 2px 5px;\r\n//           border-radius: 3px;\r\n//           transform: translateY(-10px);\r\n//           white-space: nowrap;\r\n//           color: #20b2aa !important;\r\n//           font-weight: bold;\r\n//         }\r\n\r\n//         .moon-intersection-label {\r\n//           color: #044343 !important;\r\n//           font-size: 13px;\r\n//           text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);\r\n//         }\r\n\r\n//         .nav-button {\r\n//           background: rgba(107, 85, 180, 0.2);\r\n//           border: none;\r\n//           border-radius: 20px;\r\n//           padding: 10px;\r\n//           cursor: pointer;\r\n//           transition: all 0.3s ease;\r\n//           display: flex;\r\n//           align-items: center;\r\n//           justify-content: center;\r\n//           min-width: 80px;\r\n//         }\r\n\r\n//         .nav-button:hover {\r\n//           background: rgba(255, 255, 255, 0.9);\r\n//           transform: scale(1.1);\r\n//         }\r\n\r\n//         @media (max-width: 768px) {\r\n//           .input-panel, #result {\r\n//             width: calc(40%);\r\n//             font-size: 0.9rem;\r\n//           }\r\n\r\n//           .input-panel h2 {\r\n//             font-size: 1.2rem;\r\n//             margin-bottom: 1rem;\r\n//           }\r\n\r\n//           .container {\r\n//             grid-template-columns: 1fr;\r\n//           }\r\n\r\n//           .input-panel {\r\n//             width: calc(50%);\r\n//             max-height: 60vh;\r\n//           }\r\n\r\n//           .visualization-panel {\r\n//             height: 100vh;\r\n//           }\r\n//         }\r\n//       `}</style>\r\n//         </div>\r\n\r\n//     );\r\n// };\r\n\r\n// export default AstronomyVisualization;\r\n\r\n// \"use client\";\r\n\r\n// import { useEffect, useRef, useState } from \"react\";\r\n// import * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n// import { CSS2DRenderer, CSS2DObject } from \"three/examples/jsm/renderers/CSS2DRenderer\";\r\n// import BottomNav from \"@/components/Footer/BottomNav\";\r\n\r\n// export default function ZodiacPage() {\r\n//     const containerRef = useRef<HTMLDivElement | null>(null);\r\n//     const animRef = useRef<number | null>(null);\r\n//     const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n//     const labelRendererRef = useRef<CSS2DRenderer | null>(null);\r\n//     const controlsRef = useRef<OrbitControls | null>(null);\r\n//     const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n//     useEffect(() => {\r\n//         if (!containerRef.current) return;\r\n//         const container = containerRef.current;\r\n\r\n//         // --- 如果页面已有旧的 canvas / labelRenderer DOM，先移除它们（避免重复附加） ---\r\n//         const EXISTING_CANVAS_ID = \"threejs-canvas\";\r\n//         const EXISTING_LABELS_ID = \"threejs-labels\";\r\n\r\n//         const removeIfExist = (id: string) => {\r\n//             const el = container.querySelector(`#${id}`);\r\n//             if (el) el.remove();\r\n//         };\r\n//         removeIfExist(EXISTING_CANVAS_ID);\r\n//         removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//         // --- Scene, Camera, Renderer ---\r\n//         const scene = new THREE.Scene();\r\n//         const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n//         const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n//         renderer.setSize(window.innerWidth, window.innerHeight);\r\n//         renderer.setClearColor(0x000000);\r\n//         // 给 canvas 一个稳定 id（方便清理）\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n//         rendererRef.current = renderer;\r\n\r\n//         // --- CSS2DRenderer for labels ---\r\n//         const labelRenderer = new CSS2DRenderer();\r\n//         labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         // append renderer + labelRenderer (顺序无关，label 在上)\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n\r\n//         labelRenderer.domElement.style.position = \"absolute\";\r\n//         labelRenderer.domElement.style.top = \"0\";\r\n//         labelRenderer.domElement.style.pointerEvents = \"none\"; // 让事件穿透到 canvas\r\n//         labelRenderer.domElement.id = EXISTING_LABELS_ID;\r\n//         container.appendChild(labelRenderer.domElement);\r\n\r\n//         // bind controls to canvas\r\n//         const controls = new OrbitControls(camera, renderer.domElement);\r\n//         controls.enableDamping = true;\r\n//         controls.dampingFactor = 0.05;\r\n\r\n\r\n//         // --- Star field ---\r\n//         const starsGeometry = new THREE.BufferGeometry();\r\n//         const starsCount = 2000;\r\n//         const positions = new Float32Array(starsCount * 3);\r\n//         for (let i = 0; i < starsCount * 3; i++) {\r\n//             positions[i] = (Math.random() - 0.5) * 100;\r\n//         }\r\n//         starsGeometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\r\n//         const starField = new THREE.Points(\r\n//             starsGeometry,\r\n//             new THREE.PointsMaterial({ size: 0.1, transparent: true })\r\n//         );\r\n//         scene.add(starField);\r\n\r\n//         // --- Load Textures ---\r\n//         const textureLoader = new THREE.TextureLoader();\r\n//         const sunTexture = textureLoader.load(\"/pho/sun1.png\");\r\n//         const earthTexture = textureLoader.load(\"/pho/earth.png\");\r\n\r\n//         const constellationImages = [\r\n//             \"libra.png\", \"scorpio.png\", \"sagittarius.png\", \"capricorn.png\",\r\n//             \"aquarius.png\", \"pisces.png\", \"aries.png\", \"taurus.png\",\r\n//             \"gemini.png\", \"cancer.png\", \"leo.png\", \"virgo.png\"\r\n//         ];\r\n//         const loadedConstellationTextures = constellationImages.map(img => textureLoader.load(`/pho/${img}`));\r\n\r\n//         // --- Solar System Group ---\r\n//         const solarSystem = new THREE.Group();\r\n//         scene.add(solarSystem);\r\n\r\n//         // --- Sun ---\r\n//         const sun = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.2, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: sunTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(sun);\r\n\r\n//         // --- Earth ---\r\n//         const earth = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.1, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: earthTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(earth);\r\n\r\n//         // --- Earth-Sun line ---\r\n//         const lineMaterial = new THREE.LineDashedMaterial({ dashSize: 0.2, gapSize: 0.1 });\r\n//         const lineGeometry = new THREE.BufferGeometry();\r\n//         const linePositions = new Float32Array(6);\r\n//         lineGeometry.setAttribute(\"position\", new THREE.BufferAttribute(linePositions, 3));\r\n//         const earthSunLine = new THREE.Line(lineGeometry, lineMaterial);\r\n//         earthSunLine.computeLineDistances();\r\n//         solarSystem.add(earthSunLine);\r\n\r\n//         // --- Orbit ---\r\n//         const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x4169e1, transparent: true, opacity: 0.8 });\r\n//         const orbit = new THREE.Mesh(new THREE.TorusGeometry(1, 0.007, 16, 200), orbitMaterial);\r\n//         solarSystem.add(orbit);\r\n\r\n//         // --- Zodiac Labels + Images ---\r\n//         const zodiacNames = [\"天秤宫\", \"天蝎宫\", \"射手宫\", \"摩羯宫\", \"水瓶宫\", \"双鱼宫\", \"白羊宫\", \"金牛宫\", \"双子宫\", \"巨蟹宫\", \"狮子宫\", \"处女宫\"];\r\n//         const zodiacPlanes: THREE.Mesh[] = [];\r\n\r\n//         for (let i = 0; i < 12; i++) {\r\n//             const angle = (i * Math.PI * 2) / 12;\r\n//             const radius = 2.2;\r\n//             const tex = loadedConstellationTextures[i];\r\n//             const mat = new THREE.MeshBasicMaterial({ map: tex, transparent: true, side: THREE.DoubleSide });\r\n//             const plane = new THREE.Mesh(new THREE.PlaneGeometry(0.6, 0.6), mat);\r\n//             plane.position.set(Math.cos(angle) * radius, Math.sin(angle) * radius, 0);\r\n//             solarSystem.add(plane);\r\n//             zodiacPlanes.push(plane);\r\n\r\n//             // --- Text label (CSS2DObject) ---\r\n//             const div = document.createElement(\"div\");\r\n//             div.className = \"label\";\r\n//             div.textContent = zodiacNames[i];\r\n//             div.style.color = \"white\";\r\n//             div.style.fontSize = \"14px\";\r\n//             div.style.fontWeight = \"bold\";\r\n//             // pointerEvents none (不拦截鼠标)\r\n//             div.style.pointerEvents = \"none\";\r\n//             const label = new CSS2DObject(div);\r\n//             label.position.set(Math.cos(angle) * (radius + 0.5), Math.sin(angle) * (radius + 0.5), 0);\r\n//             solarSystem.add(label);\r\n//         }\r\n\r\n//         // 整体上移\r\n//         solarSystem.position.y = 1.5;\r\n\r\n//         // --- Julian Date & position calculations ---\r\n//         const julianDate = (date: Date) => {\r\n//             const year = date.getFullYear();\r\n//             const month = date.getMonth() + 1;\r\n//             const day = date.getDate();\r\n//             const a = Math.floor((14 - month) / 12);\r\n//             const y = year + 4800 - a;\r\n//             const m = month + 12 * a - 3;\r\n//             return day + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045 + 0.5;\r\n//         };\r\n\r\n//         const calculatePositions = (date: Date) => {\r\n//             const JD = julianDate(date);\r\n//             const J2000 = 2451545.0;\r\n//             const n = JD - J2000;\r\n//             const L0 = (280.46646 + 0.98564736 * n) % 360;\r\n//             const M = (357.52911 + 0.98560028 * n) % 360;\r\n//             const M_rad = (M * Math.PI) / 180;\r\n//             const C = (1.914602 - 0.004817 * (n / 36525) - 0.000014 * (n / 36525) ** 2) * Math.sin(M_rad) +\r\n//                 (0.019993 - 0.000101 * (n / 36525)) * Math.sin(2 * M_rad) + 0.000289 * Math.sin(3 * M_rad);\r\n//             const L_E = (L0 + C) % 360;\r\n//             const L_S = (L_E + 180) % 360;\r\n//             return {\r\n//                 earthLongitude: L_E,\r\n//                 sunLongitude: L_S,\r\n//                 earthX: Math.cos(L_E * Math.PI / 180),\r\n//                 earthY: Math.sin(L_E * Math.PI / 180)\r\n//             };\r\n//         };\r\n\r\n//         const updateEarthAndLine = (date: Date) => {\r\n//             const pos = calculatePositions(date);\r\n//             earth.position.set(pos.earthX, pos.earthY, 0);\r\n\r\n//             const sunDir = new THREE.Vector3(-pos.earthX, -pos.earthY, 0).normalize().multiplyScalar(3);\r\n//             const arr = (earthSunLine.geometry.attributes.position.array as Float32Array);\r\n//             arr[0] = pos.earthX; arr[1] = pos.earthY; arr[2] = 0;\r\n//             arr[3] = sunDir.x; arr[4] = sunDir.y; arr[5] = 0;\r\n//             earthSunLine.geometry.attributes.position.needsUpdate = true;\r\n//             earthSunLine.computeLineDistances();\r\n\r\n//             const info = document.getElementById(\"info\");\r\n//             if (info) {\r\n//                 const zodiacIndex = Math.floor(pos.sunLongitude / 30) % 12;\r\n//                 info.textContent = `观测日期: ${date.toLocaleDateString()}\\n地球黄经: ${pos.earthLongitude.toFixed(2)}°\\n太阳视黄经: ${pos.sunLongitude.toFixed(2)}°\\n太阳位于: ${zodiacNames[zodiacIndex]}`;\r\n//             }\r\n//         };\r\n\r\n//         // 把 update 方法挂到 window（谨慎用，仅为兼容你原逻辑）\r\n//         // @ts-ignore\r\n//         window.updateEarthAndLine = updateEarthAndLine;\r\n\r\n//         camera.position.set(0, 0, 9);\r\n//         camera.lookAt(0, 0, 0);\r\n//         updateEarthAndLine(currentDate);\r\n\r\n//         // --- Animation loop ---\r\n//         const animate = () => {\r\n//             animRef.current = requestAnimationFrame(animate);\r\n//             controls.update();\r\n//             zodiacPlanes.forEach(plane => plane.lookAt(camera.position));\r\n//             renderer.render(scene, camera);\r\n//             labelRenderer.render(scene, camera);\r\n//         };\r\n//         animate();\r\n\r\n//         // --- Handle resize ---\r\n//         const onResize = () => {\r\n//             camera.aspect = window.innerWidth / window.innerHeight;\r\n//             camera.updateProjectionMatrix();\r\n//             renderer.setSize(window.innerWidth, window.innerHeight);\r\n//             labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         };\r\n//         window.addEventListener(\"resize\", onResize);\r\n\r\n//         // --- Cleanup on unmount ---\r\n//         return () => {\r\n//             window.removeEventListener(\"resize\", onResize);\r\n\r\n//             // cancel animation\r\n//             if (animRef.current) {\r\n//                 cancelAnimationFrame(animRef.current);\r\n//                 animRef.current = null;\r\n//             }\r\n\r\n//             // dispose controls\r\n//             try {\r\n//                 controls.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             // remove global attach\r\n//             // @ts-ignore\r\n//             if (window.updateEarthAndLine) delete window.updateEarthAndLine;\r\n\r\n//             // remove appended DOM nodes if still present\r\n//             removeIfExist(EXISTING_CANVAS_ID);\r\n//             removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//             // dispose geometries / materials to avoid memory leaks\r\n//             try {\r\n//                 starField.geometry.dispose();\r\n//                 // dispose textures/materials we created\r\n//                 sun.geometry.dispose();\r\n//                 (sun.material as THREE.Material).dispose();\r\n//                 earth.geometry.dispose();\r\n//                 (earth.material as THREE.Material).dispose();\r\n//                 orbit.geometry.dispose();\r\n//                 (orbit.material as THREE.Material).dispose();\r\n//                 lineGeometry.dispose();\r\n//                 (lineMaterial as THREE.Material).dispose();\r\n//                 // dispose loaded constellation textures and materials\r\n//                 loadedConstellationTextures.forEach((t) => { if (t) t.dispose && (t as any).dispose(); });\r\n//             } catch (e) {\r\n//                 // 某些对象可能已被 GC 或不同实现，忽略错误\r\n//             }\r\n\r\n//             // ensure renderer disposed\r\n//             try {\r\n//                 renderer.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             rendererRef.current = null;\r\n//             labelRendererRef.current = null;\r\n//             controlsRef.current = null;\r\n//         };\r\n//         // eslint-disable-next-line react-hooks/exhaustive-deps\r\n//     }, []); // 仅在挂载/卸载时运行\r\n\r\n//     const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n//         const val = e.target.value;\r\n//         if (!val) return;\r\n//         const newDate = new Date(val);\r\n//         setCurrentDate(newDate);\r\n//         const updateEvent = new CustomEvent(\"updateEarth\", { detail: newDate });\r\n//         window.dispatchEvent(updateEvent);\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         const listener = (e: any) => {\r\n//             const date: Date = e.detail;\r\n//             // @ts-ignore\r\n//             window.updateEarthAndLine && window.updateEarthAndLine(date);\r\n//         };\r\n//         window.addEventListener(\"updateEarth\", listener);\r\n//         return () => window.removeEventListener(\"updateEarth\", listener);\r\n//     }, []);\r\n\r\n//     const formatDateInput = (date: Date) => {\r\n//         const year = date.getFullYear();\r\n//         const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n//         const day = String(date.getDate()).padStart(2, \"0\");\r\n//         const hours = String(date.getHours()).padStart(2, \"0\");\r\n//         const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n//         return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n//     };\r\n\r\n//     return (\r\n//         <div className=\"bg-black text-white min-h-screen flex flex-col\">\r\n//             <div className=\"relative z-10 flex flex-col h-screen\">\r\n//                 <div ref={containerRef} style={{ width: \"100vw\", height: \"100vh\", position: \"relative\" }}>\r\n//                     <div id=\"info\" style={{ position: \"absolute\", top: \"10px\", left: \"10px\", color: \"yellow\", fontFamily: \"monospace\", fontSize: \"14px\", whiteSpace: \"pre\", textShadow: \"1px 1px 1px black\" }} />\r\n//                     <div style={{ position: \"absolute\", top: \"10px\", right: \"10px\", background: \"rgba(0,0,0,0.6)\", padding: \"15px\", borderRadius: \"8px\" }}>\r\n//                         <label style={{ color: \"white\", fontSize: \"14px\" }} />\r\n//                         <input type=\"datetime-local\" value={formatDateInput(currentDate)} onChange={handleDateChange} style={{ padding: \"5px\", borderRadius: \"10px\", border: \"1px solid #666\", background: \"rgba(255,255,255,0.9)\" }} />\r\n//                     </div>\r\n//                 </div>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// }\r\nimport React from \"react\";\r\n\r\nconst ZodiacEmbed: React.FC = () => {\r\n    return (\r\n        <div style={{ width: \"100%\", height: \"100vh\", overflow: \"hidden\" }}>\r\n            <iframe\r\n                src=\"/js/moon.html\"\r\n                title=\"qixingguiji\"\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    border: \"none\",\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ZodiacEmbed;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1289, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/seven-data/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function PlanetCalculator() {\r\n    const [formData, setFormData] = useState({\r\n        latitude: \"30.67\",\r\n        longitude: \"104.06\",\r\n        date: \"\",\r\n        time: \"\",\r\n        altitude: \"500\",\r\n    });\r\n\r\n    const [planetsData, setPlanetsData] = useState<Record<string, any> | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    // ✅ 演示数据\r\n    const demoData = {\r\n        \"太阳\": { rise: \"05 : 11 : 52\", transit: \"12 : 00 : 21\", set: \"18 : 40 : 12\", declination: \"17.582549\" },\r\n        \"月球\": { rise: \"04 : 05 : 23\", transit: \"11 : 12 : 48\", set: \"17 : 54 : 09\", declination: \"19.482000\" },\r\n        \"水星\": { rise: \"05 : 45 : 13\", transit: \"12 : 09 : 42\", set: \"18 : 33 : 21\", declination: \"8.923451\" },\r\n        \"金星\": { rise: \"06 : 15 : 01\", transit: \"12 : 33 : 12\", set: \"18 : 51 : 22\", declination: \"-2.145325\" },\r\n        \"火星\": { rise: \"02 : 12 : 41\", transit: \"09 : 21 : 09\", set: \"16 : 29 : 37\", declination: \"4.231123\" },\r\n        \"木星\": { rise: \"19 : 22 : 15\", transit: \"01 : 55 : 34\", set: \"08 : 28 : 53\", declination: \"-15.678901\" },\r\n        \"土星\": { rise: \"22 : 11 : 34\", transit: \"04 : 35 : 01\", set: \"10 : 58 : 28\", declination: \"-10.234789\" },\r\n    };\r\n\r\n    useEffect(() => {\r\n        const now = new Date();\r\n        const dateStr = now.toISOString().split(\"T\")[0];\r\n        const timeStr = now.toTimeString().slice(0, 5);\r\n        setFormData((prev) => ({ ...prev, date: dateStr, time: timeStr }));\r\n        setPlanetsData(demoData);\r\n    }, []);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(\"\");\r\n        setPlanetsData(null);\r\n        try {\r\n            const res = await axios.post(\"/api/planets\", {\r\n                latitude: parseFloat(formData.latitude),\r\n                longitude: parseFloat(formData.longitude),\r\n                date: formData.date,\r\n                time: formData.time,\r\n            });\r\n\r\n            if (res.data && res.data.success) {\r\n                const responseData = res.data.data;\r\n                // ✅ 转换为 demoData 格式\r\n                const formattedData: Record<string, any> = {};\r\n                for (const planet of Object.keys(responseData)) {\r\n                    const p = responseData[planet];\r\n                    formattedData[planet] = {\r\n                        rise: p.rise || \"-- : -- : --\",\r\n                        transit: p.transit || \"-- : -- : --\",\r\n                        set: p.set || \"-- : -- : --\",\r\n                        declination: p.declination?.toFixed?.(6) || \"0.000000\",\r\n                    };\r\n                }\r\n                setPlanetsData(formattedData);\r\n            } else {\r\n                throw new Error(res.data?.error?.message || \"获取行星数据失败\");\r\n            }\r\n        } catch (err: any) {\r\n            const errorMessage = err.response?.data?.error?.message || err.message || \"获取行星数据失败，请稍后再试。\";\r\n            setError(errorMessage);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative min-h-screen bg-black text-white flex flex-col items-center justify-start pt-4 pb-2 overflow-hidden\">\r\n            {/* 背景 */}\r\n            <div className=\"absolute inset-0 bg-[url('/stars-bg.png')] bg-cover bg-center opacity-40 pointer-events-none\"></div>\r\n\r\n            {/* 输入表单 */}\r\n            <form\r\n                onSubmit={handleSubmit}\r\n                className=\"relative z-10 mt-2 w-[92%] max-w-2xl backdrop-blur-md bg-white/10 border border-white/20 rounded-2xl px-0 py-4 shadow-[0_0_20px_rgba(255,255,255,0.05)] text-sm\"\r\n            >\r\n                <div className=\"flex items-end gap-2\">\r\n                    {/* 左侧 80% 输入框 */}\r\n                    <div className=\"w-4/5 space-y-1 px-3\">\r\n                        {[\r\n                            [\"纬度 Latitude\", \"latitude\"],\r\n                            [\"经度 Longitude\", \"longitude\"],\r\n                            [\"日期 Date\", \"date\"],\r\n                            [\"时间 Time(HH:MM)\", \"time\"],\r\n                            [\"海拔 Altitude\", \"altitude\"],\r\n                        ].map(([label, name]) => (\r\n                            <div key={name}>\r\n                                <label className=\"block text-xs mb-1 opacity-80\">{label}</label>\r\n                                <input\r\n                                    type={name === \"date\" ? \"date\" : name === \"time\" ? \"time\" : \"text\"}\r\n                                    name={name}\r\n                                    value={(formData as any)[name] || \"\"}\r\n                                    onChange={handleChange}\r\n                                    className=\"w-full bg-white/10 border border-white/20 rounded-full px-2 py-1.5 text-left text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-400 text-sm\"\r\n                                    required={name !== \"altitude\"}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* 右侧 20% 图片按钮 */}\r\n                    <div className=\"w-1/5 flex justify-center\">\r\n                        <button type=\"submit\" disabled={loading} className=\"p-0 bg-transparent border-none\">\r\n                            <img\r\n                                src=\"/pho/箭头.png\"\r\n                                alt={loading ? \"计算中...\" : \"开始计算\"}\r\n                                className=\"w-full h-auto\"\r\n                            />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n\r\n\r\n            <div className=\"relative z-10 my-2 w-[92%] max-w-md border-t border-white/20\"></div>\r\n            {/* 表头按钮风格 */}\r\n            <div className=\"grid grid-cols-5 gap-2 text-center mb-2\">\r\n                {[\"行星\", \"升起\", \"中天\", \"落下\", \"赤纬角\"].map((title) => (\r\n                    <div\r\n                        key={title}\r\n                        className=\"bg-[rgb(90,89,122)] text-white text-xs py-1 px-3 rounded-full cursor-default select-none\"\r\n                    >\r\n                        {title}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* 行星数据表 */}\r\n            {planetsData && (\r\n                <div className=\"p-3 text-sm\">\r\n                    {/* <div\r\n                        className=\"grid grid-cols-5 gap-0.5 text-center text-xs mb-1 font-semibold opacity-90 border-b\"\r\n                        style={{ borderColor: \"rgb(90, 89, 122)\" }}\r\n                    >\r\n                        <span className=\"whitespace-nowrap\">行星</span>\r\n                        <span className=\"whitespace-nowrap\">升起</span>\r\n                        <span className=\"whitespace-nowrap\">中天</span>\r\n                        <span className=\"whitespace-nowrap\">落下</span>\r\n                        <span className=\"whitespace-nowrap\">赤纬角</span>\r\n                    </div> */}\r\n                    <div className=\"space-y-0.5 text-xs text-gray-100\">\r\n                        {Object.entries(planetsData).map(([planet, d]: any) => (\r\n                            <div\r\n                                key={planet}\r\n                                className=\"grid grid-cols-5 gap-0.5 text-center py-0.5 rounded hover:bg-white/5 transition\"\r\n                            >\r\n                                <span className=\"whitespace-nowrap\">{planet}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.rise}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.transit}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.set}</span>\r\n                                <span className=\"whitespace-nowrap\">{d.declination}°</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n\r\n\r\n            {error && (\r\n                <div className=\"z-10 mt-2 text-red-400 bg-red-900/30 px-3 py-1.5 rounded-lg text-sm\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1630, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/zodiac/page.tsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import { useEffect, useRef, useState } from \"react\";\r\n// import * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n// import { CSS2DRenderer, CSS2DObject } from \"three/examples/jsm/renderers/CSS2DRenderer\";\r\n// import BottomNav from \"@/components/Footer/BottomNav\";\r\n\r\n// export default function ZodiacPage() {\r\n//     const containerRef = useRef<HTMLDivElement | null>(null);\r\n//     const animRef = useRef<number | null>(null);\r\n//     const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n//     const labelRendererRef = useRef<CSS2DRenderer | null>(null);\r\n//     const controlsRef = useRef<OrbitControls | null>(null);\r\n//     const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n//     useEffect(() => {\r\n//         if (!containerRef.current) return;\r\n//         const container = containerRef.current;\r\n\r\n//         // --- 如果页面已有旧的 canvas / labelRenderer DOM，先移除它们（避免重复附加） ---\r\n//         const EXISTING_CANVAS_ID = \"threejs-canvas\";\r\n//         const EXISTING_LABELS_ID = \"threejs-labels\";\r\n\r\n//         const removeIfExist = (id: string) => {\r\n//             const el = container.querySelector(`#${id}`);\r\n//             if (el) el.remove();\r\n//         };\r\n//         removeIfExist(EXISTING_CANVAS_ID);\r\n//         removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//         // --- Scene, Camera, Renderer ---\r\n//         const scene = new THREE.Scene();\r\n//         const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n//         const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n//         renderer.setSize(window.innerWidth, window.innerHeight);\r\n//         renderer.setClearColor(0x000000);\r\n//         // 给 canvas 一个稳定 id（方便清理）\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n//         rendererRef.current = renderer;\r\n\r\n//         // --- CSS2DRenderer for labels ---\r\n//         const labelRenderer = new CSS2DRenderer();\r\n//         labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         // append renderer + labelRenderer (顺序无关，label 在上)\r\n//         renderer.domElement.id = EXISTING_CANVAS_ID;\r\n//         container.appendChild(renderer.domElement);\r\n\r\n//         labelRenderer.domElement.style.position = \"absolute\";\r\n//         labelRenderer.domElement.style.top = \"0\";\r\n//         labelRenderer.domElement.style.pointerEvents = \"none\"; // 让事件穿透到 canvas\r\n//         labelRenderer.domElement.id = EXISTING_LABELS_ID;\r\n//         container.appendChild(labelRenderer.domElement);\r\n\r\n//         // bind controls to canvas\r\n//         const controls = new OrbitControls(camera, renderer.domElement);\r\n//         controls.enableDamping = true;\r\n//         controls.dampingFactor = 0.05;\r\n\r\n\r\n//         // --- Star field ---\r\n//         const starsGeometry = new THREE.BufferGeometry();\r\n//         const starsCount = 2000;\r\n//         const positions = new Float32Array(starsCount * 3);\r\n//         for (let i = 0; i < starsCount * 3; i++) {\r\n//             positions[i] = (Math.random() - 0.5) * 100;\r\n//         }\r\n//         starsGeometry.setAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\r\n//         const starField = new THREE.Points(\r\n//             starsGeometry,\r\n//             new THREE.PointsMaterial({ size: 0.1, transparent: true })\r\n//         );\r\n//         scene.add(starField);\r\n\r\n//         // --- Load Textures ---\r\n//         const textureLoader = new THREE.TextureLoader();\r\n//         const sunTexture = textureLoader.load(\"/pho/sun1.png\");\r\n//         const earthTexture = textureLoader.load(\"/pho/earth.png\");\r\n\r\n//         const constellationImages = [\r\n//             \"libra.png\", \"scorpio.png\", \"sagittarius.png\", \"capricorn.png\",\r\n//             \"aquarius.png\", \"pisces.png\", \"aries.png\", \"taurus.png\",\r\n//             \"gemini.png\", \"cancer.png\", \"leo.png\", \"virgo.png\"\r\n//         ];\r\n//         const loadedConstellationTextures = constellationImages.map(img => textureLoader.load(`/pho/${img}`));\r\n\r\n//         // --- Solar System Group ---\r\n//         const solarSystem = new THREE.Group();\r\n//         scene.add(solarSystem);\r\n\r\n//         // --- Sun ---\r\n//         const sun = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.2, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: sunTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(sun);\r\n\r\n//         // --- Earth ---\r\n//         const earth = new THREE.Mesh(\r\n//             new THREE.SphereGeometry(0.1, 32, 32),\r\n//             new THREE.MeshBasicMaterial({ map: earthTexture, transparent: true })\r\n//         );\r\n//         solarSystem.add(earth);\r\n\r\n//         // --- Earth-Sun line ---\r\n//         const lineMaterial = new THREE.LineDashedMaterial({ dashSize: 0.2, gapSize: 0.1 });\r\n//         const lineGeometry = new THREE.BufferGeometry();\r\n//         const linePositions = new Float32Array(6);\r\n//         lineGeometry.setAttribute(\"position\", new THREE.BufferAttribute(linePositions, 3));\r\n//         const earthSunLine = new THREE.Line(lineGeometry, lineMaterial);\r\n//         earthSunLine.computeLineDistances();\r\n//         solarSystem.add(earthSunLine);\r\n\r\n//         // --- Orbit ---\r\n//         const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x4169e1, transparent: true, opacity: 0.8 });\r\n//         const orbit = new THREE.Mesh(new THREE.TorusGeometry(1, 0.007, 16, 200), orbitMaterial);\r\n//         solarSystem.add(orbit);\r\n\r\n//         // --- Zodiac Labels + Images ---\r\n//         const zodiacNames = [\"天秤宫\", \"天蝎宫\", \"射手宫\", \"摩羯宫\", \"水瓶宫\", \"双鱼宫\", \"白羊宫\", \"金牛宫\", \"双子宫\", \"巨蟹宫\", \"狮子宫\", \"处女宫\"];\r\n//         const zodiacPlanes: THREE.Mesh[] = [];\r\n\r\n//         for (let i = 0; i < 12; i++) {\r\n//             const angle = (i * Math.PI * 2) / 12;\r\n//             const radius = 2.2;\r\n//             const tex = loadedConstellationTextures[i];\r\n//             const mat = new THREE.MeshBasicMaterial({ map: tex, transparent: true, side: THREE.DoubleSide });\r\n//             const plane = new THREE.Mesh(new THREE.PlaneGeometry(0.6, 0.6), mat);\r\n//             plane.position.set(Math.cos(angle) * radius, Math.sin(angle) * radius, 0);\r\n//             solarSystem.add(plane);\r\n//             zodiacPlanes.push(plane);\r\n\r\n//             // --- Text label (CSS2DObject) ---\r\n//             const div = document.createElement(\"div\");\r\n//             div.className = \"label\";\r\n//             div.textContent = zodiacNames[i];\r\n//             div.style.color = \"white\";\r\n//             div.style.fontSize = \"14px\";\r\n//             div.style.fontWeight = \"bold\";\r\n//             // pointerEvents none (不拦截鼠标)\r\n//             div.style.pointerEvents = \"none\";\r\n//             const label = new CSS2DObject(div);\r\n//             label.position.set(Math.cos(angle) * (radius + 0.5), Math.sin(angle) * (radius + 0.5), 0);\r\n//             solarSystem.add(label);\r\n//         }\r\n\r\n//         // 整体上移\r\n//         solarSystem.position.y = 1.5;\r\n\r\n//         // --- Julian Date & position calculations ---\r\n//         const julianDate = (date: Date) => {\r\n//             const year = date.getFullYear();\r\n//             const month = date.getMonth() + 1;\r\n//             const day = date.getDate();\r\n//             const a = Math.floor((14 - month) / 12);\r\n//             const y = year + 4800 - a;\r\n//             const m = month + 12 * a - 3;\r\n//             return day + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045 + 0.5;\r\n//         };\r\n\r\n//         const calculatePositions = (date: Date) => {\r\n//             const JD = julianDate(date);\r\n//             const J2000 = 2451545.0;\r\n//             const n = JD - J2000;\r\n//             const L0 = (280.46646 + 0.98564736 * n) % 360;\r\n//             const M = (357.52911 + 0.98560028 * n) % 360;\r\n//             const M_rad = (M * Math.PI) / 180;\r\n//             const C = (1.914602 - 0.004817 * (n / 36525) - 0.000014 * (n / 36525) ** 2) * Math.sin(M_rad) +\r\n//                 (0.019993 - 0.000101 * (n / 36525)) * Math.sin(2 * M_rad) + 0.000289 * Math.sin(3 * M_rad);\r\n//             const L_E = (L0 + C) % 360;\r\n//             const L_S = (L_E + 180) % 360;\r\n//             return {\r\n//                 earthLongitude: L_E,\r\n//                 sunLongitude: L_S,\r\n//                 earthX: Math.cos(L_E * Math.PI / 180),\r\n//                 earthY: Math.sin(L_E * Math.PI / 180)\r\n//             };\r\n//         };\r\n\r\n//         const updateEarthAndLine = (date: Date) => {\r\n//             const pos = calculatePositions(date);\r\n//             earth.position.set(pos.earthX, pos.earthY, 0);\r\n\r\n//             const sunDir = new THREE.Vector3(-pos.earthX, -pos.earthY, 0).normalize().multiplyScalar(3);\r\n//             const arr = (earthSunLine.geometry.attributes.position.array as Float32Array);\r\n//             arr[0] = pos.earthX; arr[1] = pos.earthY; arr[2] = 0;\r\n//             arr[3] = sunDir.x; arr[4] = sunDir.y; arr[5] = 0;\r\n//             earthSunLine.geometry.attributes.position.needsUpdate = true;\r\n//             earthSunLine.computeLineDistances();\r\n\r\n//             const info = document.getElementById(\"info\");\r\n//             if (info) {\r\n//                 const zodiacIndex = Math.floor(pos.sunLongitude / 30) % 12;\r\n//                 info.textContent = `观测日期: ${date.toLocaleDateString()}\\n地球黄经: ${pos.earthLongitude.toFixed(2)}°\\n太阳视黄经: ${pos.sunLongitude.toFixed(2)}°\\n太阳位于: ${zodiacNames[zodiacIndex]}`;\r\n//             }\r\n//         };\r\n\r\n//         // 把 update 方法挂到 window（谨慎用，仅为兼容你原逻辑）\r\n//         // @ts-ignore\r\n//         window.updateEarthAndLine = updateEarthAndLine;\r\n\r\n//         camera.position.set(0, 0, 9);\r\n//         camera.lookAt(0, 0, 0);\r\n//         updateEarthAndLine(currentDate);\r\n\r\n//         // --- Animation loop ---\r\n//         const animate = () => {\r\n//             animRef.current = requestAnimationFrame(animate);\r\n//             controls.update();\r\n//             zodiacPlanes.forEach(plane => plane.lookAt(camera.position));\r\n//             renderer.render(scene, camera);\r\n//             labelRenderer.render(scene, camera);\r\n//         };\r\n//         animate();\r\n\r\n//         // --- Handle resize ---\r\n//         const onResize = () => {\r\n//             camera.aspect = window.innerWidth / window.innerHeight;\r\n//             camera.updateProjectionMatrix();\r\n//             renderer.setSize(window.innerWidth, window.innerHeight);\r\n//             labelRenderer.setSize(window.innerWidth, window.innerHeight);\r\n//         };\r\n//         window.addEventListener(\"resize\", onResize);\r\n\r\n//         // --- Cleanup on unmount ---\r\n//         return () => {\r\n//             window.removeEventListener(\"resize\", onResize);\r\n\r\n//             // cancel animation\r\n//             if (animRef.current) {\r\n//                 cancelAnimationFrame(animRef.current);\r\n//                 animRef.current = null;\r\n//             }\r\n\r\n//             // dispose controls\r\n//             try {\r\n//                 controls.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             // remove global attach\r\n//             // @ts-ignore\r\n//             if (window.updateEarthAndLine) delete window.updateEarthAndLine;\r\n\r\n//             // remove appended DOM nodes if still present\r\n//             removeIfExist(EXISTING_CANVAS_ID);\r\n//             removeIfExist(EXISTING_LABELS_ID);\r\n\r\n//             // dispose geometries / materials to avoid memory leaks\r\n//             try {\r\n//                 starField.geometry.dispose();\r\n//                 // dispose textures/materials we created\r\n//                 sun.geometry.dispose();\r\n//                 (sun.material as THREE.Material).dispose();\r\n//                 earth.geometry.dispose();\r\n//                 (earth.material as THREE.Material).dispose();\r\n//                 orbit.geometry.dispose();\r\n//                 (orbit.material as THREE.Material).dispose();\r\n//                 lineGeometry.dispose();\r\n//                 (lineMaterial as THREE.Material).dispose();\r\n//                 // dispose loaded constellation textures and materials\r\n//                 loadedConstellationTextures.forEach((t) => { if (t) t.dispose && (t as any).dispose(); });\r\n//             } catch (e) {\r\n//                 // 某些对象可能已被 GC 或不同实现，忽略错误\r\n//             }\r\n\r\n//             // ensure renderer disposed\r\n//             try {\r\n//                 renderer.dispose();\r\n//             } catch (e) { /* ignore */ }\r\n\r\n//             rendererRef.current = null;\r\n//             labelRendererRef.current = null;\r\n//             controlsRef.current = null;\r\n//         };\r\n//         // eslint-disable-next-line react-hooks/exhaustive-deps\r\n//     }, []); // 仅在挂载/卸载时运行\r\n\r\n//     const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n//         const val = e.target.value;\r\n//         if (!val) return;\r\n//         const newDate = new Date(val);\r\n//         setCurrentDate(newDate);\r\n//         const updateEvent = new CustomEvent(\"updateEarth\", { detail: newDate });\r\n//         window.dispatchEvent(updateEvent);\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         const listener = (e: any) => {\r\n//             const date: Date = e.detail;\r\n//             // @ts-ignore\r\n//             window.updateEarthAndLine && window.updateEarthAndLine(date);\r\n//         };\r\n//         window.addEventListener(\"updateEarth\", listener);\r\n//         return () => window.removeEventListener(\"updateEarth\", listener);\r\n//     }, []);\r\n\r\n//     const formatDateInput = (date: Date) => {\r\n//         const year = date.getFullYear();\r\n//         const month = String(date.getMonth() + 1).padStart(2, \"0\");\r\n//         const day = String(date.getDate()).padStart(2, \"0\");\r\n//         const hours = String(date.getHours()).padStart(2, \"0\");\r\n//         const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n//         return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n//     };\r\n\r\n//     return (\r\n//         <div className=\"bg-black text-white min-h-screen flex flex-col\">\r\n//             <div className=\"relative z-10 flex flex-col h-screen\">\r\n//                 <div ref={containerRef} style={{ width: \"100vw\", height: \"100vh\", position: \"relative\" }}>\r\n//                     <div id=\"info\" style={{ position: \"absolute\", top: \"10px\", left: \"10px\", color: \"yellow\", fontFamily: \"monospace\", fontSize: \"14px\", whiteSpace: \"pre\", textShadow: \"1px 1px 1px black\" }} />\r\n//                     <div style={{ position: \"absolute\", top: \"10px\", right: \"10px\", background: \"rgba(0,0,0,0.6)\", padding: \"15px\", borderRadius: \"8px\" }}>\r\n//                         <label style={{ color: \"white\", fontSize: \"14px\" }} />\r\n//                         <input type=\"datetime-local\" value={formatDateInput(currentDate)} onChange={handleDateChange} style={{ padding: \"5px\", borderRadius: \"10px\", border: \"1px solid #666\", background: \"rgba(255,255,255,0.9)\" }} />\r\n//                     </div>\r\n//                 </div>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// }\r\nimport React from \"react\";\r\n\r\nconst ZodiacEmbed: React.FC = () => {\r\n    return (\r\n        <div style={{ width: \"100%\", height: \"100vh\", overflow: \"hidden\" }}>\r\n            <iframe\r\n                src=\"/js/十二宫图.html\"\r\n                title=\"十二宫图\"\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    border: \"none\",\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ZodiacEmbed;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1943, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/tibetan-cycle/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function TibetanCyclePage() {\r\n    const baseYear = 2025;\r\n    const [year, setYear] = useState<number>(baseYear);\r\n    const [result, setResult] = useState<string>(\"\");\r\n    const [rotation, setRotation] = useState({ tg: 18, dz: 195 });\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    // 天干地支计算表\r\n    const tiangan = [\"铁\", \"铁\", \"水\", \"水\", \"木\", \"木\", \"火\", \"火\", \"土\", \"土\"];\r\n    const dizhi = [\"虎\", \"兔\", \"龙\", \"蛇\", \"马\", \"羊\", \"猴\", \"鸡\", \"狗\", \"猪\", \"鼠\", \"牛\"];\r\n    const ganzhiList: string[] = [];\r\n    for (let i = 0; i < 60; i++) {\r\n        ganzhiList.push(tiangan[(i - 6 + 10) % 10] + dizhi[(i - 2 + 12) % 12]);\r\n    }\r\n\r\n    // 年份列表\r\n    const years = Array.from({ length: 201 }, (_, i) => baseYear - 100 + i);\r\n\r\n    // 计算干支与旋转角\r\n    const calculate = (y: number = year) => {\r\n        const offsetYear = (y - 2025) % 60;\r\n        const dzAngle = -offsetYear * 30;\r\n        const tgAngle = -offsetYear * 36;\r\n        setRotation({\r\n            dz: 240 + 360 + dzAngle,\r\n            tg: -54 + 360 + tgAngle,\r\n        });\r\n        const index = (y + 56 + 60) % 60;\r\n        setResult(`${y} 年是 【${ganzhiList[index]}】年`);\r\n    };\r\n\r\n    useEffect(() => {\r\n        calculate(baseYear);\r\n    }, []);\r\n\r\n    // 打开下拉时滚动至当前年份顶部\r\n    useEffect(() => {\r\n        if (isOpen && scrollRef.current) {\r\n            const index = years.indexOf(year);\r\n            const itemHeight = 40;\r\n            const top = index * itemHeight;\r\n            setTimeout(() => {\r\n                scrollRef.current!.scrollTo({\r\n                    top: top > 0 ? top : 0,\r\n                    behavior: \"auto\",\r\n                });\r\n            }, 30);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // 点击外部关闭\r\n    useEffect(() => {\r\n        const handleClickOutside = (e: MouseEvent) => {\r\n            if (!(e.target as HTMLElement).closest(\".year-selector\")) setIsOpen(false);\r\n        };\r\n        document.addEventListener(\"click\", handleClickOutside);\r\n        return () => document.removeEventListener(\"click\", handleClickOutside);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"bg-black text-white min-h-screen flex flex-col items-center pt-6\">\r\n            <style>{`\r\n                @keyframes fadeInUp {\r\n                    from { opacity: 0; transform: translateY(8px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n                .animate-fadeInUp { animation: fadeInUp 200ms ease-out; }\r\n                .no-scrollbar::-webkit-scrollbar { width: 6px; }\r\n                .no-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 8px; }\r\n            `}</style>\r\n\r\n            {/* 年份选择 */}\r\n            <div className=\"relative mt-4 year-selector\">\r\n                <button\r\n                    onClick={() => setIsOpen((v) => !v)}\r\n                    className={`relative z-10 px-6 py-3 text-xl font-semibold rounded-xl transition-all ${isOpen ? \"opacity-0 pointer-events-none\" : \"opacity-100\"\r\n                        }`}\r\n                >\r\n                    {year}\r\n                    <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 16 16\"\r\n                        className={`inline-block ml-2 text-gray-300 transition-transform duration-300 ${isOpen ? \"rotate-180\" : \"\"\r\n                            }`}\r\n                    >\r\n                        <path\r\n                            d=\"M4 6l4 4 4-4\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            strokeWidth=\"2\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                        />\r\n                    </svg>\r\n                </button>\r\n\r\n                {isOpen && (\r\n                    <div\r\n                        className=\"absolute top-0 left-1/2 -translate-x-1/2 p-[2px] rounded-2xl bg-white/40 border border-white/60 shadow-[0_0_10px_rgba(255,255,255,0.4)] animate-fadeInUp z-20\"\r\n                    >\r\n                        {/* 毛玻璃内部层 */}\r\n                        <div\r\n                            ref={scrollRef}\r\n                            className=\"w-28 h-[200px] rounded-2xl backdrop-blur-md \r\n                            bg-white/10 border border-gray-600/60 shadow-inner \r\n                            text-center overflow-y-auto no-scrollbar\"\r\n                        >\r\n                            {years.map((y) => {\r\n                                const isActive = y === year;\r\n                                return (\r\n                                    <button\r\n                                        key={y}\r\n                                        onClick={() => {\r\n                                            setYear(y);\r\n                                            calculate(y);\r\n                                            setIsOpen(false);\r\n                                        }}\r\n                                        className={`block w-full h-[40px] text-lg transition-all duration-200 \r\n                                            ${isActive ? \"text-blue-400 scale-110\" : \"text-gray-200 scale-105\"\r\n                                            }`}\r\n                                    >\r\n                                        {y}\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* 天干地支旋转盘 */}\r\n            <div className=\"relative mt-8 w-80 h-80\">\r\n                <div\r\n                    className=\"absolute top-0 left-0 w-full h-full\"\r\n                    style={{\r\n                        transform: `rotate(${rotation.dz}deg)`,\r\n                        transition: \"transform 1s ease-out\",\r\n                    }}\r\n                >\r\n                    <img\r\n                        src=\"/pho/地支.png\"\r\n                        alt=\"地支盘\"\r\n                        className=\"w-full h-full select-none pointer-events-none\"\r\n                    />\r\n                </div>\r\n                <div\r\n                    className=\"absolute top-0 left-0 w-full h-full\"\r\n                    style={{\r\n                        transform: `rotate(${rotation.tg}deg)`,\r\n                        transition: \"transform 1s ease-out\",\r\n                    }}\r\n                >\r\n                    <img\r\n                        src=\"/pho/天干.png\"\r\n                        alt=\"天干盘\"\r\n                        className=\"w-full h-full select-none pointer-events-none\"\r\n                    />\r\n                </div>\r\n                <div className=\"absolute top-0 left-0 w-full h-full\">\r\n                    <img\r\n                        src=\"/pho/指针.png\"\r\n                        alt=\"指针\"\r\n                        className=\"w-full h-full select-none pointer-events-none\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* 干支结果 */}\r\n            <div className=\"mt-8 mb-4 text-lg h-[30px] text-center w-full\">\r\n                {result}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2211, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/widgets/WidgetCarousel.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nexport interface WidgetCarouselProps {\n  items: React.ReactNode[];\n  currentIndex: number;\n  onChange: (idx: number) => void;\n  /** 滑动阈值（像素），默认 50 */\n  swipeThreshold?: number;\n}\n\n/**\n * WidgetCarousel\n * - 用途：包装滑动手势与页面指示点，切换传入的 items。\n * - 使用：见 README 里的示例。\n */\nconst WidgetCarousel: React.FC<WidgetCarouselProps> = ({\n  items,\n  currentIndex,\n  onChange,\n  swipeThreshold = 50\n}) => {\n  const touchStartRef = React.useRef<number>(0);\n  const touchEndRef = React.useRef<number>(0);\n\n  const onTouchStart = (e: React.TouchEvent) => {\n    touchEndRef.current = 0;\n    touchStartRef.current = e.targetTouches[0].clientX;\n  };\n\n  const onTouchMove = (e: React.TouchEvent) => {\n    touchEndRef.current = e.targetTouches[0].clientX;\n  };\n\n  const onTouchEnd = () => {\n    const start = touchStartRef.current;\n    const end = touchEndRef.current;\n    if (!start || !end) return;\n    const distance = start - end;\n    if (distance > swipeThreshold) onChange((currentIndex + 1) % items.length);\n    if (distance < -swipeThreshold) onChange((currentIndex - 1 + items.length) % items.length);\n  };\n\n  return (\n    <div className=\"w-full transition-all duration-500 ease-in-out\">\n      {/* 主内容区域 */}\n      <div className=\"relative\">\n        <div\n          className=\"transform transition-all duration-500 ease-out hover:scale-[1.02] hover:shadow-2xl\"\n          onTouchStart={onTouchStart}\n          onTouchMove={onTouchMove}\n          onTouchEnd={onTouchEnd}\n        >\n          {items[currentIndex]}\n        </div>\n        \n        {/* 渐变遮罩效果 */}\n        <div className=\"absolute inset-0 pointer-events-none bg-gradient-to-t from-transparent via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300\"></div>\n      </div>\n\n    </div>\n  );\n};\n\nexport default WidgetCarousel;\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAYA;;;;CAIC,GACD,MAAM,iBAAgD,CAAC,EACrD,KAAK,EACL,YAAY,EACZ,QAAQ,EACR,iBAAiB,EAAE,EACpB;IACC,MAAM,gBAAgB,qMAAA,CAAA,SAAY,CAAS;IAC3C,MAAM,cAAc,qMAAA,CAAA,SAAY,CAAS;IAEzC,MAAM,eAAe,CAAC;QACpB,YAAY,OAAO,GAAG;QACtB,cAAc,OAAO,GAAG,EAAE,aAAa,CAAC,EAAE,CAAC,OAAO;IACpD;IAEA,MAAM,cAAc,CAAC;QACnB,YAAY,OAAO,GAAG,EAAE,aAAa,CAAC,EAAE,CAAC,OAAO;IAClD;IAEA,MAAM,aAAa;QACjB,MAAM,QAAQ,cAAc,OAAO;QACnC,MAAM,MAAM,YAAY,OAAO;QAC/B,IAAI,CAAC,SAAS,CAAC,KAAK;QACpB,MAAM,WAAW,QAAQ;QACzB,IAAI,WAAW,gBAAgB,SAAS,CAAC,eAAe,CAAC,IAAI,MAAM,MAAM;QACzE,IAAI,WAAW,CAAC,gBAAgB,SAAS,CAAC,eAAe,IAAI,MAAM,MAAM,IAAI,MAAM,MAAM;IAC3F;IAEA,qBACE,8OAAC;QAAI,WAAU;kBAEb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,WAAU;oBACV,cAAc;oBACd,aAAa;oBACb,YAAY;8BAEX,KAAK,CAAC,aAAa;;;;;;8BAItB,8OAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;;AAKvB;uCAEe","debugId":null}},
    {"offset": {"line": 2281, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/EarthNav/EarthNav.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\ninterface EarthNavProps {\r\n    currentPage?: string;\r\n}\r\n\r\nexport default function EarthNav({ currentPage }: EarthNavProps) {\r\n    const pathname = usePathname();\r\n\r\n    // 根据当前路径确定激活状态\r\n    const getActiveTab = () => {\r\n        if (pathname.includes(\"zodiac\")) return \"十二宫\";\r\n        if (pathname.includes(\"seven-stars\")) return \"七星轨迹\";\r\n        if (pathname.includes(\"tibetan-cycle\")) return \"藏历绕迥纪年\";\r\n        return currentPage || \"十二宫\";\r\n    };\r\n\r\n    const activeTab = getActiveTab();\r\n\r\n    const tabs = [\r\n        { name: \"十二宫图\", path: \"/earth?tab=zodiac\" },\r\n        { name: \"七星轨迹\", path: \"/earth?tab=seven-stars\" },\r\n        { name: \"藏历绕迥纪年\", path: \"/earth?tab=tibetan-cycle\" },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"flex justify-center space-x-10 p-6 whitespace-nowrap\">\r\n            {tabs.map((tab) => (\r\n                <Link\r\n                    key={tab.name}\r\n                    href={tab.path}\r\n                    className={`px-3 py-1 rounded-md text-sm transition-all duration-300 ${activeTab === tab.name\r\n                        ? \"bg-blue-600 text-white shadow-md\"\r\n                        : \"bg-gray-700 text-white hover:bg-gray-600\"\r\n                        }`}\r\n                >\r\n                    {tab.name}\r\n                </Link>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AASe,SAAS,SAAS,EAAE,WAAW,EAAiB;IAC3D,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAE3B,eAAe;IACf,MAAM,eAAe;QACjB,IAAI,SAAS,QAAQ,CAAC,WAAW,OAAO;QACxC,IAAI,SAAS,QAAQ,CAAC,gBAAgB,OAAO;QAC7C,IAAI,SAAS,QAAQ,CAAC,kBAAkB,OAAO;QAC/C,OAAO,eAAe;IAC1B;IAEA,MAAM,YAAY;IAElB,MAAM,OAAO;QACT;YAAE,MAAM;YAAQ,MAAM;QAAoB;QAC1C;YAAE,MAAM;YAAQ,MAAM;QAAyB;QAC/C;YAAE,MAAM;YAAU,MAAM;QAA2B;KACtD;IAED,qBACI,8OAAC;QAAI,WAAU;kBACV,KAAK,GAAG,CAAC,CAAC,oBACP,8OAAC,4JAAA,CAAA,UAAI;gBAED,MAAM,IAAI,IAAI;gBACd,WAAW,CAAC,yDAAyD,EAAE,cAAc,IAAI,IAAI,GACvF,qCACA,4CACA;0BAEL,IAAI,IAAI;eAPJ,IAAI,IAAI;;;;;;;;;;AAYjC","debugId":null}},
    {"offset": {"line": 2336, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/FooterBar.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport React, { useState, useEffect } from \"react\";\n\n// 定义导航项类型\ninterface NavItem {\n  href: string;\n  icon: string;\n}\n\n// 自适应 hook - 修复：初始化时立即获取真实窗口宽度\nfunction useWindowWidth(): number {\n  const [width, setWidth] = useState<number>(() => {\n    // 在客户端初始化时立即获取真实窗口宽度\n    if (typeof window !== 'undefined') {\n      return window.innerWidth;\n    }\n    return 390; // 服务端渲染时的默认值\n  });\n\n  useEffect(() => {\n    // 客户端挂载时再次确认宽度（处理初始化时机问题）\n    setWidth(window.innerWidth);\n\n    function handleResize(): void {\n      setWidth(window.innerWidth);\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return width;\n}\n\nexport default function FooterBar(): React.JSX.Element {\n  const pathname = usePathname();\n  const width = useWindowWidth();\n\n  // 按 390px 基准做比例\n  const scale: number = width / 390;\n  const iconSize: number = 18.5 * scale; // 图标大小\n  const footerHeight: number = 51 * scale; // 整个 footer 高度\n\n  const navItems: NavItem[] = [\n    { href: \"/cal\", icon: \"/cond/cal.png\" },\n    { href: \"/earth\", icon: \"/cond/globe.png\" },\n    { href: \"/chat\", icon: \"/cond/chat.png\" },\n    { href: \"/docs\", icon: \"/cond/book.png\" },\n    { href: \"/user\", icon: \"/cond/user.png\" },\n  ];\n\n  return (\n    <div\n      className=\"bg-gray-900/80 glass-effect border-t border-gray-700\"\n      style={{ height: footerHeight }}\n    >\n      <div className=\"flex justify-around items-center max-w-md mx-auto h-full\">\n        {navItems.map((item: NavItem, idx: number) => {\n          const isActive: boolean = pathname === item.href;\n\n          // 中间\"聊天\"按钮突出显示\n          if (idx === 2) {\n            return (\n              // <Link\n              //       href=\"/chat\"\n              //       className=\"flex flex-col items-center space-y-1 p-2 rounded-lg transition-colors text-white\"\n              //       style={{\n              //           backgroundColor: \"#0051feff\",  // 始终使用这个背景色\n              //       }}\n              //   >\n              //       <Image src=\"/cond/chat.png\" alt=\"聊天\" width={24} height={24} />\n              //       <span className=\"text-xs\">聊天</span>\n              //   </Link>\n              <Link\n                href={item.href}\n                key={item.href}\n                className={`flex items-center justify-center rounded-full transition-colors shadow-lg \n    bg-[#0051feff]`}\n                style={{\n                  padding: 10 * scale,\n                  transform: `translateY(-${footerHeight * 0.2}px)`,\n                }}\n              >\n                <Image\n                  src={item.icon}\n                  alt=\"\"\n                  width={iconSize * 1.2}\n                  height={iconSize * 1.2}\n                  style={{ width: `${iconSize * 1.2}px`, height: `${iconSize * 1.2}px` }}\n                />\n              </Link>\n\n            );\n          }\n\n          // 其他项\n          return (\n            <Link\n              href={item.href}\n              key={item.href}\n              className={`flex items-center justify-center rounded-lg transition-colors\n                ${isActive ? \"bg-gray-700\" : \"hover:bg-gray-700\"}`}\n              style={{ padding: 6 * scale }}\n            >\n              <Image\n                src={item.icon}\n                alt=\"\"\n                width={iconSize}\n                height={iconSize}\n                style={{ width: `${iconSize}px`, height: `${iconSize}px` }}\n              />\n            </Link>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaA,+BAA+B;AAC/B,SAAS;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;QACzC,qBAAqB;QACrB;;QAGA,OAAO,KAAK,aAAa;IAC3B;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,0BAA0B;QAC1B,SAAS,OAAO,UAAU;QAE1B,SAAS;YACP,SAAS,OAAO,UAAU;QAC5B;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAElC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,OAAO;AACT;AAEe,SAAS;IACtB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,QAAQ;IAEd,gBAAgB;IAChB,MAAM,QAAgB,QAAQ;IAC9B,MAAM,WAAmB,OAAO,OAAO,OAAO;IAC9C,MAAM,eAAuB,KAAK,OAAO,eAAe;IAExD,MAAM,WAAsB;QAC1B;YAAE,MAAM;YAAQ,MAAM;QAAgB;QACtC;YAAE,MAAM;YAAU,MAAM;QAAkB;QAC1C;YAAE,MAAM;YAAS,MAAM;QAAiB;QACxC;YAAE,MAAM;YAAS,MAAM;QAAiB;QACxC;YAAE,MAAM;YAAS,MAAM;QAAiB;KACzC;IAED,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,QAAQ;QAAa;kBAE9B,cAAA,8OAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC,MAAe;gBAC5B,MAAM,WAAoB,aAAa,KAAK,IAAI;gBAEhD,eAAe;gBACf,IAAI,QAAQ,GAAG;oBACb,OACE,QAAQ;oBACR,qBAAqB;oBACrB,qGAAqG;oBACrG,iBAAiB;oBACjB,wDAAwD;oBACxD,WAAW;oBACX,MAAM;oBACN,uEAAuE;oBACvE,4CAA4C;oBAC5C,YAAY;kCACZ,8OAAC,4JAAA,CAAA,UAAI;wBACH,MAAM,KAAK,IAAI;wBAEf,WAAW,CAAC;kBACV,CAAC;wBACH,OAAO;4BACL,SAAS,KAAK;4BACd,WAAW,CAAC,YAAY,EAAE,eAAe,IAAI,GAAG,CAAC;wBACnD;kCAEA,cAAA,8OAAC,6HAAA,CAAA,UAAK;4BACJ,KAAK,KAAK,IAAI;4BACd,KAAI;4BACJ,OAAO,WAAW;4BAClB,QAAQ,WAAW;4BACnB,OAAO;gCAAE,OAAO,GAAG,WAAW,IAAI,EAAE,CAAC;gCAAE,QAAQ,GAAG,WAAW,IAAI,EAAE,CAAC;4BAAC;;;;;;uBAblE,KAAK,IAAI;;;;;gBAkBpB;gBAEA,MAAM;gBACN,qBACE,8OAAC,4JAAA,CAAA,UAAI;oBACH,MAAM,KAAK,IAAI;oBAEf,WAAW,CAAC;gBACV,EAAE,WAAW,gBAAgB,qBAAqB;oBACpD,OAAO;wBAAE,SAAS,IAAI;oBAAM;8BAE5B,cAAA,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAK,KAAK,IAAI;wBACd,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,OAAO;4BAAE,OAAO,GAAG,SAAS,EAAE,CAAC;4BAAE,QAAQ,GAAG,SAAS,EAAE,CAAC;wBAAC;;;;;;mBAVtD,KAAK,IAAI;;;;;YAcpB;;;;;;;;;;;AAIR","debugId":null}},
    {"offset": {"line": 2490, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/services/planeApi.ts"],"sourcesContent":["// Describes the data for a single planet\r\nexport interface PlanetInfo {\r\n    rise: string;\r\n    set: string;\r\n    transit: string;\r\n    declination: string;\r\n}\r\n\r\n// Describes the entire object returned from the backend, with planet names as keys\r\nexport type PlanetsData = {\r\n    [planetName: string]: PlanetInfo;\r\n};\r\n\r\nexport interface PlaneApiResponse {\r\n    success: boolean;\r\n    data?: PlanetsData;\r\n    error?: {\r\n        code: string;\r\n        message: string;\r\n        details?: string;\r\n    };\r\n}\r\n\r\n// Interface for the parameters required by the fetch function\r\nexport interface FetchPlanetsDataParams {\r\n    year: number;\r\n    month: number;\r\n    day: number;\r\n    hour: number;\r\n    minute: number;\r\n    longitude: number;\r\n    latitude: number;\r\n}\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://127.0.0.1:5000/api\";\r\n\r\nexport async function fetchPlanetsData(params: FetchPlanetsDataParams): Promise<PlaneApiResponse[\"data\"]> {\r\n    // 转换为后端期望的格式：date 字符串和 time 字符串\r\n    const body = {\r\n        date: `${params.year}-${String(params.month).padStart(2, '0')}-${String(params.day).padStart(2, '0')}`,\r\n        time: `${String(params.hour).padStart(2, '0')}:${String(params.minute).padStart(2, '0')}`,\r\n        longitude: params.longitude,\r\n        latitude: params.latitude,\r\n    };\r\n\r\n    const res = await fetch(`${API_BASE}/planets`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n    });\r\n\r\n    if (!res.ok) {\r\n        throw new Error(`HTTP ${res.status}`);\r\n    }\r\n\r\n    const json: PlaneApiResponse = await res.json();\r\n\r\n    if (!json.success) {\r\n        throw new Error(json.error?.message || \"请求失败\");\r\n    }\r\n\r\n    return json.data;\r\n}\r\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;AAkCzC,MAAM,WAAW,iEAAoC;AAE9C,eAAe,iBAAiB,MAA8B;IACjE,gCAAgC;IAChC,MAAM,OAAO;QACT,MAAM,GAAG,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO,OAAO,KAAK,EAAE,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,OAAO,OAAO,GAAG,EAAE,QAAQ,CAAC,GAAG,MAAM;QACtG,MAAM,GAAG,OAAO,OAAO,IAAI,EAAE,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,OAAO,OAAO,MAAM,EAAE,QAAQ,CAAC,GAAG,MAAM;QACzF,WAAW,OAAO,SAAS;QAC3B,UAAU,OAAO,QAAQ;IAC7B;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,QAAQ,CAAC,EAAE;QAC3C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACzB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACT,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;IACxC;IAEA,MAAM,OAAyB,MAAM,IAAI,IAAI;IAE7C,IAAI,CAAC,KAAK,OAAO,EAAE;QACf,MAAM,IAAI,MAAM,KAAK,KAAK,EAAE,WAAW;IAC3C;IAEA,OAAO,KAAK,IAAI;AACpB","debugId":null}},
    {"offset": {"line": 2523, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/app/earth/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport SevenStars from \"@/components/seven-stars/page\";\nimport SevenData from \"@/components/seven-data/page\";\nimport Zodiac from \"@/components/zodiac/page\";\nimport TibetanCycle from \"@/components/tibetan-cycle/page\";\nimport WidgetCarousel from \"@/components/widgets/WidgetCarousel\";\nimport EarthNav from \"@/components/EarthNav/EarthNav\";\nimport FooterBar from \"@/components/FooterBar\";\nimport { fetchPlanetsData, PlanetsData } from \"@/services/planeApi\";\nexport default function EarthPage() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const tabParam = searchParams.get(\"tab\");\n\n  // 根据URL参数设置初始页面\n  const getInitialPage = () => {\n    if (tabParam === \"seven-stars\") return 1;\n    if (tabParam === \"tibetan-cycle\") return 2;\n    return 0; // 默认显示zodiac\n  };\n\n  const [currentPage, setCurrentPage] = useState(getInitialPage());\n  const [showSevenData, setShowSevenData] = useState(false);\n  const [planetsData, setPlanetsData] = useState<PlanetsData | null>(null);\n\n  // 当URL参数变化时更新当前页面\n  useEffect(() => {\n    setCurrentPage(getInitialPage());\n  }, [tabParam]);\n\n  // Fetch planets data on component mount\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const now = new Date();\n        const params = {\n          year: now.getFullYear(),\n          month: now.getMonth() + 1,\n          day: now.getDate(),\n          hour: now.getHours(),\n          minute: now.getMinutes(),\n          longitude: 121.47, // Default to Shanghai longitude\n          latitude: 31.23,   // Default to Shanghai latitude\n        };\n        const data = await fetchPlanetsData(params);\n        setPlanetsData(data || null);\n        console.log(\"Planets data:\", data);\n      } catch (error) {\n        console.error(\"Error fetching planets data:\", error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  // 切换七星轨迹 ↔ 七星数据\n  const handleToggleSeven = () => {\n    setShowSevenData((prev) => !prev);\n  };\n\n  // 切换页卡时修改 URL\n  const handleChangePage = (index: number) => {\n    setCurrentPage(index);\n    if (index === 0) router.push(\"/earth?tab=zodiac\");\n    if (index === 1) router.push(\"/earth?tab=seven-stars\");\n    if (index === 2) router.push(\"/earth?tab=tibetan-cycle\");\n  };\n\n  // 显示的页面内容\n  const items = [\n    <Zodiac key=\"zodiac\" />,\n    showSevenData ? <SevenData key=\"seven-data\" /> : <SevenStars key=\"seven-stars\" />,\n    <TibetanCycle key=\"tibetan-cycle\" />,\n  ];\n\n  return (\n    <div className=\"bg-black text-white min-h-screen flex flex-col\">\n      {/* 背景层 */}\n      <div className=\"fixed inset-0 bg-black\"></div>\n\n      {/* 主体部分 */}\n      <div className=\"relative z-10 flex flex-col h-screen\">\n        <div className=\"flex-1 flex flex-col p-4\">\n          {/* 顶部导航 */}\n          <div className=\"mb-4 text-sm\">\n            <EarthNav\n              currentPage={\n                tabParam === \"seven-stars\"\n                  ? \"七星轨迹\"\n                  : tabParam === \"tibetan-cycle\"\n                    ? \"藏历绕迥纪年\"\n                    : \"十二宫图\"\n              }\n            />\n          </div>\n\n          {/* 中间内容 */}\n          <div className=\"flex-1 flex items-center justify-center p-2 sm:p-4\">\n            <WidgetCarousel\n              items={items}\n              currentIndex={currentPage}\n              onChange={handleChangePage}\n            />\n          </div>\n\n          {/* 切换按钮：仅在七星页显示 */}\n          {currentPage === 1 && (\n            <button\n              onClick={handleToggleSeven}\n              className=\"fixed bottom-24 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-full shadow-lg transition duration-300 hover:scale-105\"\n            >\n              {showSevenData ? \"*v*\" : \"*_*\"}\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* 底部栏 */}\n      <div className=\"fixed bottom-0 left-0 right-0 z-30\">\n        <FooterBar />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;;;;;;;;;;;;AAYe,SAAS;IACtB,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,gBAAgB;IAChB,MAAM,iBAAiB;QACrB,IAAI,aAAa,eAAe,OAAO;QACvC,IAAI,aAAa,iBAAiB,OAAO;QACzC,OAAO,GAAG,aAAa;IACzB;IAEA,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAsB;IAEnE,kBAAkB;IAClB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,eAAe;IACjB,GAAG;QAAC;KAAS;IAEb,wCAAwC;IACxC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,MAAM,IAAI;gBAChB,MAAM,SAAS;oBACb,MAAM,IAAI,WAAW;oBACrB,OAAO,IAAI,QAAQ,KAAK;oBACxB,KAAK,IAAI,OAAO;oBAChB,MAAM,IAAI,QAAQ;oBAClB,QAAQ,IAAI,UAAU;oBACtB,WAAW;oBACX,UAAU;gBACZ;gBACA,MAAM,OAAO,MAAM,CAAA,GAAA,uIAAA,CAAA,mBAAgB,AAAD,EAAE;gBACpC,eAAe,QAAQ;gBACvB,QAAQ,GAAG,CAAC,iBAAiB;YAC/B,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;YAChD;QACF;QAEA;IACF,GAAG,EAAE;IAEL,gBAAgB;IAChB,MAAM,oBAAoB;QACxB,iBAAiB,CAAC,OAAS,CAAC;IAC9B;IAEA,cAAc;IACd,MAAM,mBAAmB,CAAC;QACxB,eAAe;QACf,IAAI,UAAU,GAAG,OAAO,IAAI,CAAC;QAC7B,IAAI,UAAU,GAAG,OAAO,IAAI,CAAC;QAC7B,IAAI,UAAU,GAAG,OAAO,IAAI,CAAC;IAC/B;IAEA,UAAU;IACV,MAAM,QAAQ;sBACZ,8OAAC,gJAAA,CAAA,UAAM,MAAK;;;;;QACZ,8BAAgB,8OAAC,uJAAA,CAAA,UAAS,MAAK;;;;iCAAkB,8OAAC,wJAAA,CAAA,UAAU,MAAK;;;;;sBACjE,8OAAC,0JAAA,CAAA,UAAY,MAAK;;;;;KACnB;IAED,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;;;;;0BAGf,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,sJAAA,CAAA,UAAQ;gCACP,aACE,aAAa,gBACT,SACA,aAAa,kBACX,WACA;;;;;;;;;;;sCAMZ,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,2JAAA,CAAA,UAAc;gCACb,OAAO;gCACP,cAAc;gCACd,UAAU;;;;;;;;;;;wBAKb,gBAAgB,mBACf,8OAAC;4BACC,SAAS;4BACT,WAAU;sCAET,gBAAgB,QAAQ;;;;;;;;;;;;;;;;;0BAOjC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,2IAAA,CAAA,UAAS;;;;;;;;;;;;;;;;AAIlB","debugId":null}}]
}