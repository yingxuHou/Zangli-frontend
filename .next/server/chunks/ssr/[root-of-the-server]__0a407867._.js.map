{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/components/FooterBar.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport React, { useState, useEffect } from \"react\";\n\n// 定义导航项类型\ninterface NavItem {\n  href: string;\n  icon: string;\n}\n\n// 自适应 hook - 修复：初始化时立即获取真实窗口宽度\nfunction useWindowWidth(): number {\n  const [width, setWidth] = useState<number>(() => {\n    // 在客户端初始化时立即获取真实窗口宽度\n    if (typeof window !== 'undefined') {\n      return window.innerWidth;\n    }\n    return 390; // 服务端渲染时的默认值\n  });\n\n  useEffect(() => {\n    // 客户端挂载时再次确认宽度（处理初始化时机问题）\n    setWidth(window.innerWidth);\n\n    function handleResize(): void {\n      setWidth(window.innerWidth);\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return width;\n}\n\nexport default function FooterBar(): React.JSX.Element {\n  const pathname = usePathname();\n  const width = useWindowWidth();\n\n  // 按 390px 基准做比例\n  const scale: number = width / 390;\n  const iconSize: number = 18.5 * scale; // 图标大小\n  const footerHeight: number = 51 * scale; // 整个 footer 高度\n\n  const navItems: NavItem[] = [\n    { href: \"/cal\", icon: \"/cond/cal.png\" },\n    { href: \"/earth\", icon: \"/cond/globe.png\" },\n    { href: \"/chat\", icon: \"/cond/chat.png\" },\n    { href: \"/docs\", icon: \"/cond/book.png\" },\n    { href: \"/user\", icon: \"/cond/user.png\" },\n  ];\n\n  return (\n    <div\n      className=\"bg-gray-900/80 glass-effect border-t border-gray-700\"\n      style={{ height: footerHeight }}\n    >\n      <div className=\"flex justify-around items-center max-w-md mx-auto h-full\">\n        {navItems.map((item: NavItem, idx: number) => {\n          const isActive: boolean = pathname === item.href;\n\n          // 中间\"聊天\"按钮突出显示\n          if (idx === 2) {\n            return (\n              // <Link\n              //       href=\"/chat\"\n              //       className=\"flex flex-col items-center space-y-1 p-2 rounded-lg transition-colors text-white\"\n              //       style={{\n              //           backgroundColor: \"#0051feff\",  // 始终使用这个背景色\n              //       }}\n              //   >\n              //       <Image src=\"/cond/chat.png\" alt=\"聊天\" width={24} height={24} />\n              //       <span className=\"text-xs\">聊天</span>\n              //   </Link>\n              <Link\n                href={item.href}\n                key={item.href}\n                className={`flex items-center justify-center rounded-full transition-colors shadow-lg \n    bg-[#0051feff]`}\n                style={{\n                  padding: 10 * scale,\n                  transform: `translateY(-${footerHeight * 0.2}px)`,\n                }}\n              >\n                <Image\n                  src={item.icon}\n                  alt=\"\"\n                  width={iconSize * 1.2}\n                  height={iconSize * 1.2}\n                  style={{ width: `${iconSize * 1.2}px`, height: `${iconSize * 1.2}px` }}\n                />\n              </Link>\n\n            );\n          }\n\n          // 其他项\n          return (\n            <Link\n              href={item.href}\n              key={item.href}\n              className={`flex items-center justify-center rounded-lg transition-colors\n                ${isActive ? \"bg-gray-700\" : \"hover:bg-gray-700\"}`}\n              style={{ padding: 6 * scale }}\n            >\n              <Image\n                src={item.icon}\n                alt=\"\"\n                width={iconSize}\n                height={iconSize}\n                style={{ width: `${iconSize}px`, height: `${iconSize}px` }}\n              />\n            </Link>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaA,+BAA+B;AAC/B,SAAS;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;QACzC,qBAAqB;QACrB;;QAGA,OAAO,KAAK,aAAa;IAC3B;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,0BAA0B;QAC1B,SAAS,OAAO,UAAU;QAE1B,SAAS;YACP,SAAS,OAAO,UAAU;QAC5B;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAElC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,OAAO;AACT;AAEe,SAAS;IACtB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,QAAQ;IAEd,gBAAgB;IAChB,MAAM,QAAgB,QAAQ;IAC9B,MAAM,WAAmB,OAAO,OAAO,OAAO;IAC9C,MAAM,eAAuB,KAAK,OAAO,eAAe;IAExD,MAAM,WAAsB;QAC1B;YAAE,MAAM;YAAQ,MAAM;QAAgB;QACtC;YAAE,MAAM;YAAU,MAAM;QAAkB;QAC1C;YAAE,MAAM;YAAS,MAAM;QAAiB;QACxC;YAAE,MAAM;YAAS,MAAM;QAAiB;QACxC;YAAE,MAAM;YAAS,MAAM;QAAiB;KACzC;IAED,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,QAAQ;QAAa;kBAE9B,cAAA,8OAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC,MAAe;gBAC5B,MAAM,WAAoB,aAAa,KAAK,IAAI;gBAEhD,eAAe;gBACf,IAAI,QAAQ,GAAG;oBACb,OACE,QAAQ;oBACR,qBAAqB;oBACrB,qGAAqG;oBACrG,iBAAiB;oBACjB,wDAAwD;oBACxD,WAAW;oBACX,MAAM;oBACN,uEAAuE;oBACvE,4CAA4C;oBAC5C,YAAY;kCACZ,8OAAC,4JAAA,CAAA,UAAI;wBACH,MAAM,KAAK,IAAI;wBAEf,WAAW,CAAC;kBACV,CAAC;wBACH,OAAO;4BACL,SAAS,KAAK;4BACd,WAAW,CAAC,YAAY,EAAE,eAAe,IAAI,GAAG,CAAC;wBACnD;kCAEA,cAAA,8OAAC,6HAAA,CAAA,UAAK;4BACJ,KAAK,KAAK,IAAI;4BACd,KAAI;4BACJ,OAAO,WAAW;4BAClB,QAAQ,WAAW;4BACnB,OAAO;gCAAE,OAAO,GAAG,WAAW,IAAI,EAAE,CAAC;gCAAE,QAAQ,GAAG,WAAW,IAAI,EAAE,CAAC;4BAAC;;;;;;uBAblE,KAAK,IAAI;;;;;gBAkBpB;gBAEA,MAAM;gBACN,qBACE,8OAAC,4JAAA,CAAA,UAAI;oBACH,MAAM,KAAK,IAAI;oBAEf,WAAW,CAAC;gBACV,EAAE,WAAW,gBAAgB,qBAAqB;oBACpD,OAAO;wBAAE,SAAS,IAAI;oBAAM;8BAE5B,cAAA,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAK,KAAK,IAAI;wBACd,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,OAAO;4BAAE,OAAO,GAAG,SAAS,EAAE,CAAC;4BAAE,QAAQ,GAAG,SAAS,EAAE,CAAC;wBAAC;;;;;;mBAVtD,KAAK,IAAI;;;;;YAcpB;;;;;;;;;;;AAIR","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///D:/university/project/AstroZangli-AI/AstroZangli-AI/frontend/src/app/details/topic/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport Link from \"next/link\";\nimport FooterBar from \"@/components/FooterBar\";\n\nexport default function TopicDetailPage() {\n    const params = useParams();\n    const id = Number(params.id);\n    const [content, setContent] = useState<string>(\"\");\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    // 主题标题映射：根据你给出的条目整理，尽量覆盖常见 id\n    const topicTitles: Record<number, string> = {\n        0: \"藏历是什么：种类、流派与发展历史\",\n        1: \"解密藏历智慧之工具 — 萨雄与图珠（日圭）\",\n        2: \"藏历与农历的比较（阴阳历差异与闰月）\",\n        3: \"历法与节气算法：藏历计算体系原理\",\n        4: \"藏历的纪年方法（生肖、教历、绕迥等）\",\n        5: \"藏历的纪月方法（十二/月与闰月规则）\",\n        6: \"藏历的纪日方法（数字、生肖、弦月配日）\",\n        7: \"藏历的纪时方法（生肖时、漏刻）\",\n        8: \"历算五支：曜、日、宿、会合、作用（五基数）\",\n        9: \"藏历的十曜体系（含罗睺、劫火、长尾彗星）\",\n        11: \"藏历历书：天文与气象并重的历书传统\",\n        12: \"六历对照：银巴万年历及其基础历派说明\",\n        13: \"藏历与季节：节气、季节划分与地域特色\",\n        14: \"藏历历书与二十四节气（藏历节气与汉历节气）\",\n        15: \"五星（曜）运动、缺日与重日、日月食预测\",\n        16: \"藏历是什么（补充：地域特色、应用与跨文化）\",\n        17: \"三种日的概念：太阳日、太阴日与宫日\",\n        18: \"五行与五大（五源）学说在藏历中的应用\",\n        19: \"2025年满月日历（全年满月列表）\",\n        20: \"2025年17大罕见天文事件总览\",\n        21: \"2025年天文事件日历（全年事件汇总）\",\n        22: \"2025年彗星时间表与观测要点\",\n        23: \"2025年春分与节气时间说明\",\n        24: \"二十八（七）星宿——古代观测标志与运用\",\n        25: \"太阳周年视运动与宫年概念\",\n        26: \"三种年的概念：太阳年、回归年、恒星年\",\n        27: \"三种月的概念：太阴月（朔望月）、恒星月、太阳月\",\n        28: \"黄道十二宫定义与天文划分\",\n        29: \"藏历中的十曜与五星（曜）细解\",\n        30: \"太阳日与地球自转周期（太阳日含义）\",\n        31: \"太阴月与月亮的视运动与月相变化\",\n        32: \"藏历的时间四维体系：纪年、纪月、纪日、纪时\",\n        33: \"藏历与农历差异补充（闰月设置的意义）\",\n        34: \"历法长期修正与万年历编制方法（绕迥计年）\",\n        35: \"天球视角：藏历的宇宙观与天球模型\",\n        36: \"太阳年、节气与历算中的时间计量\",\n        37: \"月食类型、图像与发生频率说明\",\n        38: \"藏历与占卜：历法在民俗与占算中的应用\",\n        39: \"黄道十二宫与二十八星宿的合并解读\",\n        40: \"（已合并）该条目内容已在其他主题中覆盖\",\n        41: \"时轮历的时间与空间计量体系（单位与进制）\",\n        42: \"（备用）\",\n        43: \"时轮历的日月食预测方法综述\",\n        44: \"年/月/日等多周期合并与历法设计\",\n        45: \"三种日/年/月合并说明（体系整合）\",\n        46: \"藏历的缺日与重日规则详解\",\n        // 如果未来需要可以继续添加更多条目\n    };\n\n    useEffect(() => {\n        const fetchHtmlContent = async () => {\n            try {\n                // 优先按 /database/topic{id}.html 拉取（保持你原有结构）\n                const response = await fetch(`/database/topic${id}.html`);\n                if (!response.ok) {\n                    throw new Error(`无法加载主题内容 (${response.status})`);\n                }\n                const html = await response.text();\n                setContent(html);\n                setLoading(false);\n            } catch (err) {\n                console.error(\"加载HTML内容失败:\", err);\n                setError(\"无法加载主题内容，请稍后再试\");\n                setLoading(false);\n            }\n        };\n\n        if (!Number.isNaN(id)) {\n            fetchHtmlContent();\n        } else {\n            setError(\"无效的主题 id\");\n            setLoading(false);\n        }\n    }, [id]);\n\n    return (\n        <div className=\"bg-black text-white min-h-screen overflow-x-hidden\">\n            {/* 星空背景 */}\n            <div className=\"fixed inset-0 bg-black pointer-events-none\">\n                <div className=\"absolute inset-0 opacity-30\">\n                    {[...Array(100)].map((_, i) => (\n                        <div\n                            key={i}\n                            className=\"absolute w-1 h-1 bg-white rounded-full star\"\n                            style={{\n                                left: `${Math.random() * 100}%`,\n                                top: `${Math.random() * 100}%`,\n                            }}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            {/* 主内容区域 - 与cal页面保持一致的布局 */}\n            <div className=\"relative z-10 min-h-screen flex flex-col pb-20\">\n                {/* 顶部：返回 + 真实主题名 */}\n                <div className=\"p-4 pt-3 flex items-center\">\n                    <Link href=\"/docs\" className=\"text-gray-300 hover:text-white\">\n                        <div className=\"w-4 h-4 border-l-2 border-t-2 border-current rotate-[-45deg]\" />\n                    </Link>\n                    <div className=\"ml-4 text-lg font-medium\">\n                        {topicTitles[id] || `藏历主题 ${id}`}\n                    </div>\n                </div>\n\n                {/* 内容区域 - 可滚动，限制宽度防止溢出 */}\n                <div className=\"flex-1 overflow-y-auto px-4 overflow-x-hidden\">\n                    {loading ? (\n                        <div className=\"flex justify-center items-center h-40\">\n                            <div className=\"text-white\">加载中...</div>\n                        </div>\n                    ) : error ? (\n                        <div className=\"text-center py-10 text-red-400\">\n                            <p>{error}</p>\n                        </div>\n                    ) : (\n                        <div\n                            className=\"prose prose-invert prose-sm max-w-3xl mx-auto pb-8\"\n                            dangerouslySetInnerHTML={{ __html: content }}\n                        />\n                    )}\n                </div>\n            </div>\n\n            {/* 固定在底部的FooterBar */}\n            <div className=\"fixed bottom-0 left-0 right-0 z-50\">\n                <FooterBar />\n            </div>\n        </div>\n    );\n}"],"names":[],"mappings":"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","debugId":null}}]
}